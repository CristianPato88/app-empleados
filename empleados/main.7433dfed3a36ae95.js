"use strict";(self.webpackChunkempleados=self.webpackChunkempleados||[]).push([[179],{2011:(ut,Se,V)=>{V.d(Se,{Dh:()=>ge,GT:()=>pe,cc:()=>Re,hO:()=>Ue,on:()=>$,pX:()=>oe,xv:()=>_e});var f=V(4650),ne=V(127),F=V(5813);ut=V.hmd(ut);const ue=["ngOnDestroy"],oe=(me,tt,ot,Me={})=>new Proxy(me,{get:(Ee,Te)=>ot.runOutsideAngular(()=>{var Be;if(me[Te])return!(null===(Be=Me?.spy)||void 0===Be)&&Be.get&&Me.spy.get(Te,me[Te]),me[Te];if(ue.indexOf(Te)>-1)return()=>{};const He=tt.toPromise().then(H=>{const ye=H&&H[Te];return"function"==typeof ye?ye.bind(H):ye&&ye.then?ye.then(Q=>ot.run(()=>Q)):ot.run(()=>ye)});return new Proxy(()=>{},{get:(H,ye)=>He[ye],apply:(H,ye,Q)=>He.then(te=>{var ae;const ie=te&&te(...Q);return!(null===(ae=Me?.spy)||void 0===ae)&&ae.apply&&Me.spy.apply(Te,Q,ie),ie})})})}),pe=(me,tt)=>{tt.forEach(ot=>{Object.getOwnPropertyNames(ot.prototype||ot).forEach(Me=>{Object.defineProperty(me.prototype,Me,Object.getOwnPropertyDescriptor(ot.prototype||ot,Me))})})};class ce{constructor(tt){return tt}}const ge=new f.OlP("angularfire2.app.options"),_e=new f.OlP("angularfire2.app.name");function $(me,tt,ot){const Ee="object"==typeof ot&&ot||{};Ee.name=Ee.name||"string"==typeof ot&&ot||"[DEFAULT]";const Be=ne.Z.apps.filter(He=>He&&He.name===Ee.name)[0]||tt.runOutsideAngular(()=>ne.Z.initializeApp(me,Ee));try{JSON.stringify(me)!==JSON.stringify(Be.options)&&z("error",`${Be.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(Be)}const z=(me,...tt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[me](...tt)},X={provide:ce,useFactory:$,deps:[ge,f.R0b,[new f.FiY,_e]]};let Ue=(()=>{class me{constructor(ot){ne.Z.registerVersion("angularfire",F.q4.full,"core"),ne.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ne.Z.registerVersion("angular",f.q4F.full,ot.toString())}static initializeApp(ot,Me){return{ngModule:me,providers:[{provide:ge,useValue:ot},{provide:_e,useValue:Me}]}}}return me.\u0275fac=function(ot){return new(ot||me)(f.LFG(f.Lbi))},me.\u0275mod=f.oAB({type:me}),me.\u0275inj=f.cJS({providers:[X]}),me})();function Re(me,tt,ot,Me,Ee){const[,Te,Be]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===me)||[];if(Te)return function Ie(me,tt){try{return me.toString()===tt.toString()}catch{return me===tt}}(Ee,Be)||(ve("error",`${tt} was already initialized on the ${ot} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:Ee,was:Be})),Te;{const He=Me();return globalThis.\u0275AngularfireInstanceCache.push([me,He,Ee]),He}}const nt=!!ut.hot,ve=(me,...tt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[me](...tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Se,V)=>{V.d(Se,{q4:()=>vi,iC:()=>io,fc:()=>Fh,HU:()=>Vu,vb:()=>Ca,JM:()=>ml});var f=V(4650),ne=V(5867),F=V(5861),ue=V(9681),oe=V(2090),pe=V(4859),ce=V(1877),ge=V(8766);const _e="@firebase/installations",$="0.5.12",X=`w:${$}`,Ue="FIS_v2",tt=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ot(T){return T instanceof oe.ZR&&T.code.includes("request-failed")}function Me({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ee(T){return{token:T.token,requestStatus:2,expiresIn:te(T.expiresIn),creationTime:Date.now()}}function Te(T,S){return Be.apply(this,arguments)}function Be(){return(Be=(0,F.Z)(function*(T,S){const B=(yield S.json()).error;return tt.create("request-failed",{requestName:T,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function He({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function H(T,{refreshToken:S}){const R=He(T);return R.append("Authorization",function ae(T){return`${Ue} ${T}`}(S)),R}function ye(T){return Q.apply(this,arguments)}function Q(){return(Q=(0,F.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function te(T){return Number(T.replace("s","000"))}function ie(T,S){return Le.apply(this,arguments)}function Le(){return(Le=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:R}){const B=Me(T),ee=He(T),de=S.getImmediate({optional:!0});if(de){const It=yield de.getHeartbeatsHeader();It&&ee.append("x-firebase-client",It)}const $e={method:"POST",headers:ee,body:JSON.stringify({fid:R,authVersion:Ue,appId:T.appId,sdkVersion:X})},ft=yield ye(()=>fetch(B,$e));if(ft.ok){const It=yield ft.json();return{fid:It.fid||R,registrationStatus:2,refreshToken:It.refreshToken,authToken:Ee(It.authToken)}}throw yield Te("Create Installation",ft)})).apply(this,arguments)}function Oe(T){return new Promise(S=>{setTimeout(S,T)})}const zt=/^[cdef][\w-]{21}$/;function Ye(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function cn(T){return function dt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return zt.test(R)?R:""}catch{return""}}function On(T){return`${T.appName}!${T.appId}`}const en=new Map;function tn(T,S){const R=On(T);un(R,S),function ia(T,S){const R=function kr(){return!ei&&"BroadcastChannel"in self&&(ei=new BroadcastChannel("[Firebase] FID Change"),ei.onmessage=T=>{un(T.data.key,T.data.fid)}),ei}();R&&R.postMessage({key:T,fid:S}),function ti(){0===en.size&&ei&&(ei.close(),ei=null)}()}(R,S)}function un(T,S){const R=en.get(T);if(R)for(const B of R)B(S)}let ei=null;const ni="firebase-installations-store";let fi=null;function sa(){return fi||(fi=(0,ge.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(ni)}})),fi}function Xe(T,S){return ri.apply(this,arguments)}function ri(){return(ri=(0,F.Z)(function*(T,S){const R=On(T),ee=(yield sa()).transaction(ni,"readwrite"),de=ee.objectStore(ni),xe=yield de.get(R);return yield de.put(S,R),yield ee.done,(!xe||xe.fid!==S.fid)&&tn(T,S.fid),S})).apply(this,arguments)}function ps(T){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,F.Z)(function*(T){const S=On(T),B=(yield sa()).transaction(ni,"readwrite");yield B.objectStore(ni).delete(S),yield B.done})).apply(this,arguments)}function pi(T,S){return ii.apply(this,arguments)}function ii(){return(ii=(0,F.Z)(function*(T,S){const R=On(T),ee=(yield sa()).transaction(ni,"readwrite"),de=ee.objectStore(ni),xe=yield de.get(R),$e=S(xe);return void 0===$e?yield de.delete(R):yield de.put($e,R),yield ee.done,$e&&(!xe||xe.fid!==$e.fid)&&tn(T,$e.fid),$e})).apply(this,arguments)}function Ln(T){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,F.Z)(function*(T){let S;const R=yield pi(T.appConfig,B=>{const ee=mn(B),de=ht(T,ee);return S=de.registrationPromise,de.installationEntry});return""===R.fid?{installationEntry:yield S}:{installationEntry:R,registrationPromise:S}})).apply(this,arguments)}function mn(T){return St(T||{fid:Ye(),registrationStatus:0})}function ht(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(tt.create("app-offline"))};const R={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},B=function at(T,S){return dn.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:B}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:hr(T)}:{installationEntry:S}}function dn(){return(dn=(0,F.Z)(function*(T,S){try{const R=yield ie(T,S);return Xe(T.appConfig,R)}catch(R){throw ot(R)&&409===R.customData.serverCode?yield ps(T.appConfig):yield Xe(T.appConfig,{fid:S.fid,registrationStatus:0}),R}})).apply(this,arguments)}function hr(T){return fr.apply(this,arguments)}function fr(){return(fr=(0,F.Z)(function*(T){let S=yield Ur(T.appConfig);for(;1===S.registrationStatus;)yield Oe(100),S=yield Ur(T.appConfig);if(0===S.registrationStatus){const{installationEntry:R,registrationPromise:B}=yield Ln(T);return B||R}return S})).apply(this,arguments)}function Ur(T){return pi(T,S=>{if(!S)throw tt.create("installation-not-found");return St(S)})}function St(T){return function gs(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function rn(T,S){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:S},R){const B=nn(T,R),ee=H(T,R),de=S.getImmediate({optional:!0});if(de){const It=yield de.getHeartbeatsHeader();It&&ee.append("x-firebase-client",It)}const $e={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:X,appId:T.appId}})},ft=yield ye(()=>fetch(B,$e));if(ft.ok)return Ee(yield ft.json());throw yield Te("Generate Auth Token",ft)})).apply(this,arguments)}function nn(T,{fid:S}){return`${Me(T)}/${S}/authTokens:generate`}function Y(T){return G.apply(this,arguments)}function G(){return(G=(0,F.Z)(function*(T,S=!1){let R;const B=yield pi(T.appConfig,de=>{if(!lt(de))throw tt.create("not-registered");const xe=de.authToken;if(!S&&_n(xe))return de;if(1===xe.requestStatus)return R=j(T,S),de;{if(!navigator.onLine)throw tt.create("app-offline");const $e=rr(de);return R=De(T,$e),$e}});return R?yield R:B.authToken})).apply(this,arguments)}function j(T,S){return q.apply(this,arguments)}function q(){return(q=(0,F.Z)(function*(T,S){let R=yield Z(T.appConfig);for(;1===R.authToken.requestStatus;)yield Oe(100),R=yield Z(T.appConfig);const B=R.authToken;return 0===B.requestStatus?Y(T,S):B})).apply(this,arguments)}function Z(T){return pi(T,S=>{if(!lt(S))throw tt.create("not-registered");return function Ht(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function De(T,S){return je.apply(this,arguments)}function je(){return(je=(0,F.Z)(function*(T,S){try{const R=yield rn(T,S),B=Object.assign(Object.assign({},S),{authToken:R});return yield Xe(T.appConfig,B),R}catch(R){if(!ot(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const B=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Xe(T.appConfig,B)}else yield ps(T.appConfig);throw R}})).apply(this,arguments)}function lt(T){return void 0!==T&&2===T.registrationStatus}function _n(T){return 2===T.requestStatus&&!function sn(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function rr(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function In(){return(In=(0,F.Z)(function*(T){const S=T,{installationEntry:R,registrationPromise:B}=yield Ln(S);return B?B.catch(console.error):Y(S).catch(console.error),R.fid})).apply(this,arguments)}function Gi(){return(Gi=(0,F.Z)(function*(T,S=!1){const R=T;return yield Br(R),(yield Y(R,S)).token})).apply(this,arguments)}function Br(T){return qn.apply(this,arguments)}function qn(){return(qn=(0,F.Z)(function*(T){const{registrationPromise:S}=yield Ln(T);S&&(yield S)})).apply(this,arguments)}function Ws(T){return tt.create("missing-app-config-values",{valueName:T})}const vo="installations",bn=T=>{const S=T.getProvider("app").getImmediate(),R=function Cn(T){if(!T||!T.options)throw Ws("App Configuration");if(!T.name)throw Ws("App Name");const S=["projectId","apiKey","appId"];for(const R of S)if(!T.options[R])throw Ws(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:R,heartbeatServiceProvider:(0,ue._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},wo=T=>{const S=T.getProvider("app").getImmediate(),R=(0,ue._getProvider)(S,vo).getImmediate();return{getId:()=>function Ft(T){return In.apply(this,arguments)}(R),getToken:ee=>function zn(T){return Gi.apply(this,arguments)}(R,ee)}};(function kc(){(0,ue._registerComponent)(new pe.wA(vo,bn,"PUBLIC")),(0,ue._registerComponent)(new pe.wA("installations-internal",wo,"PRIVATE"))})(),(0,ue.registerVersion)(_e,$),(0,ue.registerVersion)(_e,$,"esm2017");const Wi="@firebase/remote-config",Zn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Tp{constructor(S,R,B,ee){this.client=S,this.storage=R,this.storageCache=B,this.logger=ee}isCachedDataFresh(S,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-R,ee=B<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ee}.`),ee}fetch(S){var R=this;return(0,F.Z)(function*(){const[B,ee]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(ee&&R.isCachedDataFresh(S.cacheMaxAgeMillis,B))return ee;S.eTag=ee&&ee.eTag;const de=yield R.client.fetch(S),xe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===de.status&&xe.push(R.storage.setLastSuccessfulFetchResponse(de)),yield Promise.all(xe),de})()}}function Uc(T=navigator){return T.languages&&T.languages[0]||T.language}class Bc{constructor(S,R,B,ee,de,xe){this.firebaseInstallations=S,this.sdkVersion=R,this.namespace=B,this.projectId=ee,this.apiKey=de,this.appId=xe}fetch(S){var R=this;return(0,F.Z)(function*(){var B,ee,de;const[xe,$e]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},pt={sdk_version:R.sdkVersion,app_instance_id:xe,app_instance_id_token:$e,app_id:R.appId,language_code:Uc()},Sn={method:"POST",headers:Nt,body:JSON.stringify(pt)},br=fetch(It,Sn),yl=new Promise((Lo,Ss)=>{S.signal.addEventListener(()=>{const Uu=new Error("The operation was aborted.");Uu.name="AbortError",Ss(Uu)})});let Ta;try{yield Promise.race([br,yl]),Ta=yield br}catch(Lo){let Ss="fetch-client-network";throw"AbortError"===(null===(B=Lo)||void 0===B?void 0:B.name)&&(Ss="fetch-timeout"),Zn.create(Ss,{originalErrorMessage:null===(ee=Lo)||void 0===ee?void 0:ee.message})}let Fo=Ta.status;const Da=Ta.headers.get("ETag")||void 0;let Xi,Gr;if(200===Ta.status){let Lo;try{Lo=yield Ta.json()}catch(Ss){throw Zn.create("fetch-client-parse",{originalErrorMessage:null===(de=Ss)||void 0===de?void 0:de.message})}Xi=Lo.entries,Gr=Lo.state}if("INSTANCE_STATE_UNSPECIFIED"===Gr?Fo=500:"NO_CHANGE"===Gr?Fo=304:("NO_TEMPLATE"===Gr||"EMPTY_CONFIG"===Gr)&&(Xi={}),304!==Fo&&200!==Fo)throw Zn.create("fetch-status",{httpStatus:Fo});return{status:Fo,eTag:Da,config:Xi}})()}}class jm{constructor(S,R){this.client=S,this.storage=R}fetch(S){var R=this;return(0,F.Z)(function*(){const B=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(S,B)})()}attemptFetch(S,{throttleEndTimeMillis:R,backoffCount:B}){var ee=this;return(0,F.Z)(function*(){yield function sr(T,S){return new Promise((R,B)=>{const ee=Math.max(S-Date.now(),0),de=setTimeout(R,ee);T.addEventListener(()=>{clearTimeout(de),B(Zn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,R);try{const de=yield ee.client.fetch(S);return yield ee.storage.deleteThrottleMetadata(),de}catch(de){if(!function ph(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(de))throw de;const xe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(B),backoffCount:B+1};return yield ee.storage.setThrottleMetadata(xe),ee.attemptFetch(S,xe)}})()}}class gh{constructor(S,R,B,ee,de){this.app=S,this._client=R,this._storageCache=B,this._storage=ee,this._logger=de,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function jc(T,S){var R;const B=T.target.error||void 0;return Zn.create(S,{originalErrorMessage:B&&(null===(R=B)||void 0===R?void 0:R.message)})}const Zs="app_namespace_store";class Wm{constructor(S,R,B,ee=function Gm(){return new Promise((T,S)=>{var R;try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=ee=>{S(jc(ee,"storage-open"))},B.onsuccess=ee=>{T(ee.target.result)},B.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(Zs,{keyPath:"compositeKey"})}}catch(B){S(Zn.create("storage-open",{originalErrorMessage:null===(R=B)||void 0===R?void 0:R.message}))}})}()){this.appId=S,this.appName=R,this.namespace=B,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var R=this;return(0,F.Z)(function*(){const B=yield R.openDbPromise;return new Promise((ee,de)=>{var xe;const ft=B.transaction([Zs],"readonly").objectStore(Zs),It=R.createCompositeKey(S);try{const Nt=ft.get(It);Nt.onerror=pt=>{de(jc(pt,"storage-get"))},Nt.onsuccess=pt=>{const Sn=pt.target.result;ee(Sn?Sn.value:void 0)}}catch(Nt){de(Zn.create("storage-get",{originalErrorMessage:null===(xe=Nt)||void 0===xe?void 0:xe.message}))}})})()}set(S,R){var B=this;return(0,F.Z)(function*(){const ee=yield B.openDbPromise;return new Promise((de,xe)=>{var $e;const It=ee.transaction([Zs],"readwrite").objectStore(Zs),Nt=B.createCompositeKey(S);try{const pt=It.put({compositeKey:Nt,value:R});pt.onerror=Sn=>{xe(jc(Sn,"storage-set"))},pt.onsuccess=()=>{de()}}catch(pt){xe(Zn.create("storage-set",{originalErrorMessage:null===($e=pt)||void 0===$e?void 0:$e.message}))}})})()}delete(S){var R=this;return(0,F.Z)(function*(){const B=yield R.openDbPromise;return new Promise((ee,de)=>{var xe;const ft=B.transaction([Zs],"readwrite").objectStore(Zs),It=R.createCompositeKey(S);try{const Nt=ft.delete(It);Nt.onerror=pt=>{de(jc(pt,"storage-delete"))},Nt.onsuccess=()=>{ee()}}catch(Nt){de(Zn.create("storage-delete",{originalErrorMessage:null===(xe=Nt)||void 0===xe?void 0:xe.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class _h{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,F.Z)(function*(){const R=S.storage.getLastFetchStatus(),B=S.storage.getLastSuccessfulFetchTimestampMillis(),ee=S.storage.getActiveConfig(),de=yield R;de&&(S.lastFetchStatus=de);const xe=yield B;xe&&(S.lastSuccessfulFetchTimestampMillis=xe);const $e=yield ee;$e&&(S.activeConfig=$e)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function ou(){return Dp.apply(this,arguments)}function Dp(){return(Dp=(0,F.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Ys(){(0,ue._registerComponent)(new pe.wA("remote-config",function T(S,{instanceIdentifier:R}){const B=S.getProvider("app").getImmediate(),ee=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!(0,oe.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:de,apiKey:xe,appId:$e}=B.options;if(!de)throw Zn.create("registration-project-id");if(!xe)throw Zn.create("registration-api-key");if(!$e)throw Zn.create("registration-app-id");const ft=new Wm($e,B.name,R=R||"firebase"),It=new _h(ft),Nt=new ce.Yd(Wi);Nt.logLevel=ce.in.ERROR;const pt=new Bc(ee,ue.SDK_VERSION,R,de,xe,$e),Sn=new jm(pt,ft),br=new Tp(Sn,ft,It,Nt),yl=new gh(B,br,It,ft,Nt);return function Vn(T){const S=(0,oe.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(yl),yl},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Wi,"0.3.11"),(0,ue.registerVersion)(Wi,"0.3.11","esm2017")}();const zi="/firebase-messaging-sw.js",_s="/firebase-cloud-messaging-push-scope",ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ya="google.c.a.c_id",au="google.c.a.c_l",Hc="google.c.a.ts",Sp="google.c.a.e";var vs=(()=>{return(T=vs||(vs={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",vs;var T})();function mi(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function si(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(R),ee=new Uint8Array(B.length);for(let de=0;de<B.length;++de)ee[de]=B.charCodeAt(de);return ee}const aa="fcm_token_details_db",Cr="fcm_token_object_Store";function Ap(T){return xp.apply(this,arguments)}function xp(){return xp=(0,F.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(de=>de.name).includes(aa))return null;let S=null;return(yield(0,ge.X3)(aa,5,{upgrade:(B=(0,F.Z)(function*(ee,de,xe,$e){var ft;if(de<2||!ee.objectStoreNames.contains(Cr))return;const It=$e.objectStore(Cr),Nt=yield It.index("fcmSenderId").get(T);if(yield It.clear(),Nt)if(2===de){const pt=Nt;if(!pt.auth||!pt.p256dh||!pt.endpoint)return;S={token:pt.fcmToken,createTime:null!==(ft=pt.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:pt.auth,p256dh:pt.p256dh,endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:"string"==typeof pt.vapidKey?pt.vapidKey:mi(pt.vapidKey)}}}else if(3===de){const pt=Nt;S={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:mi(pt.auth),p256dh:mi(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:mi(pt.vapidKey)}}}else if(4===de){const pt=Nt;S={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:mi(pt.auth),p256dh:mi(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:mi(pt.vapidKey)}}}}),function(de,xe,$e,ft){return B.apply(this,arguments)})})).close(),yield(0,ge.Lj)(aa),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),xn(S)?S:null;var B}),xp.apply(this,arguments)}function xn(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const _i="firebase-messaging-store";let Hr=null;function uu(){return Hr||(Hr=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(_i)}})),Hr}function la(T){return ws.apply(this,arguments)}function ws(){return(ws=(0,F.Z)(function*(T){const S=ki(T),B=yield(yield uu()).transaction(_i).objectStore(_i).get(S);if(B)return B;{const ee=yield Ap(T.appConfig.senderId);if(ee)return yield qt(T,ee),ee}})).apply(this,arguments)}function qt(T,S){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,F.Z)(function*(T,S){const R=ki(T),ee=(yield uu()).transaction(_i,"readwrite");return yield ee.objectStore(_i).put(S,R),yield ee.done,S})).apply(this,arguments)}function Co(T){return cu.apply(this,arguments)}function cu(){return(cu=(0,F.Z)(function*(T){const S=ki(T),B=(yield uu()).transaction(_i,"readwrite");yield B.objectStore(_i).delete(S),yield B.done})).apply(this,arguments)}function ki({appConfig:T}){return T.appId}const Dn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function At(T,S){return hu.apply(this,arguments)}function hu(){return(hu=(0,F.Z)(function*(T,S){var R;const B=yield Gc(T),ee=Ae(S),de={method:"POST",headers:B,body:JSON.stringify(ee)};let xe;try{xe=yield(yield fetch(Es(T.appConfig),de)).json()}catch($e){throw Dn.create("token-subscribe-failed",{errorInfo:null===(R=$e)||void 0===R?void 0:R.toString()})}if(xe.error)throw Dn.create("token-subscribe-failed",{errorInfo:xe.error.message});if(!xe.token)throw Dn.create("token-subscribe-no-token");return xe.token})).apply(this,arguments)}function Rp(T,S){return fu.apply(this,arguments)}function fu(){return(fu=(0,F.Z)(function*(T,S){var R;const B=yield Gc(T),ee=Ae(S.subscriptionOptions),de={method:"PATCH",headers:B,body:JSON.stringify(ee)};let xe;try{xe=yield(yield fetch(`${Es(T.appConfig)}/${S.token}`,de)).json()}catch($e){throw Dn.create("token-update-failed",{errorInfo:null===(R=$e)||void 0===R?void 0:R.toString()})}if(xe.error)throw Dn.create("token-update-failed",{errorInfo:xe.error.message});if(!xe.token)throw Dn.create("token-update-no-token");return xe.token})).apply(this,arguments)}function pu(T,S){return $c.apply(this,arguments)}function $c(){return($c=(0,F.Z)(function*(T,S){var R;const ee={method:"DELETE",headers:yield Gc(T)};try{const xe=yield(yield fetch(`${Es(T.appConfig)}/${S}`,ee)).json();if(xe.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:xe.error.message})}catch(de){throw Dn.create("token-unsubscribe-failed",{errorInfo:null===(R=de)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function Es({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Gc(T){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,F.Z)(function*({appConfig:T,installations:S}){const R=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Ae({p256dh:T,auth:S,endpoint:R,vapidKey:B}){const ee={web:{endpoint:R,auth:S,p256dh:T}};return B!==ys&&(ee.web.applicationPubKey=B),ee}const $t=6048e5;function gu(T){return mu.apply(this,arguments)}function mu(){return(mu=(0,F.Z)(function*(T){const S=yield Wc(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:mi(S.getKey("auth")),p256dh:mi(S.getKey("p256dh"))},B=yield la(T.firebaseDependencies);if(B){if(Eh(B.subscriptionOptions,R))return Date.now()>=B.createTime+$t?ua(T,{token:B.token,createTime:Date.now(),subscriptionOptions:R}):B.token;try{yield pu(T.firebaseDependencies,B.token)}catch(ee){console.warn(ee)}return Xa(T.firebaseDependencies,R)}return Xa(T.firebaseDependencies,R)})).apply(this,arguments)}function Mn(T){return _u.apply(this,arguments)}function _u(){return(_u=(0,F.Z)(function*(T){const S=yield la(T.firebaseDependencies);S&&(yield pu(T.firebaseDependencies,S.token),yield Co(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function ua(T,S){return yi.apply(this,arguments)}function yi(){return(yi=(0,F.Z)(function*(T,S){try{const R=yield Rp(T.firebaseDependencies,S),B=Object.assign(Object.assign({},S),{token:R,createTime:Date.now()});return yield qt(T.firebaseDependencies,B),R}catch(R){throw yield Mn(T),R}})).apply(this,arguments)}function Xa(T,S){return el.apply(this,arguments)}function el(){return(el=(0,F.Z)(function*(T,S){const B={token:yield At(T,S),createTime:Date.now(),subscriptionOptions:S};return yield qt(T,B),B.token})).apply(this,arguments)}function Wc(T,S){return zc.apply(this,arguments)}function zc(){return(zc=(0,F.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:si(S)})})).apply(this,arguments)}function Eh(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function bo(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Rn(T,S){if(!S.notification)return;T.notification={};const R=S.notification.title;R&&(T.notification.title=R);const B=S.notification.body;B&&(T.notification.body=B);const ee=S.notification.image;ee&&(T.notification.image=ee)}(S,T),function qi(T,S){!S.data||(T.data=S.data)}(S,T),function qc(T,S){var R,B,ee,de,xe;if(!(S.fcmOptions||null!==(R=S.notification)&&void 0!==R&&R.click_action))return;T.fcmOptions={};const $e=null!==(ee=null===(B=S.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==ee?ee:null===(de=S.notification)||void 0===de?void 0:de.click_action;$e&&(T.fcmOptions.link=$e);const ft=null===(xe=S.fcmOptions)||void 0===xe?void 0:xe.analytics_label;ft&&(T.fcmOptions.analyticsLabel=ft)}(S,T),S}function To(T){return"object"==typeof T&&!!T&&Ya in T}function Is(T,S){const R=[];for(let B=0;B<T.length;B++)R.push(T.charAt(B)),B<S.length&&R.push(S.charAt(B));return R.join("")}function tl(T){return Dn.create("missing-app-config-values",{valueName:T})}Is("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Is("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class qm{constructor(S,R,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function zm(T){if(!T||!T.options)throw tl("App Configuration Object");if(!T.name)throw tl("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const B of S)if(!R[B])throw tl(B);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ee,installations:R,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Kc(T){return yu.apply(this,arguments)}function yu(){return(yu=(0,F.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(zi,{scope:_s}),T.swRegistration.update().catch(()=>{})}catch(R){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=R)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function nl(T,S){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,F.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Kc(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function rl(T,S){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,F.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=ys)})).apply(this,arguments)}function wu(){return(wu=(0,F.Z)(function*(T,S){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield rl(T,S?.vapidKey),yield nl(T,S?.serviceWorkerRegistration),gu(T)})).apply(this,arguments)}function Qc(T,S,R){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,F.Z)(function*(T,S,R){const B=Xc(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:R[Ya],message_name:R[au],message_time:R[Hc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xc(T){switch(T){case vs.NOTIFICATION_CLICKED:return"notification_open";case vs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Do(){return(Do=(0,F.Z)(function*(T,S){const R=S.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===vs.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(bo(R)):T.onMessageHandler.next(bo(R)));const B=R.data;To(B)&&"1"===B[Sp]&&(yield Qc(T,R.messageType,B))})).apply(this,arguments)}const So="@firebase/messaging",or=T=>{const S=new qm(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Ih(T,S){return Do.apply(this,arguments)}(S,R)),S},oi=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:B=>function vu(T,S){return wu.apply(this,arguments)}(S,B)}};function Ch(){return ed.apply(this,arguments)}function ed(){return(ed=(0,F.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wn(){(0,ue._registerComponent)(new pe.wA("messaging",or,"PUBLIC")),(0,ue._registerComponent)(new pe.wA("messaging-internal",oi,"PRIVATE")),(0,ue.registerVersion)(So,"0.9.16"),(0,ue.registerVersion)(So,"0.9.16","esm2017")}();const ha="analytics",Dh="firebase_id",Ao="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cu="https://www.googletagmanager.com/gtag/js",Nn=new ce.Yd("@firebase/analytics");function bu(T){return Promise.all(T.map(S=>S.catch(R=>R)))}function Tu(T,S){const R=document.createElement("script");R.src=`${Cu}?l=${T}&id=${S}`,R.async=!0,document.head.appendChild(R)}function Pp(T,S,R,B,ee,de){return xo.apply(this,arguments)}function xo(){return(xo=(0,F.Z)(function*(T,S,R,B,ee,de){const xe=B[ee];try{if(xe)yield S[xe];else{const ft=(yield bu(R)).find(It=>It.measurementId===ee);ft&&(yield S[ft.appId])}}catch($e){Nn.error($e)}T("config",ee,de)})).apply(this,arguments)}function fa(T,S,R,B,ee){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,F.Z)(function*(T,S,R,B,ee){try{let de=[];if(ee&&ee.send_to){let xe=ee.send_to;Array.isArray(xe)||(xe=[xe]);const $e=yield bu(R);for(const ft of xe){const It=$e.find(pt=>pt.measurementId===ft),Nt=It&&S[It.appId];if(!Nt){de=[];break}de.push(Nt)}}0===de.length&&(de=Object.values(S)),yield Promise.all(de),T("event",B,ee||{})}catch(de){Nn.error(de)}})).apply(this,arguments)}function Ah(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(Cu))return S;return null}const gr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),al=new class Ki{constructor(S={},R=1e3){this.throttleMetadata=S,this.intervalMillis=R}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,R){this.throttleMetadata[S]=R}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Mh(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function ll(T){return rd.apply(this,arguments)}function rd(){return(rd=(0,F.Z)(function*(T){var S;const{appId:R,apiKey:B}=T,ee={method:"GET",headers:Mh(B)},de=Ao.replace("{app-id}",R),xe=yield fetch(de,ee);if(200!==xe.status&&304!==xe.status){let $e="";try{const ft=yield xe.json();null!==(S=ft.error)&&void 0!==S&&S.message&&($e=ft.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:$e})}return xe.json()})).apply(this,arguments)}function Un(T){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,F.Z)(function*(T,S=al,R){const{appId:B,apiKey:ee,measurementId:de}=T.options;if(!B)throw gr.create("no-app-id");if(!ee){if(de)return{measurementId:de,appId:B};throw gr.create("no-api-key")}const xe=S.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new xu;return setTimeout((0,F.Z)(function*(){$e.abort()}),void 0!==R?R:6e4),Su({appId:B,apiKey:ee,measurementId:de},xe,$e,S)})).apply(this,arguments)}function Su(T,S,R){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,F.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:R},B,ee=al){var de,xe;const{appId:$e,measurementId:ft}=T;try{yield ul(B,S)}catch(It){if(ft)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${null===(de=It)||void 0===de?void 0:de.message}]`),{appId:$e,measurementId:ft};throw It}try{const It=yield ll(T);return ee.deleteThrottleMetadata($e),It}catch(It){const Nt=It;if(!Au(Nt)){if(ee.deleteThrottleMetadata($e),ft)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${Nt?.message}]`),{appId:$e,measurementId:ft};throw It}const pt=503===Number(null===(xe=Nt?.customData)||void 0===xe?void 0:xe.httpStatus)?(0,oe.$s)(R,ee.intervalMillis,30):(0,oe.$s)(R,ee.intervalMillis),Sn={throttleEndTimeMillis:Date.now()+pt,backoffCount:R+1};return ee.setThrottleMetadata($e,Sn),Nn.debug(`Calling attemptFetch again in ${pt} millis`),Su(T,Sn,B,ee)}})).apply(this,arguments)}function ul(T,S){return new Promise((R,B)=>{const ee=Math.max(S-Date.now(),0),de=setTimeout(R,ee);T.addEventListener(()=>{clearTimeout(de),B(gr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Au(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class xu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let eo,dl;function to(){return(to=(0,F.Z)(function*(T,S,R,B,ee){if(ee&&ee.global)T("event",R,B);else{const de=yield S;T("event",R,Object.assign(Object.assign({},B),{send_to:de}))}})).apply(this,arguments)}function Po(T){dl=T}function sd(T){eo=T}function bs(){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,F.Z)(function*(){var T;if(!(0,oe.hl)())return Nn.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(S){return Nn.warn(gr.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function ma(){return(ma=(0,F.Z)(function*(T,S,R,B,ee,de,xe){var $e;const ft=Un(T);ft.then(br=>{R[br.measurementId]=br.appId,T.options.measurementId&&br.measurementId!==T.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${br.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(br=>Nn.error(br)),S.push(ft);const It=bs().then(br=>{if(br)return B.getId()}),[Nt,pt]=yield Promise.all([ft,It]);Ah()||Tu(de,Nt.measurementId),dl&&(ee("consent","default",dl),Po(void 0)),ee("js",new Date);const Sn=null!==($e=xe?.config)&&void 0!==$e?$e:{};return Sn.origin="firebase",Sn.update=!0,null!=pt&&(Sn[Dh]=pt),ee("config",Nt.measurementId,Sn),eo&&(ee("set",eo),sd(void 0)),Nt.measurementId})).apply(this,arguments)}class Pu{constructor(S){this.app=S}_delete(){return delete ai[this.app.options.appId],Promise.resolve()}}let ai={},no=[];const _a={};let va,ko,ya="dataLayer",hl=!1;function $v(T,S,R){!function Km(){const T=[];if((0,oe.ru)()&&T.push("This is a browser extension environment."),(0,oe.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((B,ee)=>`(${ee+1}) ${B}`).join(" "),R=gr.create("invalid-analytics-context",{errorInfo:S});Nn.warn(R.message)}}();const B=T.options.appId;if(!B)throw gr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw gr.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ai[B])throw gr.create("already-exists",{id:B});if(!hl){!function Sh(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(ya);const{wrappedGtag:de,gtagCore:xe}=function il(T,S,R,B,ee){let de=function(...xe){window[B].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(de=window[ee]),window[ee]=function Du(T,S,R,B){function de(){return(de=(0,F.Z)(function*(xe,$e,ft){try{"event"===xe?yield fa(T,S,R,$e,ft):"config"===xe?yield Pp(T,S,R,B,$e,ft):"consent"===xe?T("consent","update",ft):T("set",$e)}catch(It){Nn.error(It)}})).apply(this,arguments)}return function ee(xe,$e,ft){return de.apply(this,arguments)}}(de,T,S,R),{gtagCore:de,wrappedGtag:window[ee]}}(ai,no,_a,ya,"gtag");ko=de,va=xe,hl=!0}return ai[B]=function ga(T,S,R,B,ee,de,xe){return ma.apply(this,arguments)}(T,no,_a,S,va,ya,R),new Pu(T)}function Wv(){return kp.apply(this,arguments)}function kp(){return(kp=(0,F.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const Ts="@firebase/analytics";!function $r(){(0,ue._registerComponent)(new pe.wA(ha,(S,{options:R})=>$v(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ue._registerComponent)(new pe.wA("analytics-internal",function T(S){try{const R=S.getProvider(ha).getImmediate();return{logEvent:(B,ee,de)=>function Ou(T,S,R,B){T=(0,oe.m9)(T),function Rh(T,S,R,B,ee){return to.apply(this,arguments)}(ko,ai[T.app.options.appId],S,R,B).catch(ee=>Nn.error(ee))}(R,B,ee,de)}}catch(R){throw gr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ue.registerVersion)(Ts,"0.8.0"),(0,ue.registerVersion)(Ts,"0.8.0","esm2017")}();var Zi=V(4408),Yi=V(7565);const ad=new class Qi extends Yi.v{}(class od extends Zi.o{constructor(S,R){super(S,R),this.scheduler=S,this.work=R}schedule(S,R=0){return R>0?super.schedule(S,R):(this.delay=R,this.state=S,this.scheduler.flush(this),this)}execute(S,R){return R>0||this.closed?super.execute(S,R):this._execute(S,R)}requestAsyncId(S,R,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(S,R,B):S.flush(this)}});var Ph=V(4986),ld=V(8505),Ea=V(5363),ud=V(9468);const vi=new f.GfV("7.4.1"),Ia="__angularfire_symbol__analyticsIsSupportedValue",wi="__angularfire_symbol__analyticsIsSupported",pl="__angularfire_symbol__remoteConfigIsSupportedValue",Oo="__angularfire_symbol__remoteConfigIsSupported",kh="__angularfire_symbol__messagingIsSupportedValue",Lu="__angularfire_symbol__messagingIsSupported";function ml(T,S,R){if(S){if(1===S.length)return S[0];const de=S.filter(xe=>xe.app===R);if(1===de.length)return de[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[wi]||(globalThis[wi]=Wv().then(T=>globalThis[Ia]=T).catch(()=>globalThis[Ia]=!1)),globalThis[Lu]||(globalThis[Lu]=Ch().then(T=>globalThis[kh]=T).catch(()=>globalThis[kh]=!1)),globalThis[Oo]||(globalThis[Oo]=ou().then(T=>globalThis[pl]=T).catch(()=>globalThis[pl]=!1));const Ca=(T,S)=>{const R=S?[S]:(0,ne.C6)(),B=[];return R.forEach(ee=>{ee.container.getProvider(T).instances.forEach(xe=>{B.includes(xe)||B.push(xe)})}),B};function _l(){}class Ji{constructor(S,R=ad){this.zone=S,this.delegate=R}now(){return this.delegate.now()}schedule(S,R,B){const ee=this.zone;return this.delegate.schedule(function(xe){ee.runGuarded(()=>{S.apply(this,[xe])})},R,B)}}class cd{constructor(S){this.zone=S,this.task=null}call(S,R){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_l,{},_l,_l)),R.pipe((0,ld.b)({next:B,complete:B,error:B})).subscribe(S).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vu=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ji(Zone.current)),this.insideAngular=R.run(()=>new Ji(Zone.current,Ph.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(f.LFG(f.R0b))},T.\u0275prov=f.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function ro(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Fh(T){return T.pipe((0,Ea.Q)(ro().outsideAngular))}function io(T){return ro(),function Lh(T){return function(R){return(R=R.lift(new cd(T.ngZone))).pipe((0,ud.R)(T.outsideAngular),(0,Ea.Q)(T.insideAngular))}}(ro())(T)}},2090:(ut,Se,V)=>{V.d(Se,{$s:()=>gs,BH:()=>Ue,DV:()=>Ot,Dv:()=>pi,G6:()=>He,GJ:()=>tn,L:()=>ge,LL:()=>Le,Mn:()=>Te,Pz:()=>jt,Sg:()=>Re,UG:()=>ve,UI:()=>ia,US:()=>pe,Wj:()=>Wn,Yr:()=>Be,ZB:()=>z,ZR:()=>ie,b$:()=>ot,cI:()=>zt,d:()=>Me,dS:()=>ht,eu:()=>ye,g5:()=>F,gK:()=>ii,gQ:()=>fi,h$:()=>ce,hl:()=>H,hu:()=>ne,jU:()=>me,lb:()=>mn,m9:()=>nn,ne:()=>sa,p$:()=>$,pd:()=>ni,r3:()=>Vr,ru:()=>tt,tV:()=>_e,uI:()=>nt,ug:()=>at,vZ:()=>ei,w1:()=>Ee,w9:()=>en,xO:()=>Gs,xb:()=>un,z$:()=>Ie,zI:()=>Q,zd:()=>$i});const ne=function(Y,G){if(!Y)throw F(G)},F=function(Y){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Y)},ue=function(Y){const G=[];let j=0;for(let q=0;q<Y.length;q++){let Z=Y.charCodeAt(q);Z<128?G[j++]=Z:Z<2048?(G[j++]=Z>>6|192,G[j++]=63&Z|128):55296==(64512&Z)&&q+1<Y.length&&56320==(64512&Y.charCodeAt(q+1))?(Z=65536+((1023&Z)<<10)+(1023&Y.charCodeAt(++q)),G[j++]=Z>>18|240,G[j++]=Z>>12&63|128,G[j++]=Z>>6&63|128,G[j++]=63&Z|128):(G[j++]=Z>>12|224,G[j++]=Z>>6&63|128,G[j++]=63&Z|128)}return G},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,G){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let Z=0;Z<Y.length;Z+=3){const De=Y[Z],je=Z+1<Y.length,lt=je?Y[Z+1]:0,_n=Z+2<Y.length,sn=_n?Y[Z+2]:0;let Ft=(15&lt)<<2|sn>>6,In=63&sn;_n||(In=64,je||(Ft=64)),q.push(j[De>>2],j[(3&De)<<4|lt>>4],j[Ft],j[In])}return q.join("")},encodeString(Y,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(Y):this.encodeByteArray(ue(Y),G)},decodeString(Y,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(Y):function(Y){const G=[];let j=0,q=0;for(;j<Y.length;){const Z=Y[j++];if(Z<128)G[q++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const De=Y[j++];G[q++]=String.fromCharCode((31&Z)<<6|63&De)}else if(Z>239&&Z<365){const _n=((7&Z)<<18|(63&Y[j++])<<12|(63&Y[j++])<<6|63&Y[j++])-65536;G[q++]=String.fromCharCode(55296+(_n>>10)),G[q++]=String.fromCharCode(56320+(1023&_n))}else{const De=Y[j++],je=Y[j++];G[q++]=String.fromCharCode((15&Z)<<12|(63&De)<<6|63&je)}}return G.join("")}(this.decodeStringToByteArray(Y,G))},decodeStringToByteArray(Y,G){this.init_();const j=G?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let Z=0;Z<Y.length;){const De=j[Y.charAt(Z++)],lt=Z<Y.length?j[Y.charAt(Z)]:0;++Z;const sn=Z<Y.length?j[Y.charAt(Z)]:64;++Z;const Ht=Z<Y.length?j[Y.charAt(Z)]:64;if(++Z,null==De||null==lt||null==sn||null==Ht)throw Error();q.push(De<<2|lt>>4),64!==sn&&(q.push(lt<<4&240|sn>>2),64!==Ht&&q.push(sn<<6&192|Ht))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},ce=function(Y){const G=ue(Y);return pe.encodeByteArray(G,!0)},ge=function(Y){return ce(Y).replace(/\./g,"")},_e=function(Y){try{return pe.decodeString(Y,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function $(Y){return z(void 0,Y)}function z(Y,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return G}for(const j in G)!G.hasOwnProperty(j)||!X(j)||(Y[j]=z(Y[j],G[j]));return Y}function X(Y){return"__proto__"!==Y}class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,j)=>{this.resolve=G,this.reject=j})}wrapCallback(G){return(j,q)=>{j?this.reject(j):this.resolve(q),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(j):G(j,q))}}}function Re(Y,G){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=G||"demo-project",Z=Y.iat||0,De=Y.sub||Y.user_id;if(!De)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const je=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:Z,exp:Z+3600,auth_time:Z,sub:De,user_id:De,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(je)),""].join(".")}function Ie(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function me(){return"object"==typeof self&&self.self===self}function tt(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function ot(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Ie().indexOf("Electron/")>=0}function Ee(){const Y=Ie();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function Te(){return Ie().indexOf("MSAppHost/")>=0}function Be(){return!1}function He(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H(){return"object"==typeof indexedDB}function ye(){return new Promise((Y,G)=>{try{let j=!0;const q="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(q);Z.onsuccess=()=>{Z.result.close(),j||self.indexedDB.deleteDatabase(q),Y(!0)},Z.onupgradeneeded=()=>{j=!1},Z.onerror=()=>{var De;G((null===(De=Z.error)||void 0===De?void 0:De.message)||"")}}catch(j){G(j)}})}function Q(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ie extends Error{constructor(G,j,q){super(j),this.code=G,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(G,j,q){this.service=G,this.serviceName=j,this.errors=q}create(G,...j){const q=j[0]||{},Z=`${this.service}/${G}`,De=this.errors[G],je=De?function Oe(Y,G){return Y.replace(dt,(j,q)=>{const Z=G[q];return null!=Z?String(Z):`<${q}?>`})}(De,q):"Error";return new ie(Z,`${this.serviceName}: ${je} (${Z}).`,q)}}const dt=/\{\$([^}]+)}/g;function zt(Y){return JSON.parse(Y)}function jt(Y){return JSON.stringify(Y)}const Ye=function(Y){let G={},j={},q={},Z="";try{const De=Y.split(".");G=zt(_e(De[0])||""),j=zt(_e(De[1])||""),Z=De[2],q=j.d||{},delete j.d}catch{}return{header:G,claims:j,data:q,signature:Z}},en=function(Y){const j=Ye(Y).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},tn=function(Y){const G=Ye(Y).claims;return"object"==typeof G&&!0===G.admin};function Vr(Y,G){return Object.prototype.hasOwnProperty.call(Y,G)}function Ot(Y,G){if(Object.prototype.hasOwnProperty.call(Y,G))return Y[G]}function un(Y){for(const G in Y)if(Object.prototype.hasOwnProperty.call(Y,G))return!1;return!0}function ia(Y,G,j){const q={};for(const Z in Y)Object.prototype.hasOwnProperty.call(Y,Z)&&(q[Z]=G.call(j,Y[Z],Z,Y));return q}function ei(Y,G){if(Y===G)return!0;const j=Object.keys(Y),q=Object.keys(G);for(const Z of j){if(!q.includes(Z))return!1;const De=Y[Z],je=G[Z];if(kr(De)&&kr(je)){if(!ei(De,je))return!1}else if(De!==je)return!1}for(const Z of q)if(!j.includes(Z))return!1;return!0}function kr(Y){return null!==Y&&"object"==typeof Y}function Gs(Y){const G=[];for(const[j,q]of Object.entries(Y))Array.isArray(q)?q.forEach(Z=>{G.push(encodeURIComponent(j)+"="+encodeURIComponent(Z))}):G.push(encodeURIComponent(j)+"="+encodeURIComponent(q));return G.length?"&"+G.join("&"):""}function $i(Y){const G={};return Y.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[Z,De]=q.split("=");G[decodeURIComponent(Z)]=decodeURIComponent(De)}}),G}function ni(Y){const G=Y.indexOf("?");if(!G)return"";const j=Y.indexOf("#",G);return Y.substring(G,j>0?j:void 0)}class fi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,j){j||(j=0);const q=this.W_;if("string"==typeof G)for(let Ht=0;Ht<16;Ht++)q[Ht]=G.charCodeAt(j)<<24|G.charCodeAt(j+1)<<16|G.charCodeAt(j+2)<<8|G.charCodeAt(j+3),j+=4;else for(let Ht=0;Ht<16;Ht++)q[Ht]=G[j]<<24|G[j+1]<<16|G[j+2]<<8|G[j+3],j+=4;for(let Ht=16;Ht<80;Ht++){const Ft=q[Ht-3]^q[Ht-8]^q[Ht-14]^q[Ht-16];q[Ht]=4294967295&(Ft<<1|Ft>>>31)}let sn,rr,Z=this.chain_[0],De=this.chain_[1],je=this.chain_[2],lt=this.chain_[3],_n=this.chain_[4];for(let Ht=0;Ht<80;Ht++){Ht<40?Ht<20?(sn=lt^De&(je^lt),rr=1518500249):(sn=De^je^lt,rr=1859775393):Ht<60?(sn=De&je|lt&(De|je),rr=2400959708):(sn=De^je^lt,rr=3395469782);const Ft=(Z<<5|Z>>>27)+sn+_n+rr+q[Ht]&4294967295;_n=lt,lt=je,je=4294967295&(De<<30|De>>>2),De=Z,Z=Ft}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+De&4294967295,this.chain_[2]=this.chain_[2]+je&4294967295,this.chain_[3]=this.chain_[3]+lt&4294967295,this.chain_[4]=this.chain_[4]+_n&4294967295}update(G,j){if(null==G)return;void 0===j&&(j=G.length);const q=j-this.blockSize;let Z=0;const De=this.buf_;let je=this.inbuf_;for(;Z<j;){if(0===je)for(;Z<=q;)this.compress_(G,Z),Z+=this.blockSize;if("string"==typeof G){for(;Z<j;)if(De[je]=G.charCodeAt(Z),++je,++Z,je===this.blockSize){this.compress_(De),je=0;break}}else for(;Z<j;)if(De[je]=G[Z],++je,++Z,je===this.blockSize){this.compress_(De),je=0;break}}this.inbuf_=je,this.total_+=j}digest(){const G=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&j,j/=256;this.compress_(this.buf_);let q=0;for(let Z=0;Z<5;Z++)for(let De=24;De>=0;De-=8)G[q]=this.chain_[Z]>>De&255,++q;return G}}function sa(Y,G){const j=new Xe(Y,G);return j.subscribe.bind(j)}class Xe{constructor(G,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{G(this)}).catch(q=>{this.error(q)})}next(G){this.forEachObserver(j=>{j.next(G)})}error(G){this.forEachObserver(j=>{j.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,j,q){let Z;if(void 0===G&&void 0===j&&void 0===q)throw new Error("Missing Observer.");Z=function ps(Y,G){if("object"!=typeof Y||null===Y)return!1;for(const j of G)if(j in Y&&"function"==typeof Y[j])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:j,complete:q},void 0===Z.next&&(Z.next=Fn),void 0===Z.error&&(Z.error=Fn),void 0===Z.complete&&(Z.complete=Fn);const De=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),De}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,G)}sendOne(G,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{j(this.observers[G])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fn(){}const pi=function(Y,G,j,q){let Z;if(q<G?Z="at least "+G:q>j&&(Z=0===j?"none":"no more than "+j),Z)throw new Error(Y+" failed: Was called with "+q+(1===q?" argument.":" arguments.")+" Expects "+Z+".")};function ii(Y,G){return`${Y} failed: ${G} argument `}function Wn(Y,G,j,q){if((!q||j)&&"function"!=typeof j)throw new Error(ii(Y,G)+"must be a valid function.")}function mn(Y,G,j,q){if((!q||j)&&("object"!=typeof j||null===j))throw new Error(ii(Y,G)+"must be a valid context object.")}const ht=function(Y){const G=[];let j=0;for(let q=0;q<Y.length;q++){let Z=Y.charCodeAt(q);if(Z>=55296&&Z<=56319){const De=Z-55296;q++,ne(q<Y.length,"Surrogate pair missing trail surrogate."),Z=65536+(De<<10)+(Y.charCodeAt(q)-56320)}Z<128?G[j++]=Z:Z<2048?(G[j++]=Z>>6|192,G[j++]=63&Z|128):Z<65536?(G[j++]=Z>>12|224,G[j++]=Z>>6&63|128,G[j++]=63&Z|128):(G[j++]=Z>>18|240,G[j++]=Z>>12&63|128,G[j++]=Z>>6&63|128,G[j++]=63&Z|128)}return G},at=function(Y){let G=0;for(let j=0;j<Y.length;j++){const q=Y.charCodeAt(j);q<128?G++:q<2048?G+=2:q>=55296&&q<=56319?(G+=4,j++):G+=3}return G};function gs(Y,G=1e3,j=2){const q=G*Math.pow(j,Y),Z=Math.round(.5*q*(Math.random()-.5)*2);return Math.min(144e5,q+Z)}function nn(Y){return Y&&Y._delegate?Y._delegate:Y}},5311:(ut,Se,V)=>{var f=V(4650);let ne=null;function F(){return ne}const ce=new f.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function _e(){return(0,f.LFG)(z)}()},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let z=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ue(){return new z((0,f.LFG)(ce))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nt(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(tt)},providedIn:"root"}),n})();const me=new f.OlP("appBaseHref");let tt=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const u=this.prepareExternalUrl(i+nt(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){const u=this.prepareExternalUrl(i+nt(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ge),f.LFG(me,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ot=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let u=this.prepareExternalUrl(i+nt(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){let u=this.prepareExternalUrl(i+nt(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ge),f.LFG(me,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(Be(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nt(r))}normalize(t){return n.stripTrailingSlash(function Te(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=nt,n.joinWithSlash=Re,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ee(){return new Me((0,f.LFG)(ve))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}const He={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var H=(()=>((H=H||{})[H.Decimal=0]="Decimal",H[H.Percent=1]="Percent",H[H.Currency=2]="Currency",H[H.Scientific=3]="Scientific",H))(),ie=(()=>((ie=ie||{})[ie.Decimal=0]="Decimal",ie[ie.Group=1]="Group",ie[ie.List=2]="List",ie[ie.PercentSign=3]="PercentSign",ie[ie.PlusSign=4]="PlusSign",ie[ie.MinusSign=5]="MinusSign",ie[ie.Exponential=6]="Exponential",ie[ie.SuperscriptingExponent=7]="SuperscriptingExponent",ie[ie.PerMille=8]="PerMille",ie[ie.Infinity=9]="Infinity",ie[ie.NaN=10]="NaN",ie[ie.TimeSeparator=11]="TimeSeparator",ie[ie.CurrencyDecimal=12]="CurrencyDecimal",ie[ie.CurrencyGroup=13]="CurrencyGroup",ie))();function Ot(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ie.CurrencyDecimal)return t[f.wAp.NumberSymbols][ie.Decimal];if(e===ie.CurrencyGroup)return t[f.wAp.NumberSymbols][ie.Group]}return r}const Br=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Ws(n,e,t,r,i){const u=function bn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],o=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],d=u[0],g=u[1]||"";t.posPre=d.substring(0,d.indexOf("#"));for(let C=0;C<g.length;C++){const D=g.charAt(C);"0"===D?t.minFrac=t.maxFrac=C+1:"#"===D?t.maxFrac=C+1:t.posSuf+=D}const y=d.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,o){const C=i.length-t.posPre.length-t.posSuf.length,D=o.indexOf("#");t.negPre=o.substring(0,D).replace(/'/g,""),t.negSuf=o.slice(D+C).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function un(n,e){return(0,f.cg1)(n)[f.wAp.NumberFormats][e]}(e,H.Currency),Ot(e,ie.MinusSign));return u.minFrac=function pi(n){let e;const t=He[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),u.maxFrac=u.minFrac,function Cn(n,e,t,r,i,o,u=!1){let d="",g=!1;if(isFinite(n)){let y=function kc(n){let r,i,o,u,d,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;"0"===e.charAt(o);o++);if(o===(d=e.length))r=[0],i=1;else{for(d--;"0"===e.charAt(d);)d--;for(i-=o,r=[],u=0;o<=d;o++,u++)r[u]=Number(e.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(y=function wo(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let C=e.minInt,D=e.minFrac,M=e.maxFrac;if(o){const Ge=o.match(Br);if(null===Ge)throw new Error(`${o} is not a valid digit info`);const qe=Ge[1],We=Ge[3],_t=Ge[5];null!=qe&&(C=Kn(qe)),null!=We&&(D=Kn(We)),null!=_t?M=Kn(_t):null!=We&&D>M&&(M=D)}!function Wi(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let u=o+n.integerLen,d=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let D=u;D<r.length;D++)r[D]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=o+1),r[0]=0;for(let D=1;D<u;D++)r[D]=0}if(d>=5)if(u-1<0){for(let D=0;D>u;D--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,o);i++)r.push(0);let g=0!==o;const y=e+n.integerLen,C=r.reduceRight(function(D,M,O,U){return U[O]=(M+=D)<10?M:M-10,g&&(0===U[O]&&O>=y?U.pop():g=!1),M>=10?1:0},0);C&&(r.unshift(C),n.integerLen++)}(y,D,M);let O=y.digits,U=y.integerLen;const J=y.exponent;let se=[];for(g=O.every(Ge=>!Ge);U<C;U++)O.unshift(0);for(;U<0;U++)O.unshift(0);U>0?se=O.splice(U,O.length):(se=O,O=[0]);const Fe=[];for(O.length>=e.lgSize&&Fe.unshift(O.splice(-e.lgSize,O.length).join(""));O.length>e.gSize;)Fe.unshift(O.splice(-e.gSize,O.length).join(""));O.length&&Fe.unshift(O.join("")),d=Fe.join(Ot(t,r)),se.length&&(d+=Ot(t,i)+se.join("")),J&&(d+=Ot(t,ie.Exponential)+"+"+J)}else d=Ot(t,ie.Infinity);return d=n<0&&!g?e.negPre+d+e.negSuf:e.posPre+d+e.posSuf,d}(n,u,e,ie.CurrencyGroup,ie.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}function Kn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class Ka{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Io=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ka(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===o?void 0:o);else if(null!==o){const d=r.get(o);r.move(d,u),Ks(d,i)}});for(let i=0,o=r.length;i<o;i++){const d=r.get(i).context;d.index=i,d.count=o,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ks(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ks(n,e){n.context.$implicit=e.item}let Vn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Lc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Lc{constructor(){this.$implicit=null,this.ngIf=null}}function pr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Qs=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,u){if(!function Ya(n){return!(null==n||""===n||n!=n)}(t))return null;u=u||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let d=r||this._defaultCurrencyCode;"code"!==i&&(d="symbol"===i||"symbol-narrow"===i?function ps(n,e,t="en"){const r=function ti(n){return(0,f.cg1)(n)[f.wAp.Currencies]}(t)[n]||He[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(d,"symbol"===i?"wide":"narrow",u):i);try{return Ws(function au(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),u,d,r,o)}catch(g){throw function sr(n,e){return new f.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(f.EJc,16))},n.\u0275pipe=f.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let oa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Cr(n){return"server"===n}let lu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Mp((0,f.LFG)(ce),window)}),n})();class Mp{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=_i(this.window.history)||_i(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function _i(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Do extends class Ih extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){ne||(ne=n)}(new Do)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Eu(){return So=So||document.querySelector("base"),So?So.getAttribute("href"):null}();return null==t?null:function oi(n){or=or||document.createElement("a"),or.setAttribute("href",n);const e=or.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){So=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function iu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let or,So=null;const wn=new f.OlP("TRANSITION_ID"),ed=[{provide:f.ip1,useFactory:function Ch(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[wn,ce,f.zs3],multi:!0}];let td=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=new f.OlP("EventManagerPlugins");let bh=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const u=i[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Iu),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class nd{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ca=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),da=(()=>{class n extends ca{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const u=this._doc.createElement("style");u.textContent=o,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Th),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Th))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Th(n){F().remove(n)}const ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Dh=/%COMP%/g;function Tu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Tu(n,i,t):(i=i.replace(Dh,n),t.push(i))}return t}function Sh(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new fa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ah(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new xh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Tu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bh),f.LFG(da),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class fa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ha[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(il(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(il(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=ha[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ha[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Sh(r)):this.eventManager.addEventListener(e,t,Sh(r))}}function il(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ah extends fa{constructor(e,t,r,i){super(e),this.component=r;const o=Tu(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function Nn(n){return"_ngcontent-%COMP%".replace(Dh,n)}(i+"-"+r.id),this.hostAttr=function bu(n){return"_nghost-%COMP%".replace(Dh,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class xh extends fa{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Tu(i.id,i.styles,[]);for(let u=0;u<o.length;u++){const d=document.createElement("style");d.textContent=o[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gr=(()=>{class n extends nd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const sl=["alt","control","meta","shift"],ol={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ki={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let al=(()=>{class n extends nd{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),u=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let u="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),u="code."),sl.forEach(y=>{const C=r.indexOf(y);C>-1&&(r.splice(C,1),u+=y+".")}),u+=o,0!=r.length||0===o.length)return null;const g={};return g.domEventName=i,g.fullKey=u,g}static matchEventFullKeyCode(t,r){let i=ol[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),sl.forEach(u=>{u!==i&&(0,Ki[u])(t)&&(o+=u+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const xu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Su(){Do.makeCurrent()},multi:!0},{provide:ce,useFactory:function ul(){return(0,f.RDi)(document),document},deps:[]}]),eo=new f.OlP(""),Rh=[{provide:f.rWj,useClass:class Np{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let o=i.length,u=!1;const d=function(g){u=u||g,o--,0==o&&r(u)};i.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],to=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Ro(){return new f.qLn},deps:[]},{provide:Iu,useClass:gr,multi:!0,deps:[ce,f.R0b,f.Lbi]},{provide:Iu,useClass:al,multi:!0,deps:[ce]},{provide:xo,useClass:xo,deps:[bh,da,f.AFp]},{provide:f.FYo,useExisting:xo},{provide:ca,useExisting:da},{provide:da,useClass:da,deps:[ce]},{provide:bh,useClass:bh,deps:[Iu,f.R0b]},{provide:class la{},useClass:td,deps:[]},[]];let Mu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:wn,useExisting:f.AFp},ed]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(eo,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...to,...Rh],imports:[oa,f.hGG]}),n})(),Cs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function pa(){return new Cs((0,f.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let fl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):f.LFG(Qm),r},providedIn:"root"}),n})(),Qm=(()=>{class n extends fl{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case f.q3G.NONE:return r;case f.q3G.HTML:return(0,f.qzn)(r,"HTML")?(0,f.z3N)(r):(0,f.EiD)(this._doc,String(r)).toString();case f.q3G.STYLE:return(0,f.qzn)(r,"Style")?(0,f.z3N)(r):r;case f.q3G.SCRIPT:if((0,f.qzn)(r,"Script"))return(0,f.z3N)(r);throw new Error("unsafe value used in a script context");case f.q3G.URL:return(0,f.qzn)(r,"URL")?(0,f.z3N)(r):(0,f.mCW)(String(r));case f.q3G.RESOURCE_URL:if((0,f.qzn)(r,"ResourceURL"))return(0,f.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,f.JVY)(t)}bypassSecurityTrustStyle(t){return(0,f.L6k)(t)}bypassSecurityTrustScript(t){return(0,f.eBb)(t)}bypassSecurityTrustUrl(t){return(0,f.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,f.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ym(n){return new Qm(n.get(ce))}(f.LFG(f.zs3)),r},providedIn:"root"}),n})();class Ou{}const Ts="*";function Fu(n,e){return{type:7,name:n,definitions:e,options:{}}}function $r(n,e=null){return{type:4,styles:e,timings:n}}function od(n,e=null){return{type:2,steps:n,options:e}}function Yi(n){return{type:6,styles:n,offset:null}}function Qi(n,e,t){return{type:0,name:n,styles:e,options:t}}function Op(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Ia(n){Promise.resolve().then(n)}class wi{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ia(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class pl{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?Ia(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==o&&this._onFinish()}),u.onDestroy(()=>{++r==o&&this._onDestroy()}),u.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Lu(n){return new f.vHH(3e3,!1)}function Da(){return typeof window<"u"&&typeof window.document<"u"}function Xi(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Gr(n){switch(n.length){case 0:return new wi;case 1:return n[0];default:return new pl(n)}}function Lo(n,e,t,r,i=new Map,o=new Map){const u=[],d=[];let g=-1,y=null;if(r.forEach(C=>{const D=C.get("offset"),M=D==g,O=M&&y||new Map;C.forEach((U,J)=>{let se=J,Fe=U;if("offset"!==J)switch(se=e.normalizePropertyName(se,u),Fe){case"!":Fe=i.get(J);break;case Ts:Fe=o.get(J);break;default:Fe=e.normalizeStyleValue(J,se,Fe,u)}O.set(se,Fe)}),M||d.push(O),y=O,g=D}),u.length)throw function ee(n){return new f.vHH(3502,!1)}();return d}function Ss(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Uu(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Uu(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Uu(t,"destroy",n)))}}function Uu(n,e,t){const o=Vh(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(o._data=u),o}function Vh(n,e,t,r,i="",o=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!u}}function Fi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function e_(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Uh=(n,e)=>!1,hd=(n,e,t)=>[],Bu=null;function Lp(n){const e=n.parentNode||n.host;return e===Bu?null:e}(Xi()||typeof Element<"u")&&(Da()?(Bu=(()=>document.documentElement)(),Uh=(n,e)=>{for(;e;){if(e===n)return!0;e=Lp(e)}return!1}):Uh=(n,e)=>n.contains(e),hd=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Sa=null,qv=!1;const vl=Uh,Bh=hd;let n_=(()=>{class n{validateStyleProperty(t){return function Vp(n){Sa||(Sa=function t_(){return typeof document<"u"?document.body:null}()||{},qv=!!Sa.style&&"WebkitAppearance"in Sa.style);let e=!0;return Sa.style&&!function iC(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Sa.style,!e&&qv&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Sa.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return vl(t,r)}getParentElement(t){return Lp(t)}query(t,r,i){return Bh(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,u,d=[],g){return new wi(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Up=(()=>{class n{}return n.NOOP=new n_,n})();const jh="ng-enter",pd="ng-leave",gd="ng-trigger",es=".ng-trigger",r_="ng-animating",md=".ng-animating";function Aa(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Hh(parseFloat(e[1]),e[2])}function Hh(n,e){return"s"===e?1e3*n:n}function $h(n,e,t){return n.hasOwnProperty("duration")?n:function As(n,e,t){let i,o=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(Lu()),{duration:0,delay:0,easing:""};i=Hh(parseFloat(d[1]),d[2]);const g=d[3];null!=g&&(o=Hh(parseFloat(g),d[4]));const y=d[5];y&&(u=y)}else i=n;if(!t){let d=!1,g=e.length;i<0&&(e.push(function gl(){return new f.vHH(3100,!1)}()),d=!0),o<0&&(e.push(function Jm(){return new f.vHH(3101,!1)}()),d=!0),d&&e.splice(g,0,Lu())}return{duration:i,delay:o,easing:u}}(n,e,t)}function so(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function jp(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function xa(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function o_(n,e,t){return t?e+":"+t+";":""}function Kv(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=o_(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=o_(0,a_(t),n.style[t]));n.setAttribute("style",e)}function Fr(n,e,t){n.style&&(e.forEach((r,i)=>{const o=Gh(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),Xi()&&Kv(n))}function wl(n,e){n.style&&(e.forEach((t,r)=>{const i=Gh(r);n.style[i]=""}),Xi()&&Kv(n))}function _d(n){return Array.isArray(n)?1==n.length?n[0]:od(n):n}const $p=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ma(n){let e=[];if("string"==typeof n){let t;for(;t=$p.exec(n);)e.push(t[1]);$p.lastIndex=0}return e}function yd(n,e,t){const r=n.toString(),i=r.replace($p,(o,u)=>{let d=e[u];return null==d&&(t.push(function Xm(n){return new f.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function Li(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const El=/-+([a-z0-9])/g;function Gh(n){return n.replace(El,(...e)=>e[1].toUpperCase())}function a_(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ts(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function ml(n){return new f.vHH(3004,!1)}()}}function Zv(n,e){return window.getComputedStyle(n)[e]}function Qv(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Jv(n,e,t){if(":"==n[0]){const g=function vd(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function T(n){return new f.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Fp(n){return new f.vHH(3015,!1)}()),e;const i=r[1],o=r[2],u=r[3];e.push(qh(i,u));"<"==o[0]&&!("*"==i&&"*"==u)&&e.push(qh(u,i))}(r,t,e)):t.push(n),t}const Il=new Set(["true","1"]),wd=new Set(["false","0"]);function qh(n,e){const t=Il.has(n)||wd.has(n),r=Il.has(e)||wd.has(e);return(i,o)=>{let u="*"==n||n==i,d="*"==e||e==o;return!u&&t&&"boolean"==typeof i&&(u=i?Il.has(n):wd.has(n)),!d&&r&&"boolean"==typeof o&&(d=o?Il.has(e):wd.has(e)),u&&d}}const Yn=new RegExp("s*:selfs*,?","g");function Kh(n,e,t,r){return new Wp(n).build(e,t,r)}class Wp{constructor(e){this._driver=e}build(e,t,r){const i=new d_(t);return this._resetContextStyleTimingState(i),ts(this,_d(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function _l(){return new f.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const g=d,y=g.name;y.toString().split(/\s*,\s*/).forEach(C=>{g.name=C,o.push(this.visitState(g,t))}),g.name=y}else if(1==d.type){const g=this.visitTransition(d,t);r+=g.queryCount,i+=g.depCount,u.push(g)}else t.errors.push(function Ji(){return new f.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,u=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(g=>{Ma(g).forEach(y=>{u.hasOwnProperty(y)||o.add(y)})})}),o.size&&(Li(o.values()),t.errors.push(function cd(n,e){return new f.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ts(this,_d(e.animation),t);return{type:1,matchers:Qv(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Cl(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ts(this,r,t)),options:Cl(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(u=>{t.currentTime=r;const d=ts(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:o,options:Cl(e.options)}}visitAnimate(e,t){const r=function tw(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return h_($h(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=h_(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=$h(t,e);return h_(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Yi({});if(5==o.type)i=this.visitKeyframes(o,t);else{let u=e.styles,d=!1;if(!u){d=!0;const y={};r.easing&&(y.easing=r.easing),u=Yi(y)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(u,t);g.isEmptyStep=d,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===Ts?r.push(d):t.errors.push(new f.vHH(3002,!1)):r.push(jp(d));let o=!1,u=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(u=d.get("easing"),d.delete("easing")),!o))for(let g of d.values())if(g.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((d,g)=>{const y=t.collectedStyles.get(t.currentQuerySelector),C=y.get(g);let D=!0;C&&(o!=i&&o>=C.startTime&&i<=C.endTime&&(t.errors.push(function dd(n,e,t,r,i){return new f.vHH(3010,!1)}()),D=!1),o=C.startTime),D&&y.set(g,{startTime:o,endTime:i}),t.options&&function Hp(n,e,t){const r=e.params||{},i=Ma(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function Oh(n){return new f.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Ds(){return new f.vHH(3011,!1)}()),r;let o=0;const u=[];let d=!1,g=!1,y=0;const C=e.steps.map(Fe=>{const Ge=this._makeStyleAst(Fe,t);let qe=null!=Ge.offset?Ge.offset:function ew(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ge.styles),We=0;return null!=qe&&(o++,We=Ge.offset=qe),g=g||We<0||We>1,d=d||We<y,y=We,u.push(We),Ge});g&&t.errors.push(function Fh(){return new f.vHH(3012,!1)}()),d&&t.errors.push(function ba(){return new f.vHH(3200,!1)}());const D=e.steps.length;let M=0;o>0&&o<D?t.errors.push(function io(){return new f.vHH(3202,!1)}()):0==o&&(M=1/(D-1));const O=D-1,U=t.currentTime,J=t.currentAnimateTimings,se=J.duration;return C.forEach((Fe,Ge)=>{const qe=M>0?Ge==O?1:M*Ge:u[Ge],We=qe*se;t.currentTime=U+J.delay+We,J.duration=We,this._validateStyleAst(Fe,t),Fe.offset=qe,r.styles.push(Fe)}),r}visitReference(e,t){return{type:8,animation:ts(this,_d(e.animation),t),options:Cl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Cl(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Cl(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,u]=function Wu(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Yn,"")),n=n.replace(/@\*/g,es).replace(/@\w+/g,t=>es+"-"+t.slice(1)).replace(/:animating/g,md),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Fi(t.collectedStyles,t.currentQuerySelector,new Map);const d=ts(this,_d(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:Cl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Lh(){return new f.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:$h(e.timings,t.errors,!0);return{type:12,animation:ts(this,_d(e.animation),t),timings:r,options:null}}}class d_{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Cl(n){return n?(n=so(n)).params&&(n.params=function Xv(n){return n?so(n):null}(n.params)):n={},n}function h_(n,e,t){return{duration:n,delay:e,easing:t}}function zp(n,e,t,r,i,o,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:u,subTimeline:d}}class oo{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const f_=new RegExp(":enter","g"),nw=new RegExp(":leave","g");function Wr(n,e,t,r,i,o=new Map,u=new Map,d,g,y=[]){return(new zu).buildKeyframes(n,e,t,r,i,o,u,d,g,y)}class zu{buildKeyframes(e,t,r,i,o,u,d,g,y,C=[]){y=y||new oo;const D=new p_(e,t,y,i,o,C,[]);D.options=g;const M=g.delay?Aa(g.delay):0;D.currentTimeline.delayNextStep(M),D.currentTimeline.setStyles([u],null,D.errors,g),ts(this,r,D);const O=D.timelines.filter(U=>U.containsAnimation());if(O.length&&d.size){let U;for(let J=O.length-1;J>=0;J--){const se=O[J];if(se.element===t){U=se;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([d],null,D.errors,g)}return O.length?O.map(U=>U.buildKeyframes()):[zp(t,[],[],[],0,M,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);o!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const u=null!=r.duration?Aa(r.duration):null,d=null!=r.delay?Aa(r.delay):null;return 0!==u&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,u,d);o=Math.max(o,y.duration+y.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ts(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=bl);const u=Aa(o.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>ts(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Aa(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);o&&d.delayNextStep(o),ts(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return $h(t.params?yd(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(g=>{d.forwardTime((g.offset||0)*o),d.setStyles(g.styles,g.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Aa(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=bl);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let g=null;d.forEach((y,C)=>{t.currentQueryIndex=C;const D=t.createSubContext(e.options,y);o&&D.delayNextStep(o),y===t.element&&(g=D.currentTimeline),ts(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,u=Math.abs(o.duration),d=u*(t.currentQueryTotal-1);let g=u*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":g=d-g;break;case"full":g=r.currentStaggerTime}const C=t.currentTimeline;g&&C.delayNextStep(g);const D=C.currentTime;ts(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const bl={};class p_{constructor(e,t,r,i,o,u,d,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bl,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new qu(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Aa(r.duration)),null!=r.delay&&(i.delay=Aa(r.delay));const o=r.params;if(o){let u=i.params;u||(u=this.options.params={}),Object.keys(o).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=yd(o[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new p_(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=bl,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new Id(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(f_,"."+this._enterClassName)).replace(nw,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!o&&0==d.length&&u.push(function Bn(n){return new f.vHH(3014,!1)}()),d}}class qu{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new qu(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ts),this._currentKeyframe.set(t,Ts);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},u=function Zp(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,Ts)}else xa(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,g]of u){const y=yd(g,o,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Ts),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,g)=>{const y=xa(d,new Map,this._backFill);y.forEach((C,D)=>{"!"===C?e.add(D):C===Ts&&t.add(D)}),r||y.set("offset",g/this.duration),i.push(y)});const o=e.size?Li(e.values()):[],u=t.size?Li(t.values()):[];if(r){const d=i[0],g=new Map(d);d.set("offset",0),g.set("offset",1),i=[d,g]}return zp(this.element,i,o,u,this.duration,this.startTime,this.easing,!1)}}class Id extends qu{constructor(e,t,r,i,o,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],u=r+t,d=t/u,g=xa(e[0]);g.set("offset",0),o.push(g);const y=xa(e[0]);y.set("offset",Kp(d)),o.push(y);const C=e.length-1;for(let D=1;D<=C;D++){let M=xa(e[D]);const O=M.get("offset");M.set("offset",Kp((t+O*r)/u)),o.push(M)}r=u,t=0,i="",e=o}return zp(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Kp(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ao{}const Yh=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class rw extends ao{normalizePropertyName(e,t){return Gh(e)}normalizeStyleValue(e,t,r,i){let o="";const u=r.toString().trim();if(Yh.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function Ca(n,e){return new f.vHH(3005,!1)}())}return u+o}}function Qh(n,e,t,r,i,o,u,d,g,y,C,D,M){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:u,timelines:d,queriedElements:g,preStyleProps:y,postStyleProps:C,totalTime:D,errors:M}}const Tl={};class Qn{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Cd(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,u,d,g,y,C){const D=[],M=this.ast.options&&this.ast.options.params||Tl,U=this.buildStyles(r,d&&d.params||Tl,D),J=g&&g.params||Tl,se=this.buildStyles(i,J,D),Fe=new Set,Ge=new Map,qe=new Map,We="void"===i,_t={params:iw(J,M),delay:this.ast.options?.delay},wt=C?[]:Wr(e,t,this.ast.animation,o,u,U,se,_t,y,D);let Qt=0;if(wt.forEach(na=>{Qt=Math.max(na.duration+na.delay,Qt)}),D.length)return Qh(t,this._triggerName,r,i,We,U,se,[],[],Ge,qe,Qt,D);wt.forEach(na=>{const hh=na.element,QB=Fi(Ge,hh,new Set);na.preStyleProps.forEach(Um=>QB.add(Um));const nC=Fi(qe,hh,new Set);na.postStyleProps.forEach(Um=>nC.add(Um)),hh!==t&&Fe.add(hh)});const Lr=Li(Fe.values());return Qh(t,this._triggerName,r,i,We,U,se,wt,Lr,Ge,qe,Qt)}}function iw(n,e){const t=so(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Vo{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=so(this.defaultParams);return Object.keys(e).forEach(o=>{const u=e[o];null!==u&&(i[o]=u)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((u,d)=>{u&&(u=yd(u,i,t));const g=this.normalizer.normalizePropertyName(d,t);u=this.normalizer.normalizeStyleValue(d,g,u,t),r.set(g,u)})}),r}}class Dl{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Vo(i.style,i.options&&i.options.params||{},r))}),m_(this.states,"true","1"),m_(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Qn(e,i,this.states))}),this.fallbackTransition=function g_(n,e,t){return new Qn(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function m_(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Jp=new oo;class sw{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=Kh(this._driver,t,r,[]);if(r.length)throw function de(n){return new f.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=Lo(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let u;const d=new Map;if(o?(u=Wr(this._driver,t,o,jh,pd,new Map,new Map,r,Jp,i),u.forEach(C=>{const D=Fi(d,C.element,new Map);C.postStyleProps.forEach(M=>D.set(M,null))})):(i.push(function xe(){return new f.vHH(3300,!1)}()),u=[]),i.length)throw function $e(n){return new f.vHH(3504,!1)}();d.forEach((C,D)=>{C.forEach((M,O)=>{C.set(O,this._driver.computeStyle(D,O,Ts))})});const y=Gr(u.map(C=>{const D=d.get(C.element);return this._buildPlayer(C,new Map,D)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function ft(n){return new f.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=Vh(t,"","","");return Ss(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Jh="ng-animate-queued",Xh="ng-animate-disabled",E=[],x={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},P={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},W="__ng_removed";class he{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function bd(n){return n??null}(r?e.value:e),r){const o=so(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Ve="void",et=new he(Ve);class vt{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ns(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function It(n,e){return new f.vHH(3302,!1)}();if(null==r||0==r.length)throw function Nt(n){return new f.vHH(3303,!1)}();if(!function Td(n){return"start"==n||"done"==n}(r))throw function pt(n,e){return new f.vHH(3400,!1)}();const o=Fi(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};o.push(u);const d=Fi(this._engine.statesByElement,e,new Map);return d.has(t)||(ns(e,gd),ns(e,gd+"-"+t),d.set(t,et)),()=>{this._engine.afterFlush(()=>{const g=o.indexOf(u);g>=0&&o.splice(g,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Sn(n){return new f.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),u=new Jn(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(ns(e,gd),ns(e,gd+"-"+t),this._engine.statesByElement.set(e,d=new Map));let g=d.get(t);const y=new he(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),d.set(t,y),g||(g=et),y.value!==Ve&&g.value===y.value){if(!function __(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(g.params,y.params)){const J=[],se=o.matchStyles(g.value,g.params,J),Fe=o.matchStyles(y.value,y.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{wl(e,se),Fr(e,Fe)})}return}const M=Fi(this._engine.playersByElement,e,[]);M.forEach(J=>{J.namespaceId==this.id&&J.triggerName==t&&J.queued&&J.destroy()});let O=o.matchTransition(g.value,y.value,e,y.params),U=!1;if(!O){if(!i)return;O=o.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:g,toState:y,player:u,isFallbackTransition:U}),U||(ns(e,Jh),u.onStart(()=>{Ju(e,Jh)})),u.onDone(()=>{let J=this.players.indexOf(u);J>=0&&this.players.splice(J,1);const se=this._engine.playersByElement.get(e);if(se){let Fe=se.indexOf(u);Fe>=0&&se.splice(Fe,1)}}),this.players.push(u),M.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,es,!0);r.forEach(i=>{if(i[W])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),u=new Map;if(o){const d=[];if(o.forEach((g,y)=>{if(u.set(y,g.value),this._triggers.has(y)){const C=this.trigger(e,y,Ve,i);C&&d.push(C)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&Gr(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const u=o.name;if(i.has(u))return;i.add(u);const g=this._triggers.get(u).fallbackTransition,y=r.get(u)||et,C=new he(Ve),D=new Jn(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:g,fromState:y,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[W];(!o||o===x)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ns(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,u=this._elementListeners.get(o);u&&u.forEach(d=>{if(d.name==r.triggerName){const g=Vh(o,r.triggerName,r.fromState.value,r.toState.value);g._data=e,Ss(r.player,d.phase,g,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==o||0==u?o-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class gt{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new vt(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,d=this.driver.getParentElement(t);for(;d;){const g=i.get(d);if(g){const y=r.indexOf(g);r.splice(y+1,0,e),u=!0;break}d=this.driver.getParentElement(d)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(Yu(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Yu(t))return;const o=t[W];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ns(e,Xh)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ju(e,Xh))}removeNode(e,t,r,i){if(Yu(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[W]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Yu(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,es,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,md,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Gr(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[W];if(t&&t.setForRemoval){if(e[W]=x,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Xh)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ns(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Gr(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function br(n){return new f.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new oo,i=[],o=new Map,u=[],d=new Map,g=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(ct=>{C.add(ct);const Dt=this.driver.query(ct,".ng-animate-queued",!0);for(let Rt=0;Rt<Dt.length;Rt++)C.add(Dt[Rt])});const D=this.bodyNode,M=Array.from(this.statesByElement.keys()),O=Qu(M,this.collectedEnterElements),U=new Map;let J=0;O.forEach((ct,Dt)=>{const Rt=jh+J++;U.set(Dt,Rt),ct.forEach(fn=>ns(fn,Rt))});const se=[],Fe=new Set,Ge=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const Dt=this.collectedLeaveElements[ct],Rt=Dt[W];Rt&&Rt.setForRemoval&&(se.push(Dt),Fe.add(Dt),Rt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(fn=>Fe.add(fn)):Ge.add(Dt))}const qe=new Map,We=Qu(M,Array.from(Fe));We.forEach((ct,Dt)=>{const Rt=pd+J++;qe.set(Dt,Rt),ct.forEach(fn=>ns(fn,Rt))}),e.push(()=>{O.forEach((ct,Dt)=>{const Rt=U.get(Dt);ct.forEach(fn=>Ju(fn,Rt))}),We.forEach((ct,Dt)=>{const Rt=qe.get(Dt);ct.forEach(fn=>Ju(fn,Rt))}),se.forEach(ct=>{this.processLeaveNode(ct)})});const _t=[],wt=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(Rt=>{const fn=Rt.player,Mi=Rt.element;if(_t.push(fn),this.collectedEnterElements.length){const fs=Mi[W];if(fs&&fs.setForMove){if(fs.previousTriggersValues&&fs.previousTriggersValues.has(Rt.triggerName)){const Bm=fs.previousTriggersValues.get(Rt.triggerName),qa=this.statesByElement.get(Rt.element);if(qa&&qa.has(Rt.triggerName)){const WS=qa.get(Rt.triggerName);WS.value=Bm,qa.set(Rt.triggerName,WS)}}return void fn.destroy()}}const Pc=!D||!this.driver.containsElement(D,Mi),ra=qe.get(Mi),Cp=U.get(Mi),Er=this._buildInstruction(Rt,r,Cp,ra,Pc);if(Er.errors&&Er.errors.length)return void wt.push(Er);if(Pc)return fn.onStart(()=>wl(Mi,Er.fromStyles)),fn.onDestroy(()=>Fr(Mi,Er.toStyles)),void i.push(fn);if(Rt.isFallbackTransition)return fn.onStart(()=>wl(Mi,Er.fromStyles)),fn.onDestroy(()=>Fr(Mi,Er.toStyles)),void i.push(fn);const e2=[];Er.timelines.forEach(fs=>{fs.stretchStartingKeyframe=!0,this.disabledNodes.has(fs.element)||e2.push(fs)}),Er.timelines=e2,r.append(Mi,Er.timelines),u.push({instruction:Er,player:fn,element:Mi}),Er.queriedElements.forEach(fs=>Fi(d,fs,[]).push(fn)),Er.preStyleProps.forEach((fs,Bm)=>{if(fs.size){let qa=g.get(Bm);qa||g.set(Bm,qa=new Set),fs.forEach((WS,_k)=>qa.add(_k))}}),Er.postStyleProps.forEach((fs,Bm)=>{let qa=y.get(Bm);qa||y.set(Bm,qa=new Set),fs.forEach((WS,_k)=>qa.add(_k))})});if(wt.length){const ct=[];wt.forEach(Dt=>{ct.push(function Ta(n,e){return new f.vHH(3505,!1)}())}),_t.forEach(Dt=>Dt.destroy()),this.reportError(ct)}const Qt=new Map,Lr=new Map;u.forEach(ct=>{const Dt=ct.element;r.has(Dt)&&(Lr.set(Dt,Dt),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,Qt))}),i.forEach(ct=>{const Dt=ct.element;this._getPreviousPlayers(Dt,!1,ct.namespaceId,ct.triggerName,null).forEach(fn=>{Fi(Qt,Dt,[]).push(fn),fn.destroy()})});const na=se.filter(ct=>uw(ct,g,y)),hh=new Map;eg(hh,this.driver,Ge,y,Ts).forEach(ct=>{uw(ct,g,y)&&na.push(ct)});const nC=new Map;O.forEach((ct,Dt)=>{eg(nC,this.driver,new Set(ct),g,"!")}),na.forEach(ct=>{const Dt=hh.get(ct),Rt=nC.get(ct);hh.set(ct,new Map([...Array.from(Dt?.entries()??[]),...Array.from(Rt?.entries()??[])]))});const Um=[],JB=[],XB={};u.forEach(ct=>{const{element:Dt,player:Rt,instruction:fn}=ct;if(r.has(Dt)){if(C.has(Dt))return Rt.onDestroy(()=>Fr(Dt,fn.toStyles)),Rt.disabled=!0,Rt.overrideTotalTime(fn.totalTime),void i.push(Rt);let Mi=XB;if(Lr.size>1){let ra=Dt;const Cp=[];for(;ra=ra.parentNode;){const Er=Lr.get(ra);if(Er){Mi=Er;break}Cp.push(ra)}Cp.forEach(Er=>Lr.set(Er,Mi))}const Pc=this._buildAnimation(Rt.namespaceId,fn,Qt,o,nC,hh);if(Rt.setRealPlayer(Pc),Mi===XB)Um.push(Rt);else{const ra=this.playersByElement.get(Mi);ra&&ra.length&&(Rt.parentPlayer=Gr(ra)),i.push(Rt)}}else wl(Dt,fn.fromStyles),Rt.onDestroy(()=>Fr(Dt,fn.toStyles)),JB.push(Rt),C.has(Dt)&&i.push(Rt)}),JB.forEach(ct=>{const Dt=o.get(ct.element);if(Dt&&Dt.length){const Rt=Gr(Dt);ct.setRealPlayer(Rt)}}),i.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<se.length;ct++){const Dt=se[ct],Rt=Dt[W];if(Ju(Dt,pd),Rt&&Rt.hasAnimation)continue;let fn=[];if(d.size){let Pc=d.get(Dt);Pc&&Pc.length&&fn.push(...Pc);let ra=this.driver.query(Dt,md,!0);for(let Cp=0;Cp<ra.length;Cp++){let Er=d.get(ra[Cp]);Er&&Er.length&&fn.push(...Er)}}const Mi=fn.filter(Pc=>!Pc.destroyed);Mi.length?Dd(this,Dt,Mi):this.processLeaveNode(Dt)}return se.length=0,Um.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const Dt=this.players.indexOf(ct);this.players.splice(Dt,1)}),ct.play()}),Um}elementContainsData(e,t){let r=!1;const i=t[W];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const g=!o||o==Ve;d.forEach(y=>{y.queued||!g&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const o=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,C=y!==o,D=Fi(r,y,[]);this._getPreviousPlayers(y,C,u,d,t.toState).forEach(O=>{const U=O.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),O.destroy(),D.push(O)})}wl(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,u){const d=t.triggerName,g=t.element,y=[],C=new Set,D=new Set,M=t.timelines.map(U=>{const J=U.element;C.add(J);const se=J[W];if(se&&se.removedBeforeQueried)return new wi(U.duration,U.delay);const Fe=J!==g,Ge=function aw(n){const e=[];return lw(n,e),e}((r.get(J)||E).map(Qt=>Qt.getRealPlayer())).filter(Qt=>!!Qt.element&&Qt.element===J),qe=o.get(J),We=u.get(J),_t=Lo(0,this._normalizer,0,U.keyframes,qe,We),wt=this._buildPlayer(U,_t,Ge);if(U.subTimeline&&i&&D.add(J),Fe){const Qt=new Jn(e,d,J);Qt.setRealPlayer(wt),y.push(Qt)}return wt});y.forEach(U=>{Fi(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function xs(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,U.element,U))}),C.forEach(U=>ns(U,r_));const O=Gr(M);return O.onDestroy(()=>{C.forEach(U=>Ju(U,r_)),Fr(g,t.toStyles)}),D.forEach(U=>{Fi(i,U,[]).push(O)}),O}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new wi(e.duration,e.delay)}}class Jn{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new wi,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Ss(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Fi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Yu(n){return n&&1===n.nodeType}function Xp(n,e){const t=n.style.display;return n.style.display=e??"none",t}function eg(n,e,t,r,i){const o=[];t.forEach(g=>o.push(Xp(g)));const u=[];r.forEach((g,y)=>{const C=new Map;g.forEach(D=>{const M=e.computeStyle(y,D,i);C.set(D,M),(!M||0==M.length)&&(y[W]=P,u.push(y))}),n.set(y,C)});let d=0;return t.forEach(g=>Xp(g,o[d++])),u}function Qu(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),o=new Map;function u(d){if(!d)return 1;let g=o.get(d);if(g)return g;const y=d.parentNode;return g=t.has(y)?y:i.has(y)?1:u(y),o.set(d,g),g}return e.forEach(d=>{const g=u(d);1!==g&&t.get(g).push(d)}),t}function ns(n,e){n.classList?.add(e)}function Ju(n,e){n.classList?.remove(e)}function Dd(n,e,t){Gr(t).onDone(()=>n.processLeaveNode(e))}function lw(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof pl?lw(r.players,e):e.push(r)}}function uw(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class cw{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new gt(e,t,r),this._timelineEngine=new sw(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const g=[],C=Kh(this._driver,o,g,[]);if(g.length)throw function B(n,e){return new f.vHH(3404,!1)}();d=function Zu(n,e,t){return new Dl(n,e,t)}(i,C,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,u]=e_(r);this._timelineEngine.command(o,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[u,d]=e_(r);return this._timelineEngine.listen(u,t,d,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let uC=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Fr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Fr(this._element,this._initialStyles),this._endStyles&&(Fr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(wl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wl(this._element,this._endStyles),this._endStyles=null),Fr(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function tg(n){let e=null;return n.forEach((t,r)=>{(function cC(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class dw{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Zv(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class dC{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return vl(e,t)}getParentElement(e){return Lp(e)}query(e,t,r){return Bh(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,u=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(g.easing=o);const y=new Map,C=u.filter(O=>O instanceof dw);(function Wh(n,e){return 0===n||0===e})(r,i)&&C.forEach(O=>{O.currentSnapshot.forEach((U,J)=>y.set(J,U))});let D=function i_(n){return n.length?n[0]instanceof Map?n:n.map(e=>jp(e)):[]}(t).map(O=>xa(O));D=function aC(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,u)=>{r.has(u)||i.push(u),r.set(u,o)}),i.length)for(let o=1;o<e.length;o++){let u=e[o];i.forEach(d=>u.set(d,Zv(n,d)))}}return e}(e,D,y);const M=function zS(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=tg(e[0]),e.length>1&&(r=tg(e[e.length-1]))):e instanceof Map&&(t=tg(e)),t||r?new uC(n,t,r):null}(e,D);return new dw(e,D,g,M)}}let hw=(()=>{class n extends Ou{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?od(t):t;return ef(this._renderer,null,r,"register",[i]),new qS(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class qS extends class wa{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new fw(this._id,e,t||{},this._renderer)}}class fw{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return ef(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ef(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const hC="@.disabled";let KS=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,u)=>{const d=u?.parentNode(o);d&&u.removeChild(d,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(o);return C||(C=new pw("",o,this.engine),this._rendererCache.set(o,C)),C}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const g=C=>{Array.isArray(C)?C.forEach(g):this.engine.registerTrigger(u,d,t,C.name,C)};return r.data.animation.forEach(g),new ZS(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[u,d]=o;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(cw),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class pw{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==hC?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class ZS extends pw{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==hC?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function YS(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),u="";return"@"!=o.charAt(0)&&([o,u]=function QS(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let JS=(()=>{class n extends cw{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(Up),f.LFG(ao),f.LFG(f.z2F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const fC=[{provide:Ou,useClass:hw},{provide:ao,useFactory:function gw(){return new rw}},{provide:cw,useClass:JS},{provide:f.FYo,useFactory:function XS(n,e,t){return new KS(n,e,t)},deps:[xo,cw,f.R0b]}],mw=[{provide:Up,useFactory:()=>new dC},{provide:f.QbO,useValue:"BrowserAnimations"},...fC],_w=[{provide:Up,useClass:n_},{provide:f.QbO,useValue:"NoopAnimations"},...fC];let eA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?_w:mw}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:mw,imports:[Mu]}),n})();var pn=V(8996),Sl=V(7669);function Je(...n){const e=(0,Sl.yG)(n);return(0,pn.D)(n,e)}var Tr=V(7579);class Ms extends Tr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const v_=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var lo=V(9751);const{isArray:nA}=Array,{getPrototypeOf:gC,prototype:rA,keys:mC}=Object;function _C(n){if(1===n.length){const e=n[0];if(nA(e))return{args:e,keys:null};if(function iA(n){return n&&"object"==typeof n&&gC(n)===rA}(e)){const t=mC(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var tf=V(4671),Ct=V(4004);const{isArray:sA}=Array;function Ra(n){return(0,Ct.U)(e=>function nf(n,e){return sA(e)?n(...e):n(e)}(n,e))}function yC(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Dr=V(5403),vk=V(9672);function oA(...n){const e=(0,Sl.yG)(n),t=(0,Sl.jO)(n),{args:r,keys:i}=_C(n);if(0===r.length)return(0,pn.D)([],e);const o=new lo.y(function vC(n,e,t=tf.y){return r=>{aA(e,()=>{const{length:i}=n,o=new Array(i);let u=i,d=i;for(let g=0;g<i;g++)aA(e,()=>{const y=(0,pn.D)(n[g],e);let C=!1;y.subscribe((0,Dr.x)(r,D=>{o[g]=D,C||(C=!0,d--),d||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>yC(i,u):tf.y));return t?o.pipe(Ra(t)):o}function aA(n,e,t){n?(0,vk.f)(t,n,e):e()}var is=V(8189);function ng(...n){return function yw(){return(0,is.J)(1)}()((0,pn.D)(n,(0,Sl.yG)(n)))}var rg=V(8421);function vw(n){return new lo.y(e=>{(0,rg.Xf)(n()).subscribe(e)})}var lA=V(9635),Sd=V(576);function ig(n,e){const t=(0,Sd.m)(n)?n:()=>n,r=i=>i.error(t());return new lo.y(e?i=>e.schedule(r,0,i):r)}var Ad=V(515),w_=V(727),Sr=V(4482);function E_(){return(0,Sr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Dr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uA extends lo.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Sr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new w_.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Dr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=w_.w0.EMPTY)}return e}refCount(){return E_()(this)}}function An(n,e){return(0,Sr.e)((t,r)=>{let i=null,o=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe((0,Dr.x)(r,g=>{i?.unsubscribe();let y=0;const C=o++;(0,rg.Xf)(n(g,C)).subscribe(i=(0,Dr.x)(r,D=>r.next(e?e(g,D,C,y++):D),()=>{i=null,d()}))},()=>{u=!0,d()}))})}function xd(n){return n<=0?()=>Ad.E:(0,Sr.e)((e,t)=>{let r=0;e.subscribe((0,Dr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sg(...n){const e=(0,Sl.yG)(n);return(0,Sr.e)((t,r)=>{(e?ng(n,t,e):ng(n,t)).subscribe(r)})}function Uo(n,e){return(0,Sr.e)((t,r)=>{let i=0;t.subscribe((0,Dr.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var li=V(5577);function I_(n){return(0,Sr.e)((e,t)=>{let r=!1;e.subscribe((0,Dr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function wC(n=cA){return(0,Sr.e)((e,t)=>{let r=!1;e.subscribe((0,Dr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cA(){return new v_}function Al(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Uo((i,o)=>n(i,o,r)):tf.y,xd(1),t?I_(e):wC(()=>new v_))}function Md(n,e){return(0,Sd.m)(e)?(0,li.z)(n,e,1):(0,li.z)(n,1)}var Ei=V(8505);function xl(n){return(0,Sr.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,Dr.x)(t,void 0,void 0,u=>{o=(0,rg.Xf)(n(u,xl(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function ww(n,e,t,r,i){return(o,u)=>{let d=t,g=e,y=0;o.subscribe((0,Dr.x)(u,C=>{const D=y++;g=d?n(g,C,D):(d=!0,C),r&&u.next(g)},i&&(()=>{d&&u.next(g),u.complete()})))}}function Xu(n,e){return(0,Sr.e)(ww(n,e,arguments.length>=2,!0))}function og(n){return n<=0?()=>Ad.E:(0,Sr.e)((e,t)=>{let r=[];e.subscribe((0,Dr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function EC(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Uo((i,o)=>n(i,o,r)):tf.y,og(1),t?I_(e):wC(()=>new v_))}function C_(n){return(0,Sr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Pt="primary",rf=Symbol("RouteTitle");class CC{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sf(n){return new CC(n)}function wk(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const u=r[o],d=n[o];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Na(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Ew(n[i],e[i]))return!1;return!0}function Ew(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Iw(n){return Array.prototype.concat.apply([],n)}function Cw(n){return n.length>0?n[n.length-1]:null}function zr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Bo(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,pn.D)(Promise.resolve(n)):Je(n)}const bw={exact:function DC(n,e,t){if(!Rd(n.segments,e.segments)||!lg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!DC(n.children[r],e.children[r],t))return!1;return!0},subset:AC},Tw={exact:function ag(n,e){return Na(n,e)},subset:function SC(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ew(n[t],e[t]))},ignored:()=>!0};function T_(n,e,t){return bw[t.paths](n.root,e.root,t.matrixParams)&&Tw[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function AC(n,e,t){return xC(n,e,e.segments,t)}function xC(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Rd(i,t)||e.hasChildren()||!lg(i,t,r))}if(n.segments.length===t.length){if(!Rd(n.segments,t)||!lg(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!AC(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Rd(n.segments,i)&&lg(n.segments,i,r)&&n.children[Pt])&&xC(n.children[Pt],e,o,r)}}function lg(n,e,t){return e.every((r,i)=>Tw[t](n[i].parameters,r.parameters))}class Ml{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sf(this.queryParams)),this._queryParamMap}toString(){return jo.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,zr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return S_(this)}}class D_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sf(this.parameters)),this._parameterMap}toString(){return OC(this)}}function Rd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let NC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new Dw},providedIn:"root"}),n})();class Dw{parse(e){const t=new mA(e);return new Ml(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lf(e.root,!0)}`,r=function Vt(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${A_(t)}=${A_(i)}`).join("&"):`${A_(t)}=${A_(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function hA(n){return encodeURI(n)}(e.fragment)}`:""}`}}const jo=new Dw;function S_(n){return n.segments.map(e=>OC(e)).join("/")}function lf(n,e){if(!n.hasChildren())return S_(n);if(e){const t=n.children[Pt]?lf(n.children[Pt],!1):"",r=[];return zr(n.children,(i,o)=>{o!==Pt&&r.push(`${o}:${lf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function RC(n,e){let t=[];return zr(n.children,(r,i)=>{i===Pt&&(t=t.concat(e(r,i)))}),zr(n.children,(r,i)=>{i!==Pt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Pt?[lf(n.children[Pt],!1)]:[`${i}:${lf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${S_(n)}/${t[0]}`:`${S_(n)}/(${t.join("//")})`}}function PC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function A_(n){return PC(n).replace(/%3B/gi,";")}function Sw(n){return PC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ug(n){return decodeURIComponent(n)}function kC(n){return ug(n.replace(/\+/g,"%20"))}function OC(n){return`${Sw(n.path)}${function fA(n){return Object.keys(n).map(e=>`;${Sw(e)}=${Sw(n[e])}`).join("")}(n.parameters)}`}const FC=/^[^\/()?;=#]+/;function cg(n){const e=n.match(FC);return e?e[0]:""}const LC=/^[^=?&#]+/,gA=/^[^&#]+/;class mA{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new Gt(e,t)),r}parseSegment(){const e=cg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new D_(ug(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cg(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=cg(this.remaining);i&&(r=i,this.capture(r))}e[ug(t)]=ug(r)}parseQueryParam(e){const t=function pA(n){const e=n.match(LC);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function VC(n){const e=n.match(gA);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=kC(t),o=kC(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cg(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Pt);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[Pt]:new Gt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function x_(n){return n.segments.length>0?new Gt([],{[Pt]:n}):n}function M_(n){const e={};for(const r of Object.keys(n.children)){const o=M_(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function _A(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function uf(n){return n instanceof Ml}function Aw(n,e,t,r,i){if(0===t.length)return hg(e.root,e.root,e.root,r,i);const o=function UC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new EA(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const d={};return zr(o.outlets,(g,y)=>{d[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:d}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===u?(o.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,o]},[]);return new EA(t,e,r)}(t);return o.toRoot()?hg(e.root,e.root,new Gt([],{}),r,i):function u(g){const y=function IA(n,e,t,r){if(n.isAbsolute)return new kd(e.root,!0,0);if(-1===r)return new kd(t,t===e.root,0);return function Od(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new kd(r,!1,i-o)}(t,r+(Pd(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,g),C=y.processChildren?ec(y.segmentGroup,y.index,o.commands):N_(y.segmentGroup,y.index,o.commands);return hg(e.root,y.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Pd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function dg(n){return"object"==typeof n&&null!=n&&n.outlets}function hg(n,e,t,r,i){let u,o={};r&&zr(r,(g,y)=>{o[y]=Array.isArray(g)?g.map(C=>`${C}`):`${g}`}),u=n===e?t:wA(n,e,t);const d=x_(M_(u));return new Ml(d,o,i)}function wA(n,e,t){const r={};return zr(n.children,(i,o)=>{r[o]=i===e?t:wA(i,e,t)}),new Gt(n.segments,r)}class EA{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pd(r[0]))throw new f.vHH(4003,!1);const i=r.find(dg);if(i&&i!==Cw(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function N_(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return ec(n,e,t);const r=function bA(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const u=n.segments[i],d=t[r];if(dg(d))break;const g=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!jC(g,y,u))return o;r+=2}else{if(!jC(g,{},u))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Gt(n.segments.slice(0,r.pathIndex),{});return o.children[Pt]=new Gt(n.segments.slice(r.pathIndex),n.children),ec(o,0,i)}return r.match&&0===i.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?P_(n,e,t):r.match?ec(n,0,i):P_(n,e,t)}function ec(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function CA(n){return dg(n[0])?n[0].outlets:{[Pt]:n}}(t),i={};return zr(r,(o,u)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[u]=N_(n.children[u],e,o))}),zr(n.children,(o,u)=>{void 0===r[u]&&(i[u]=o)}),new Gt(n.segments,i)}}function P_(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(dg(o)){const g=TA(o.outlets);return new Gt(r,g)}if(0===i&&Pd(t[0])){r.push(new D_(n.segments[e].path,BC(t[0]))),i++;continue}const u=dg(o)?o.outlets[Pt]:`${o}`,d=i<t.length-1?t[i+1]:null;u&&d&&Pd(d)?(r.push(new D_(u,BC(d))),i+=2):(r.push(new D_(u,{})),i++)}return new Gt(r,{})}function TA(n){const e={};return zr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=P_(new Gt([],{}),0,t))}),e}function BC(n){const e={};return zr(n,(t,r)=>e[r]=`${t}`),e}function jC(n,e,t){return n==t.path&&Na(e,t.parameters)}class Rl{constructor(e,t){this.id=e,this.url=t}}class xw extends Rl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class tc extends Rl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class k_ extends Rl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mw extends Rl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class HC extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rw extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ik extends Rl{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nw extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DA extends Rl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ck{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cf{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $C{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GC{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O_{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ho{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pw{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class F_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=$o(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=$o(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=fg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fg(e,this._root).map(t=>t.value)}}function $o(n,e){if(n===e.value)return e;for(const t of e.children){const r=$o(n,t);if(r)return r}return null}function fg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=fg(n,t);if(r.length)return r.unshift(e),r}return[]}class Pa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function nc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class AA extends F_{constructor(e,t){super(e),this.snapshot=t,WC(this,e)}toString(){return this.snapshot.toString()}}function kw(n,e){const t=function bk(n,e){const u=new df([],{},{},"",{},Pt,e,null,n.root,-1,{});return new L_("",new Pa(u,[]))}(n,e),r=new Ms([new D_("",{})]),i=new Ms({}),o=new Ms({}),u=new Ms({}),d=new Ms(""),g=new Go(r,i,u,d,o,Pt,e,t.root);return g.snapshot=t.root,new AA(new Pa(g,[]),t)}class Go{constructor(e,t,r,i,o,u,d,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=d,this.title=this.data?.pipe((0,Ct.U)(y=>y[rf]))??Je(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>sf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>sf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Ow(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class df{constructor(e,t,r,i,o,u,d,g,y,C,D,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=d,this.title=this.data?.[rf],this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=C,this._correctedLastPathIndex=M??C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class L_ extends F_{constructor(e,t){super(t),this.url=e,WC(this,t)}toString(){return zC(this._root)}}function WC(n,e){e.value._routerState=n,e.children.forEach(t=>WC(n,t))}function zC(n){const e=n.children.length>0?` { ${n.children.map(zC).join(", ")} } `:"";return`${n.value}${e}`}function Fw(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Na(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Na(e.params,t.params)||n.params.next(t.params),function b_(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Na(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Na(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Lw(n,e){const t=Na(n.params,e.params)&&function MC(n,e){return Rd(n,e)&&n.every((t,r)=>Na(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Lw(n.parent,e.parent))}function hf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Tk(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hf(n,r,i);return hf(n,r)})}(n,e,t);return new Pa(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>hf(n,d)),u}}const r=function MA(n){return new Go(new Ms(n.url),new Ms(n.params),new Ms(n.queryParams),new Ms(n.fragment),new Ms(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>hf(n,o));return new Pa(r,i)}}const qC="ngNavigationCancelingError";function Vw(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=uf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Uw(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Uw(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[qC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function KC(n){return V_(n)&&uf(n.url)}function V_(n){return n&&n[qC]}class Dk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new U_,this.attachRef=null}}let U_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Dk,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bw=!1;let ZC=(()=>{class n{constructor(t,r,i,o,u){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,Bw);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,Bw);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,Bw);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,Bw);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,g=new Sk(t,d,i.injector);if(r&&function Ak(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,g)}else this.activated=i.createComponent(u,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(U_),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Sk{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Go?this.route:e===U_?this.childContexts:this.parent.get(e,t)}}let YC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[ZC],encapsulation:2}),n})();function RA(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gg(n){const e=n.children&&n.children.map(gg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=YC),t}function uo(n){return n.outlet||Pt}function Nl(n,e){const t=n.filter(r=>uo(r)===e);return t.push(...n.filter(r=>uo(r)!==e)),t}function ff(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class PA{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=nc(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,i[u],r),delete i[u]}),zr(i,(o,u)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=nc(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=nc(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=nc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ho(o.value.snapshot))}),e.children.length&&this.forwardEvent(new GC(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(Fw(i),i===o)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),Fw(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=ff(i.snapshot),g=d?.get(f._Vd)??null;u.attachRef=null,u.route=i,u.resolver=g,u.injector=d,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class $w{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class B_{constructor(e,t){this.component=e,this.route=t}}function kA(n,e,t){const r=n._root;return Ld(r,e?e._root:null,t,[r.value])}function Wo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Ld(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=nc(e);return n.children.forEach(u=>{(function pf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const g=function H_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rd(n.url,e.url)||!Na(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lw(n,e)||!Na(n.queryParams,e.queryParams);default:return!Lw(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new $w(r)):(o.data=u.data,o._resolvedData=u._resolvedData),Ld(n,e,o.component?d?d.children:null:t,r,i),g&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new B_(d.outlet.component,u))}else u&&Pl(e,d,i),i.canActivateChecks.push(new $w(r)),Ld(n,null,o.component?d?d.children:null:t,r,i)})(u,o[u.value.outlet],t,r.concat([u.value]),i),delete o[u.value.outlet]}),zr(o,(u,d)=>Pl(u,t.getContext(d),i)),i}function Pl(n,e,t){const r=nc(n),i=n.value;zr(r,(o,u)=>{Pl(o,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new B_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function mg(n){return"function"==typeof n}function qw(n){return n instanceof v_||"EmptyError"===n?.name}const _g=Symbol("INITIAL_VALUE");function gf(){return An(n=>oA(n.map(e=>e.pipe(xd(1),sg(_g)))).pipe((0,Ct.U)(e=>{for(const t of e)if(!0!==t){if(t===_g)return _g;if(!1===t||t instanceof Ml)return t}return!0}),Uo(e=>e!==_g),xd(1)))}function Zw(n){return(0,lA.z)((0,Ei.b)(e=>{if(uf(e))throw Vw(0,e)}),(0,Ct.U)(e=>!0===e))}const Yw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ob(n,e,t,r,i){const o=$_(n,e,t);return o.matched?function VA(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Je(i.map(u=>{const d=Wo(u,n);return Bo(function zw(n){return n&&mg(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(gf(),Zw()):Je(!0)}(r=RA(e,r),e,t).pipe((0,Ct.U)(u=>!0===u?o:{...Yw})):Je(o)}function $_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Yw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wk)(t,n,e);if(!i)return{...Yw};const o={};zr(i.posParams,(d,g)=>{o[g]=d.path});const u=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function G_(n,e,t,r,i="corrected"){if(t.length>0&&function BA(n,e,t){return t.some(r=>yg(n,e,r)&&uo(r)!==Pt)}(n,t,r)){const u=new Gt(e,function UA(n,e,t,r){const i={};i[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&uo(o)!==Pt){const u=new Gt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[uo(o)]=u}return i}(n,e,r,new Gt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function lb(n,e,t){return t.some(r=>yg(n,e,r))}(n,t,r)){const u=new Gt(n.segments,function ab(n,e,t,r,i,o){const u={};for(const d of r)if(yg(n,t,d)&&!i[uo(d)]){const g=new Gt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===o?n.segments.length:e.length,u[uo(d)]=g}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new Gt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function yg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ub(n,e,t,r){return!!(uo(n)===r||r!==Pt&&yg(e,t,n))&&("**"===n.path||$_(e,n,t).matched)}function zo(n,e,t){return 0===e.length&&!n.children[t]}const mf=!1;class W_{constructor(e){this.segmentGroup=e||null}}class cb{constructor(e){this.urlTree=e}}function z_(n){return ig(new W_(n))}function Qw(n){return ig(new cb(n))}class Jw{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=G_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Pt).pipe((0,Ct.U)(o=>this.createUrlTree(M_(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xl(o=>{if(o instanceof cb)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof W_?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Pt).pipe((0,Ct.U)(i=>this.createUrlTree(M_(i),e.queryParams,e.fragment))).pipe(xl(i=>{throw i instanceof W_?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,mf)}createUrlTree(e,t,r){const i=x_(e);return new Ml(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(o=>new Gt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,pn.D)(i).pipe(Md(o=>{const u=r.children[o],d=Nl(t,o);return this.expandSegmentGroup(e,d,u,o).pipe((0,Ct.U)(g=>({segment:g,outlet:o})))}),Xu((o,u)=>(o[u.outlet]=u.segment,o),{}),EC())}expandSegment(e,t,r,i,o,u){return(0,pn.D)(r).pipe(Md(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,o,u).pipe(xl(y=>{if(y instanceof W_)return Je(null);throw y}))),Al(d=>!!d),xl((d,g)=>{if(qw(d))return zo(t,i,o)?Je(new Gt([],{})):z_(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,o,u,d){return ub(i,t,o,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u):z_(t):z_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Qw(o):this.lineralizeSegments(r,o).pipe((0,li.z)(u=>{const d=new Gt(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){const{matched:d,consumedSegments:g,remainingSegments:y,positionalParamSegments:C}=$_(t,i,o);if(!d)return z_(t);const D=this.applyRedirectCommands(g,i.redirectTo,C);return i.redirectTo.startsWith("/")?Qw(D):this.lineralizeSegments(i,D).pipe((0,li.z)(M=>this.expandSegment(e,t,r,M.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=RA(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ct.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Gt(i,{})))):Je(new Gt(i,{}))):ob(t,r,i,e).pipe(An(({matched:u,consumedSegments:d,remainingSegments:g})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,li.z)(C=>{const D=C.injector??e,M=C.routes,{segmentGroup:O,slicedSegments:U}=G_(t,d,g,M),J=new Gt(O.segments,O.children);if(0===U.length&&J.hasChildren())return this.expandChildren(D,M,J).pipe((0,Ct.U)(qe=>new Gt(d,qe)));if(0===M.length&&0===U.length)return Je(new Gt(d,{}));const se=uo(r)===o;return this.expandSegment(D,J,M,U,se?Pt:o,!0).pipe((0,Ct.U)(Ge=>new Gt(d.concat(Ge.segments),Ge.children)))})):z_(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function Kw(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Je(!0):Je(i.map(u=>{const d=Wo(u,n);return Bo(function tb(n){return n&&mg(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(gf(),Zw())}(e,t,r).pipe((0,li.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ei.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function HA(n){return ig(Uw(mf,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[Pt])return ig(new f.vHH(4e3,mf));i=i.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Ml(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return zr(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[o]=t[d]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let u={};return zr(t.children,(d,g)=>{u[g]=this.createSegmentGroup(e,d,r,i)}),new Gt(o,u)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,mf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class K_{}class eE{constructor(e,t,r,i,o,u,d,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d,this.urlSerializer=g}recognize(){const e=G_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Pt).pipe((0,Ct.U)(t=>{if(null===t)return null;const r=new df([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Pa(r,t),o=new L_(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=pg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,pn.D)(Object.keys(r.children)).pipe(Md(i=>{const o=r.children[i],u=Nl(t,i);return this.processSegmentGroup(e,u,o,i)}),Xu((i,o)=>i&&o?(i.push(...o),i):null),function dA(n,e=!1){return(0,Sr.e)((t,r)=>{let i=0;t.subscribe((0,Dr.x)(r,o=>{const u=n(o,i++);(u||e)&&r.next(o),!u&&r.complete()}))})}(i=>null!==i),I_(null),EC(),(0,Ct.U)(i=>{if(null===i)return null;const o=Z_(i);return function db(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,pn.D)(t).pipe(Md(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,o)),Al(u=>!!u),xl(u=>{if(qw(u))return zo(r,i,o)?Je([]):Je(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!ub(t,r,i,o))return Je(null);let u;if("**"===t.path){const d=i.length>0?Cw(i).parameters:{},g=nE(r)+i.length;u=Je({snapshot:new df(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iE(t),uo(t),t.component??t._loadedComponent??null,t,tE(r),g,Y_(t),g),consumedSegments:[],remainingSegments:[]})}else u=ob(r,t,i,e).pipe((0,Ct.U)(({matched:d,consumedSegments:g,remainingSegments:y,parameters:C})=>{if(!d)return null;const D=nE(r)+g.length;return{snapshot:new df(g,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iE(t),uo(t),t.component??t._loadedComponent??null,t,tE(r),D,Y_(t),D),consumedSegments:g,remainingSegments:y}}));return u.pipe(An(d=>{if(null===d)return Je(null);const{snapshot:g,consumedSegments:y,remainingSegments:C}=d;e=t._injector??e;const D=t._loadedInjector??e,M=function Nk(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:O,slicedSegments:U}=G_(r,y,C,M.filter(se=>void 0===se.redirectTo),this.relativeLinkResolution);if(0===U.length&&O.hasChildren())return this.processChildren(D,M,O).pipe((0,Ct.U)(se=>null===se?null:[new Pa(g,se)]));if(0===M.length&&0===U.length)return Je([new Pa(g,[])]);const J=uo(t)===o;return this.processSegment(D,M,O,U,J?Pt:o).pipe((0,Ct.U)(se=>null===se?null:[new Pa(g,se)]))}))}}function Pk(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Z_(n){const e=[],t=new Set;for(const r of n){if(!Pk(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Z_(r.children);e.push(new Pa(r.value,i))}return e.filter(r=>!t.has(r))}function tE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function nE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function iE(n){return n.data||{}}function Y_(n){return n.resolve||{}}function oE(n){return"string"==typeof n.title||null===n.title}function aE(n){return An(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,Ct.U)(()=>e)):Je(e)})}let hb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Pt);return r}getResolvedTitleForRoute(t){return t.data[rf]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(_f)},providedIn:"root"}),n})(),_f=(()=>{class n extends hb{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cs))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Fk{}class Lk extends class qA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const X_=new f.OlP("",{providedIn:"root",factory:()=>({})}),lE=new f.OlP("ROUTES");let ey=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Bo(t.loadComponent()).pipe((0,Ei.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),C_(()=>{this.componentLoaders.delete(t)})),i=new uA(r,()=>new Tr.x).pipe(E_());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ct.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,y,C=!1;Array.isArray(d)?y=d:(g=d.create(t).injector,y=Iw(g.get(lE,[],f.XFs.Self|f.XFs.Optional)));return{routes:y.map(gg),injector:g}}),C_(()=>{this.childrenLoaders.delete(r)})),u=new uA(o,()=>new Tr.x).pipe(E_());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return Bo(t()).pipe((0,li.z)(r=>r instanceof f.YKP||Array.isArray(r)?Je(r):(0,pn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uE{}class ZA{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function YA(n){throw n}function QA(n,e,t){return e.parse("/")}const JA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function pb(){const n=(0,f.f3M)(NC),e=(0,f.f3M)(U_),t=(0,f.f3M)(Me),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),o=(0,f.f3M)(lE,{optional:!0})??[],u=(0,f.f3M)(X_,{optional:!0})??{},d=(0,f.f3M)(_f),g=(0,f.f3M)(hb,{optional:!0}),y=(0,f.f3M)(uE,{optional:!0}),C=(0,f.f3M)(Fk,{optional:!0}),D=new _r(null,n,e,t,r,i,Iw(o));return y&&(D.urlHandlingStrategy=y),C&&(D.routeReuseStrategy=C),D.titleStrategy=g??d,function ex(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,D),D}let _r=(()=>{class n{constructor(t,r,i,o,u,d,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tr.x,this.errorHandler=YA,this.malformedUriErrorHandler=QA,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new ZA,this.routeReuseStrategy=new Lk,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(ey),this.configLoader.onLoadEndListener=M=>this.triggerEvent(new cf(M)),this.configLoader.onLoadStartListener=M=>this.triggerEvent(new Ck(M)),this.ngModule=u.get(f.h0i),this.console=u.get(f.c2e);const D=u.get(f.R0b);this.isNgZoneEnabled=D instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function TC(){return new Ml(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kw(this.currentUrlTree,this.rootComponentType),this.transitions=new Ms({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Uo(i=>0!==i.id),(0,Ct.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),An(i=>{let o=!1,u=!1;return Je(i).pipe((0,Ei.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),An(d=>{const g=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return tx(d.source)&&(this.browserUrlTree=d.extractedUrl),Je(d).pipe(An(D=>{const M=this.transitions.getValue();return r.next(new xw(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),M!==this.transitions.getValue()?Ad.E:Promise.resolve(D)}),function GA(n,e,t,r){return An(i=>function $A(n,e,t,r,i){return new Jw(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ct.U)(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ei.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},i.urlAfterRedirects=D.urlAfterRedirects}),function kl(n,e,t,r,i,o){return(0,li.z)(u=>function WA(n,e,t,r,i,o,u="emptyOnly",d="legacy"){return new eE(n,e,t,r,i,u,d,o).recognize().pipe(An(g=>null===g?function Xw(n){return new lo.y(e=>e.error(n))}(new K_):Je(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,o).pipe((0,Ct.U)(d=>({...u,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ei.b)(D=>{if(i.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(O,D)}this.browserUrlTree=D.urlAfterRedirects}const M=new HC(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(M)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:O,source:U,restoredState:J,extras:se}=d,Fe=new xw(M,this.serializeUrl(O),U,J);r.next(Fe);const Ge=kw(O,this.rootComponentType).snapshot;return Je(i={...d,targetSnapshot:Ge,urlAfterRedirects:O,extras:{...se,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),Ad.E}),(0,Ei.b)(d=>{const g=new Rw(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,Ct.U)(d=>i={...d,guards:kA(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function rb(n,e){return(0,li.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?Je({...t,guardsResult:!0}):function ib(n,e,t,r){return(0,pn.D)(n).pipe((0,li.z)(i=>function LA(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Je(o.map(d=>{const g=ff(e)??i,y=Wo(d,g);return Bo(function nb(n){return n&&mg(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):g.runInContext(()=>y(n,e,t,r))).pipe(Al())})).pipe(gf()):Je(!0)}(i.component,i.route,t,e,r)),Al(i=>!0!==i,!0))}(u,r,i,n).pipe((0,li.z)(d=>d&&function eb(n){return"boolean"==typeof n}(d)?function OA(n,e,t,r){return(0,pn.D)(e).pipe(Md(i=>ng(function sb(n,e){return null!==n&&e&&e(new $C(n)),Je(!0)}(i.route.parent,r),function Rs(n,e){return null!==n&&e&&e(new O_(n)),Je(!0)}(i.route,r),function Rk(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function j_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>vw(()=>Je(u.guards.map(g=>{const y=ff(u.node)??t,C=Wo(g,y);return Bo(function Ww(n){return n&&mg(n.canActivateChild)}(C)?C.canActivateChild(r,n):y.runInContext(()=>C(r,n))).pipe(Al())})).pipe(gf())));return Je(o).pipe(gf())}(n,i.path,t),function FA(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const i=r.map(o=>vw(()=>{const u=ff(e)??t,d=Wo(o,u);return Bo(function Gw(n){return n&&mg(n.canActivate)}(d)?d.canActivate(e,n):u.runInContext(()=>d(e,n))).pipe(Al())}));return Je(i).pipe(gf())}(n,i.route,t))),Al(i=>!0!==i,!0))}(r,o,n,e):Je(d)),(0,Ct.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ei.b)(d=>{if(i.guardsResult=d.guardsResult,uf(d.guardsResult))throw Vw(0,d.guardsResult);const g=new Ik(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),Uo(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),aE(d=>{if(d.guards.canActivateChecks.length)return Je(d).pipe((0,Ei.b)(g=>{const y=new Nw(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),An(g=>{let y=!1;return Je(g).pipe(function Q_(n,e){return(0,li.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Je(t);let o=0;return(0,pn.D)(i).pipe(Md(u=>function J_(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!oE(i)&&(o[rf]=i.title),function vg(n,e,t,r){const i=function zA(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Je({});const o={};return(0,pn.D)(i).pipe((0,li.z)(u=>function sE(n,e,t,r){const i=ff(e)??r,o=Wo(n,i);return Bo(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[u],e,t,r).pipe(Al(),(0,Ei.b)(d=>{o[u]=d}))),og(1),function IC(n){return(0,Ct.U)(()=>n)}(o),xl(u=>qw(u)?Ad.E:ig(u)))}(o,n,e,r).pipe((0,Ct.U)(u=>(n._resolvedData=u,n.data=pg(n,t).resolve,i&&oE(i)&&(n.data[rf]=i.title),null)))}(u.route,r,n,e)),(0,Ei.b)(()=>o++),og(1),(0,li.z)(u=>o===i.length?Je(t):Ad.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ei.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Ei.b)(g=>{const y=new DA(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),aE(d=>{const g=y=>{const C=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Ei.b)(D=>{y.component=D}),(0,Ct.U)(()=>{})));for(const D of y.children)C.push(...g(D));return C};return oA(g(d.targetSnapshot.root)).pipe(I_(),xd(1))}),aE(()=>this.afterPreactivation()),(0,Ct.U)(d=>{const g=function xA(n,e,t){const r=hf(n,e._root,t?t._root:void 0);return new AA(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:g}}),(0,Ei.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new PA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ei.b)({next(){o=!0},complete(){o=!0}}),C_(()=>{o||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),xl(d=>{if(u=!0,V_(d)){KC(d)||(this.navigated=!0,this.restoreHistory(i,!0));const g=new k_(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(g),KC(d)){const y=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||tx(i.source)};this.scheduleNavigation(y,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new Mw(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(g);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return Ad.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const d={...o};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(gg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:u,queryParamsHandling:d,preserveFragment:g}=r,y=i||this.routerState.root,C=g?this.currentUrlTree.fragment:u;let D=null;switch(d){case"merge":D={...this.currentUrlTree.queryParams,...o};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=o||null}return null!==D&&(D=this.removeEmptyProps(D)),Aw(y,this.currentUrlTree,t,D,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=uf(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Vd(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...JA}:!1===r?{...XA}:r,uf(t))return T_(this.currentUrlTree,t,i);const o=this.parseUrl(t);return T_(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new tc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,u){if(this.disposed)return Promise.resolve(!1);let d,g,y;u?(d=u.resolve,g=u.reject,y=u.promise):y=new Promise((M,O)=>{d=M,g=O});const C=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:C,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:d,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new k_(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return pb()},providedIn:"root"}),n})();function tx(n){return"imperative"!==n}let Ol=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Tr.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_r),f.Y36(Go),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class gb{}let Ii=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Uo(t=>t instanceof tc),Md(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,f.MMx)(o.providers,t,`Route: ${o.path}`));const u=o._injector??t,d=o._loadedInjector??u;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(u,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(d,o.children??o._loadedRoutes))}return(0,pn.D)(i).pipe((0,is.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const o=i.pipe((0,li.z)(u=>null===u?Je(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,pn.D)([o,u]).pipe((0,is.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_r),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(gb),f.LFG(ey))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ll=new f.OlP("");let wg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pw&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Pw(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function qo(n,e){return{\u0275kind:n,\u0275providers:e}}function rc(n){return[{provide:lE,multi:!0,useValue:n}]}function Bd(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(_r),i=n.get(jd);1===n.get(ic)&&r.initialNavigation(),n.get(hE,null,f.XFs.Optional)?.setUpPreloading(),n.get(Ll,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const jd=new f.OlP("",{factory:()=>new Tr.x}),ic=new f.OlP("",{providedIn:"root",factory:()=>1});const hE=new f.OlP("");function yb(n){return qo(0,[{provide:hE,useExisting:Ii},{provide:gb,useExisting:n}])}const fE=new f.OlP("ROUTER_FORROOT_GUARD"),vb=[Me,{provide:NC,useClass:Dw},{provide:_r,useFactory:pb},U_,{provide:Go,useFactory:function Ud(n){return n.routerState.root},deps:[_r]},ey];function wb(){return new f.PXZ("Router",_r)}let Eb=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[vb,[],rc(t),{provide:fE,useFactory:ax,deps:[[_r,new f.FiY,new f.tp0]]},{provide:X_,useValue:r||{}},r?.useHash?{provide:ve,useClass:ot}:{provide:ve,useClass:tt},{provide:Ll,useFactory:()=>{const n=(0,f.f3M)(_r),e=(0,f.f3M)(lu),t=(0,f.f3M)(X_);return t.scrollOffset&&e.setOffset(t.scrollOffset),new wg(n,e,t)}},r?.preloadingStrategy?yb(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:wb},r?.initialNavigation?pE(r):[],[{provide:ny,useFactory:Bd},{provide:f.tb,multi:!0,useExisting:ny}]]}}static forChild(t){return{ngModule:n,providers:[rc(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fE,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[YC]}),n})();function ax(n){return"guarded"}function pE(n){return["disabled"===n.initialNavigation?qo(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(_r);return()=>{e.setUpLocationChangeListener()}}},{provide:ic,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?qo(2,[{provide:ic,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get($,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(o=>{const u=e.get(_r),d=e.get(jd);(function i(o){e.get(_r).events.pipe(Uo(d=>d instanceof tc||d instanceof k_||d instanceof Mw),(0,Ct.U)(d=>d instanceof tc||d instanceof k_&&(0===d.code||1===d.code)&&null),Uo(d=>null!==d),xd(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),u.afterPreactivation=()=>(o(!0),r||d.closed?Je(void 0):d),u.initialNavigation()}))}}]).\u0275providers:[]]}const ny=new f.OlP("");var Ef=V(4986),on=V(5813);function mE(){return(0,Sr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Dr.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Cg(n,e=tf.y){return n=n??ry,(0,Sr.e)((t,r)=>{let i,o=!0;t.subscribe((0,Dr.x)(r,u=>{const d=e(u);(o||!n(i,d))&&(o=!1,i=d,r.next(u))}))})}function ry(n,e){return n===e}var rt,Ar=V(2011),bg=(V(2274),V(3942)),we=V(5861),Ci=V(9681),Ns=V(4859),co=V(1877),k=V(2090),Cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ka={},iy=iy||{},kt=Cb||self;function sy(){}function _E(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function If(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var oy="closure_uid_"+(1e9*Math.random()>>>0),bb=0;function Tb(n,e,t){return n.call.apply(n.bind,arguments)}function Db(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function qr(n,e,t){return(qr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Tb:Db).apply(null,arguments)}function Tg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Kr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function Vl(){this.s=this.s,this.o=this.o}var cx={};Vl.prototype.s=!1,Vl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function yE(n){return Object.prototype.hasOwnProperty.call(n,oy)&&n[oy]||(n[oy]=++bb)}(this);delete cx[n]}},Vl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Sb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},vE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&e.call(t,i[o],o,n)};function xr(n){return Array.prototype.concat.apply([],arguments)}function ay(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ly(n){return/^[\s\xa0]*$/.test(n)}var Ti,Ab=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function bi(n,e){return-1!=n.indexOf(e)}function wE(n,e){return n<e?-1:n>e?1:0}e:{var EE=kt.navigator;if(EE){var Hd=EE.userAgent;if(Hd){Ti=Hd;break e}}Ti=""}function IE(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function xb(n){const e={};for(const t in n)e[t]=n[t];return e}var CE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<CE.length;o++)t=CE[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function uy(n){return uy[" "](n),n}uy[" "]=sy;var ss,n,bE=bi(Ti,"Opera"),sc=bi(Ti,"Trident")||bi(Ti,"MSIE"),Ko=bi(Ti,"Edge"),TE=Ko||sc,DE=bi(Ti,"Gecko")&&!(bi(Ti.toLowerCase(),"webkit")&&!bi(Ti,"Edge"))&&!(bi(Ti,"Trident")||bi(Ti,"MSIE"))&&!bi(Ti,"Edge"),Oa=bi(Ti.toLowerCase(),"webkit")&&!bi(Ti,"Edge");function ho(){var n=kt.document;return n?n.documentMode:void 0}e:{var cy="",dy=(n=Ti,DE?/rv:([^\);]+)(\)|;)/.exec(n):Ko?/Edge\/([\d\.]+)/.exec(n):sc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Oa?/WebKit\/(\S+)/.exec(n):bE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(dy&&(cy=dy?dy[1]:""),sc){var SE=ho();if(null!=SE&&SE>parseFloat(cy)){ss=String(SE);break e}}ss=cy}var hx={};var Dg=kt.document&&sc&&(ho()||parseInt(ss,10))||void 0,px=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",sy,e),kt.removeEventListener("test",sy,e)}catch{}return n}();function ui(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Sg(n,e){if(ui.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(DE){e:{try{uy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Rb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sg.Z.h.call(this)}}ui.prototype.h=function(){this.defaultPrevented=!0},Kr(Sg,ui);var Rb={2:"touch",3:"pen",4:"mouse"};Sg.prototype.h=function(){Sg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Cf="closure_listenable_"+(1e6*Math.random()|0),fy=0;function gx(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++fy,this.ca=this.fa=!1}function Ag(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function xg(n){this.src=n,this.g={},this.h=0}function Mg(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=Sb(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Ag(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function bf(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==e&&o.capture==!!t&&o.ia==r)return i}return-1}xg.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=bf(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new gx(e,this.src,o,!!r,i)).fa=t,n.push(e)),e};var py="closure_lm_"+(1e6*Math.random()|0),gy={};function xE(n,e,t,r,i){if(r&&r.once)return RE(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xE(n,e[o],t,r,i);return null}return t=OE(t),n&&n[Cf]?n.N(e,t,If(r)?!!r.capture:!!r,i):ME(n,e,t,!1,r,i)}function ME(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var u=If(i)?!!i.capture:!!i,d=PE(n);if(d||(n[py]=d=new xg(n)),(t=d.add(e,t,r,u,o)).proxy)return t;if(r=function Nb(){var e=mx;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)px||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Pb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function RE(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)RE(n,e[o],t,r,i);return null}return t=OE(t),n&&n[Cf]?n.O(e,t,If(r)?!!r.capture:!!r,i):ME(n,e,t,!0,r,i)}function NE(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)NE(n,e[o],t,r,i);else r=If(r)?!!r.capture:!!r,t=OE(t),n&&n[Cf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=bf(o=n.g[e],t,r,i))&&(Ag(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=PE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=bf(e,t,r,i)),(t=-1<n?e[n]:null)&&my(t))}function my(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Cf])Mg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Pb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=PE(e))?(Mg(t,n),0==t.h&&(t.src=null,e[py]=null)):Ag(n)}}}function Pb(n){return n in gy?gy[n]:gy[n]="on"+n}function mx(n,e){if(n.ca)n=!0;else{e=new Sg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&my(n),n=t.call(r,e)}return n}function PE(n){return(n=n[py])instanceof xg?n:null}var kE="__closure_events_fn_"+(1e9*Math.random()>>>0);function OE(n){return"function"==typeof n?n:(n[kE]||(n[kE]=function(e){return n.handleEvent(e)}),n[kE])}function Zr(){Vl.call(this),this.i=new xg(this),this.P=this,this.I=null}function ci(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ui(e,n);else if(e instanceof ui)e.target=e.target||n;else{var i=e;Mb(e=new ui(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];i=_y(u,r,!0,e)&&i}if(i=_y(u=e.g=n,r,!0,e)&&i,i=_y(u,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=_y(u=e.g=t[o],r,!1,e)&&i}function _y(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.ca&&u.capture==t){var d=u.listener,g=u.ia||u.src;u.fa&&Mg(n.i,u),i=!1!==d.call(g,r)&&i}}return i&&!r.defaultPrevented}Kr(Zr,Vl),Zr.prototype[Cf]=!0,Zr.prototype.removeEventListener=function(n,e,t,r){NE(this,n,e,t,r)},Zr.prototype.M=function(){if(Zr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ag(t[r]);delete n.g[e],n.h--}}this.I=null},Zr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var FE=kt.JSON.stringify;function _x(){var n=BE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var VE,kb=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new vx,n=>n.reset());class vx{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wx(n){kt.setTimeout(()=>{throw n},0)}function LE(n,e){VE||function Ex(){var n=kt.Promise.resolve(void 0);VE=function(){n.then(Ob)}}(),UE||(VE(),UE=!0),BE.add(n,e)}var UE=!1,BE=new class yx{constructor(){this.h=this.g=null}add(e,t){const r=kb.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ob(){for(var n;n=_x();){try{n.h.call(n.g)}catch(t){wx(t)}var e=kb;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}UE=!1}function Rg(n,e){Zr.call(this),this.h=n||1,this.g=e||kt,this.j=qr(this.kb,this),this.l=Date.now()}function yy(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function vy(n,e,t){if("function"==typeof n)t&&(n=qr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=qr(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function jE(n){n.g=vy(()=>{n.g=null,n.i&&(n.i=!1,jE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kr(Rg,Zr),(rt=Rg.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ci(this,"tick"),this.da&&(yy(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){Rg.Z.M.call(this),yy(this),delete this.g};class Fb extends Vl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jE(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tf(n){Vl.call(this),this.h=n,this.g={}}Kr(Tf,Vl);var HE=[];function $E(n,e,t,r){Array.isArray(t)||(t&&(HE[0]=t.toString()),t=HE);for(var i=0;i<t.length;i++){var o=xE(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function wy(n){IE(n.g,function(e,t){this.g.hasOwnProperty(t)&&my(e)},n),n.g={}}function Fa(){this.g=!0}function Zo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function GE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<i.length;u++)i[u]=""}}}return FE(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Tf.prototype.M=function(){Tf.Z.M.call(this),wy(this)},Tf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fa.prototype.Aa=function(){this.g=!1},Fa.prototype.info=function(){};var Df={},WE=null;function Ng(){return WE=WE||new Zr}function bx(n){ui.call(this,Df.Ma,n)}function yt(n){const e=Ng();ci(e,new bx(e,n))}function Lb(n,e){ui.call(this,Df.STAT_EVENT,n),this.stat=e}function Ui(n){const e=Ng();ci(e,new Lb(e,n))}function Vb(n,e){ui.call(this,Df.Na,n),this.size=e}function La(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}Df.Ma="serverreachability",Kr(bx,ui),Df.STAT_EVENT="statevent",Kr(Lb,ui),Df.Na="timingevent",Kr(Vb,ui);var Ey={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Pg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Sf(){}function Tx(){}Sf.prototype.h=null;var Cy,Af={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Iy(){ui.call(this,"d")}function zE(){ui.call(this,"c")}function kg(){}function xf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Tf(this),this.P=Dx,this.W=new Rg(n=TE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qE}function qE(){this.i=null,this.g="",this.h=!1}Kr(Iy,ui),Kr(zE,ui),Kr(kg,Sf),kg.prototype.g=function(){return new XMLHttpRequest},kg.prototype.i=function(){return{}},Cy=new kg;var Dx=45e3,KE={},by={};function $d(n,e,t){n.K=1,n.v=Lg(Ul(e)),n.s=t,n.U=!0,Ub(n,null)}function Ub(n,e){n.F=Date.now(),Mf(n),n.A=Ul(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Gb(t.h,"t",r),n.C=0,t=n.l.H,n.h=new qE,n.g=aT(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Fb(qr(n.Ia,n,n.g),n.O)),$E(n.V,n.g,"readystatechange",n.gb),e=n.H?xb(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),yt(1),function Ix(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var u="",d=o.split("&"),g=0;g<d.length;g++){var y=d[g].split("=");if(1<y.length){var C=y[0];y=y[1];var D=C.split("_");u=2<=D.length&&"type"==D[1]?u+(C+"=")+y+"&":u+(C+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Bb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function jb(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Ty(n,t),i==by){4==e&&(n.o=4,Ui(14),r=!1),Zo(n.j,n.m,null,"[Incomplete Response]");break}if(i==KE){n.o=4,Ui(15),Zo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zo(n.j,n.m,i,null),Gd(n,i)}Bb(n)&&i!=by&&i!=KE&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Wg(e),e.L=!0,Ui(11))):(Zo(n.j,n.m,t,"[Invalid Chunked Response]"),Yo(n),Fg(n))}function Ty(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?by:(t=Number(e.substring(t,r)),isNaN(t)?KE:(r+=1)+t>e.length?by:(e=e.substr(r,t),n.C=r+t,e))}function Mf(n){n.Y=Date.now()+n.P,ZE(n,n.P)}function ZE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=La(qr(n.eb,n),e)}function Og(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function Fg(n){0==n.l.G||n.I||h0(n.l,n)}function Yo(n){Og(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,yy(n.W),wy(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Gd(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||e0(t.i,n)))if(t.I=n.N,!n.J&&e0(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;zg(t),Bl(t)}Ly(t),Ui(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=La(qr(t.ab,t),6e3));if(1>=xy(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Kd(t,11)}else if((n.J||t.g==n)&&zg(t),!ly(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(t.K=r=1.5*M,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const O=n.g;if(O){const U=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var o=r.i;!o.g&&(bi(U,"spdy")||bi(U,"quic")||bi(U,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(My(o,o.h),o.h=null))}if(r.D){const J=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(r.sa=J,er(r.F,r.D,J))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=oT(r,r.H?r.la:null,r.W),u.J){t0(r.i,u);var d=u,g=r.K;g&&d.setTimeout(g),d.B&&(Og(d),Mf(d)),r.g=u}else iT(r);0<t.l.length&&c0(t)}else"stop"!=y[0]&&"close"!=y[0]||Kd(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Kd(t,7):ky(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}yt(4)}catch{}}function YE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(_E(n)||"string"==typeof n)vE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(_E(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Sx(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(_E(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}}function Rf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Rf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Dy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];oc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)oc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function oc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=xf.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==Va(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const C=Va(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||TE||this.g&&(this.h.h||this.g.ga()||Py(this.g)))){this.I||4!=C||7==e||yt(8==e||0>=D?3:2),Og(this);var t=this.g.ba();this.N=t;t:if(Bb(this)){var r=Py(this.g);n="";var i=r.length,o=4==Va(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yo(this),Fg(this);var u="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function Cx(n,e,t,r,i,o,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ly(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ui(12),Yo(this),Fg(this);break e}Zo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gd(this,t)}this.U?(jb(this,C,u),TE&&this.i&&3==C&&($E(this.V,this.W,"tick",this.fb),this.W.start())):(Zo(this.j,this.m,u,null),Gd(this,u)),4==C&&Yo(this),this.i&&!this.I&&(4==C?h0(this.l,this):(this.i=!1,Mf(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ui(12)):(this.o=0,Ui(13)),Yo(this),Fg(this)}}}catch{}},rt.fb=function(){if(this.g){var n=Va(this.g),e=this.g.ga();this.C<e.length&&(Og(this),jb(this,n,e),this.i&&4!=n&&Mf(this))}},rt.cancel=function(){this.I=!0,Yo(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Bk(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(yt(3),Ui(17)),Yo(this),this.o=2,Fg(this)):ZE(this,this.Y-n)},(rt=Rf.prototype).R=function(){Dy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return Dy(this),this.g.concat()},rt.get=function(n,e){return oc(this.h,n)?this.h[n]:e},rt.set=function(n,e){oc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],o=this.get(i);n.call(e,o,i,this)}};var QE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ac(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ac){this.g=void 0!==e?e:n.g,Sy(this,n.j),this.s=n.s,JE(this,n.i),XE(this,n.m),this.l=n.l,e=n.h;var t=new Pf;t.i=e.i,e.g&&(t.g=new Rf(e.g),t.h=e.h),xx(this,t),this.o=n.o}else n&&(t=String(n).match(QE))?(this.g=!!e,Sy(this,t[1]||"",!0),this.s=Vg(t[2]||""),JE(this,t[3]||"",!0),XE(this,t[4]),this.l=Vg(t[5]||"",!0),xx(this,t[6]||"",!0),this.o=Vg(t[7]||"")):(this.g=!!e,this.h=new Pf(null,this.g))}function Ul(n){return new ac(n)}function Sy(n,e,t){n.j=t?Vg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function JE(n,e,t){n.i=t?Vg(e,!0):e}function XE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function xx(n,e,t){e instanceof Pf?(n.h=e,function Ox(n,e){e&&!n.j&&(lc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&($b(this,r),Gb(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Nf(e,Px)),n.h=new Pf(e,n.g))}function er(n,e,t){n.h.set(e,t)}function Lg(n){return er(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Vg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Nf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ug),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ug(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ac.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Nf(e,Hb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Nf(e,Hb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Nf(t,"/"==t.charAt(0)?Nx:Rx,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Nf(t,kx)),n.join("")};var Hb=/[#\/\?@]/g,Rx=/[#\?:]/g,Nx=/[#\?]/g,Px=/[#\?@]/g,kx=/#/g;function Pf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function lc(n){n.g||(n.g=new Rf,n.h=0,n.i&&function Ax(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $b(n,e){lc(n),e=zd(n,e),oc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,oc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Dy(n)))}function Wd(n,e){return lc(n),e=zd(n,e),oc(n.g.h,e)}function Gb(n,e,t){$b(n,e),0<t.length&&(n.i=null,n.g.set(zd(n,e),ay(t)),n.h+=t.length)}function zd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function zb(n){this.l=n||qb,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ea&&kt.g.Ea()&&kt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Pf.prototype).add=function(n,e){lc(this),this.i=null,n=zd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){lc(this),this.g.forEach(function(t,r){vE(t,function(i){n.call(e,i,r,this)},this)},this)},rt.T=function(){lc(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],o=0;o<i.length;o++)t.push(e[r]);return t},rt.R=function(n){lc(this);var e=[];if("string"==typeof n)Wd(this,n)&&(e=xr(e,this.g.get(zd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=xr(e,n[t])}return e},rt.set=function(n,e){return lc(this),this.i=null,Wd(this,n=zd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var u=i;""!==r[o]&&(u+="="+encodeURIComponent(String(r[o]))),n.push(u)}}return this.i=n.join("&")};var qb=10;function Kb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xy(n){return n.h?1:n.g?n.g.size:0}function e0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function My(n,e){n.g?n.g.add(e):n.h=e}function t0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Zb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ay(n.i)}function n0(){}function Fx(){this.g=new n0}function r0(n,e,t){const r=t||"";try{YE(n,function(i,o){let u=i;If(i)&&(u=FE(i)),e.push(r+o+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function jg(n){this.l=n.$b||null,this.j=n.ib||!1}function Ry(n,e){Zr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=s0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zb.prototype.cancel=function(){if(this.i=Zb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},n0.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},n0.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},Kr(jg,Sf),jg.prototype.g=function(){return new Ry(this.l,this.j)},jg.prototype.i=function(n){return function(){return n}}({}),Kr(Ry,Zr);var s0=0;function Yb(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Hg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$g(n)}function $g(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=Ry.prototype).open=function(n,e){if(this.readyState!=s0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,$g(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hg(this)),this.readyState=s0},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$g(this)),this.g&&(this.readyState=3,$g(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Yb(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Hg(this):$g(this),3==this.readyState&&Yb(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,Hg(this))},rt.Ta=function(n){this.g&&(this.response=n,Hg(this))},rt.ha=function(){this.g&&Hg(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ry.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Vx=kt.JSON.parse;function Mr(n){Zr.call(this),this.headers=new Rf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=o0,this.K=this.L=!1}Kr(Mr,Zr);var o0="",Qb=/^https?$/i,Ux=["POST","PUT"];function Jb(n){return"content-type"==n.toLowerCase()}function Xb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,eT(n),kf(n)}function eT(n){n.D||(n.D=!0,ci(n,"complete"),ci(n,"error"))}function tT(n){if(n.h&&typeof iy<"u"&&(!n.C[1]||4!=Va(n)||2!=n.ba()))if(n.v&&4==Va(n))vy(n.Fa,0,n);else if(ci(n,"readystatechange"),4==Va(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(QE)[1]||null;if(!i&&kt.self&&kt.self.location){var o=kt.self.location.protocol;i=o.substr(0,o.length-1)}r=!Qb.test(i?i.toLowerCase():"")}t=r}if(t)ci(n,"complete"),ci(n,"success");else{n.m=6;try{var u=2<Va(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.ba()+"]",eT(n)}}finally{kf(n)}}}function kf(n,e){if(n.g){Ny(n);const t=n.g,r=n.C[0]?sy:null;n.g=null,n.C=null,e||ci(n,"ready");try{t.onreadystatechange=r}catch{}}}function Ny(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function Va(n){return n.g?n.g.readyState:0}function Py(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case o0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function a0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function jx(n){let e="";return IE(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):er(n,e,t))}function qd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function nT(n){this.za=0,this.l=[],this.h=new Fa,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=qd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=qd("baseRetryDelayMs",5e3,n),this.$a=qd("retryDelaySeedMs",1e4,n),this.Ya=qd("forwardChannelMaxRetries",2,n),this.ra=qd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new zb(n&&n.concurrentRequestLimit),this.Ca=new Fx,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ky(n){if(l0(n),3==n.G){var e=n.V++,t=Ul(n.F);er(t,"SID",n.J),er(t,"RID",e),er(t,"TYPE","terminate"),Gg(n,t),(e=new xf(n,n.h,e,void 0)).K=2,e.v=Lg(Ul(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=aT(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Mf(e)}sT(n)}function Bl(n){n.g&&(Wg(n),n.g.cancel(),n.g=null)}function l0(n){Bl(n),n.u&&(kt.clearTimeout(n.u),n.u=null),zg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function u0(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&c0(n)}function c0(n){Kb(n.i)||n.m||(n.m=!0,LE(n.Ha,n),n.C=0)}function Oy(n,e){var t;t=e?e.m:n.V++;const r=Ul(n.F);er(r,"SID",n.J),er(r,"RID",t),er(r,"AID",n.U),Gg(n,r),n.o&&n.s&&a0(r,n.o,n.s),t=new xf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Fy(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),My(n.i,t),$d(t,r,e)}function Gg(n,e){n.j&&YE({},function(t,r){er(e,r,t)})}function Fy(n,e,t){t=Math.min(n.l.length,t);var r=n.j?qr(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=i[0].h,u.push("ofs="+o)):o=0:u.push("ofs="+o);let d=!0;for(let g=0;g<t;g++){let y=i[g].h;const C=i[g].g;if(y-=o,0>y)o=Math.max(0,i[g].h-100),d=!1;else try{r0(C,u,"req"+y+"_")}catch{r&&r(C)}}if(d){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function iT(n){n.g||n.u||(n.Y=1,LE(n.Ga,n),n.A=0)}function Ly(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=La(qr(n.Ga,n),f0(n,n.A)),n.A++,0))}function Wg(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function d0(n){n.g=new xf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ul(n.oa);er(e,"RID","rpc"),er(e,"SID",n.J),er(e,"CI",n.N?"0":"1"),er(e,"AID",n.U),Gg(n,e),er(e,"TYPE","xmlhttp"),n.o&&n.s&&a0(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Lg(Ul(e)),t.s=null,t.U=!0,Ub(t,n)}function zg(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function h0(n,e){var t=null;if(n.g==e){zg(n),Wg(n),n.g=null;var r=2}else{if(!e0(n.i,e))return;t=e.D,t0(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ci(r=Ng(),new Vb(r,t,e,i)),c0(n)}else iT(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function rT(n,e){return!(xy(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=La(qr(n.Ha,n,e),f0(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ly(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Kd(n,5);break;case 4:Kd(n,10);break;case 3:Kd(n,6);break;default:Kd(n,2)}}function f0(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Kd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=qr(n.jb,n);t||(t=new ac("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||Sy(t,"https"),Lg(t)),function Lx(n,e){const t=new Fa;if(kt.Image){const r=new Image;r.onload=Tg(Bg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Tg(Bg,t,r,"TestLoadImage: error",!1,e),r.onabort=Tg(Bg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Tg(Bg,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ui(2);n.G=0,n.j&&n.j.va(e),sT(n),l0(n)}function sT(n){n.G=0,n.I=-1,n.j&&((0!=Zb(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ay(n.l),n.l.length=0),n.j.ua())}function oT(n,e,t){let r=function Ay(n){return n instanceof ac?Ul(n):new ac(n,void 0)}(t);if(""!=r.i)e&&JE(r,e+"."+r.i),XE(r,r.m);else{const i=kt.location;r=function Mx(n,e,t,r){var i=new ac(null,void 0);return n&&Sy(i,n),e&&JE(i,e),t&&XE(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&IE(n.aa,function(i,o){er(r,o,i)}),t=n.sa,(e=n.D)&&t&&er(r,e,t),er(r,"VER",n.ma),Gg(n,r),r}function aT(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mr(t&&n.Ba&&!n.qa?new jg({ib:!0}):n.qa)).L=n.H,e}function p0(){}function g0(){if(sc&&!(10<=Number(Dg)))throw Error("Environmental error: no available transport.")}function os(n,e){Zr.call(this),this.g=new nT(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ly(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ly(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new qg(this)}function lT(n){Iy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function uT(){zE.call(this),this.status=1}function qg(n){this.g=n}(rt=Mr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cy.g(),this.C=function Xn(n){return n.h||(n.h=n.i())}(this.u?this.u:Cy),this.g.onreadystatechange=qr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void Xb(this,o)}n=t||"";const i=new Rf(this.headers);r&&YE(r,function(o,u){i.set(u,o)}),r=function dx(n){e:{var e=Jb;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=kt.FormData&&n instanceof kt.FormData,!(0<=Sb(Ux,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,u){this.g.setRequestHeader(u,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ny(this),0<this.B&&((this.K=function Bx(n){return sc&&function fx(){return function Uk(n){var e=hx;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Ab(String(ss)).split("."),t=Ab("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",o=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=wE(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||wE(0==i[2].length,0==o[2].length)||wE(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qr(this.pa,this)):this.A=vy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){Xb(this,o)}},rt.pa=function(){typeof iy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ci(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ci(this,"complete"),ci(this,"abort"),kf(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kf(this,!0)),Mr.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?tT(this):this.cb())},rt.cb=function(){tT(this)},rt.ba=function(){try{return 2<Va(this)?this.g.status:-1}catch{return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Vx(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=nT.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new xf(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=xb(o),Mb(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fy(this,i,e),er(t=Ul(this.F),"RID",n),er(t,"CVER",22),this.D&&er(t,"X-HTTP-Session-Id",this.D),Gg(this,t),this.o&&o&&a0(t,this.o,o),My(this.i,i),this.Ra&&er(t,"TYPE","init"),this.ja?(er(t,"$req",e),er(t,"SID","null"),i.$=!0,$d(i,t,null)):$d(i,t,e),this.G=2}}else 3==this.G&&(n?Oy(this,n):0==this.l.length||Kb(this.i)||Oy(this))},rt.Ga=function(){if(this.u=null,d0(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=La(qr(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ui(10),Bl(this),d0(this))},rt.ab=function(){null!=this.v&&(this.v=null,Bl(this),Ly(this),Ui(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ui(2)):(this.h.info("Failed to ping google.com"),Ui(1))},(rt=p0.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},g0.prototype.g=function(n,e){return new os(n,e)},Kr(os,Zr),os.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),LE(qr(n.hb,n,e))),Ui(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=oT(n,null,n.W),c0(n)},os.prototype.close=function(){ky(this.g)},os.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,u0(this.g,e)}else this.v?((e={}).__data__=FE(n),u0(this.g,e)):u0(this.g,n)},os.prototype.M=function(){this.g.j=null,delete this.j,ky(this.g),delete this.g,os.Z.M.call(this)},Kr(lT,Iy),Kr(uT,zE),Kr(qg,p0),qg.prototype.xa=function(){ci(this.g,"a")},qg.prototype.wa=function(n){ci(this.g,new lT(n))},qg.prototype.va=function(n){ci(this.g,new uT(n))},qg.prototype.ua=function(){ci(this.g,"b")},g0.prototype.createWebChannel=g0.prototype.g,os.prototype.send=os.prototype.u,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,Ey.NO_ERROR=0,Ey.TIMEOUT=8,Ey.HTTP_ERROR=6,Pg.COMPLETE="complete",Tx.EventType=Af,Af.OPEN="a",Af.CLOSE="b",Af.ERROR="c",Af.MESSAGE="d",Zr.prototype.listen=Zr.prototype.N,Mr.prototype.listenOnce=Mr.prototype.O,Mr.prototype.getLastError=Mr.prototype.La,Mr.prototype.getLastErrorCode=Mr.prototype.Da,Mr.prototype.getStatus=Mr.prototype.ba,Mr.prototype.getResponseJson=Mr.prototype.Qa,Mr.prototype.getResponseText=Mr.prototype.ga,Mr.prototype.send=Mr.prototype.ea;var jk=ka.createWebChannelTransport=function(){return new g0},Hx=ka.getStatEventTarget=function(){return Ng()},m0=ka.ErrorCode=Ey,$x=ka.EventType=Pg,cT=ka.Event=Df,dT=ka.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Gx=ka.FetchXmlHttpFactory=jg,Vy=ka.WebChannel=Tx,Wx=ka.XhrIo=Mr;const hT="@firebase/firestore";class Yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yr.UNAUTHENTICATED=new Yr(null),Yr.GOOGLE_CREDENTIALS=new Yr("google-credentials-uid"),Yr.FIRST_PARTY=new Yr("first-party-uid"),Yr.MOCK_USER=new Yr("mock-user");let Of="9.9.4";const uc=new co.Yd("@firebase/firestore");function Zd(){return uc.logLevel}function Pe(n,...e){if(uc.logLevel<=co.in.DEBUG){const t=e.map(Uy);uc.debug(`Firestore (${Of}): ${n}`,...t)}}function ar(n,...e){if(uc.logLevel<=co.in.ERROR){const t=e.map(Uy);uc.error(`Firestore (${Of}): ${n}`,...t)}}function cc(n,...e){if(uc.logLevel<=co.in.WARN){const t=e.map(Uy);uc.warn(`Firestore (${Of}): ${n}`,...t)}}function Uy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Of}) INTERNAL ASSERTION FAILED: `+n;throw ar(e),new Error(e)}function xt(n,e){n||st()}function Qe(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yr.UNAUTHENTICATED))}shutdown(){}}class zx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _0{constructor(e){this.t=e,this.currentUser=Yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Qr,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable((0,we.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},g=y=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Qr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new pT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new Yr(e)}}class Ua{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Yr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(xt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class qx{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new Ua(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class By{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zg{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=o=>{null!=o.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.A;return this.A=o.token,Pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?i(o):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.A=t.token,new By(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class gT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Kx(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function jl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mT(n){return n+"\0"}class jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jn.fromMillis(Date.now())}static fromDate(e){return jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new jn(0,0))}static max(){return new Tt(new jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ff{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ff.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ff?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),u=t.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Ff{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const _T=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Ff{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return _T.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ne(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Ne(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ne(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(o(),i++)}if(o(),u)throw new Ne(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(Jt.fromString(e))}static fromName(e){return new Ke(Jt.fromString(e).popFirst(5))}static empty(){return new Ke(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new Jt(e.slice()))}}class y0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Yg(n){return n.fields.find(e=>2===e.kind)}function Hl(n){return n.fields.filter(e=>2!==e.kind)}y0.UNKNOWN_ID=-1;class Lf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qg(0,Ps.min())}}function vT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new jn(t+1,0):new jn(t,r));return new Ps(i,Ke.empty(),e)}function wT(n){return new Ps(n.readTime,n.key,-1)}class Ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ps(Tt.min(),Ke.empty(),-1)}static max(){return new Ps(Tt.max(),Ke.empty(),-1)}}function jy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}const Hy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function dc(n){return $y.apply(this,arguments)}function $y(){return $y=(0,we.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==Hy)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),$y.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,o=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++o,u&&o===i&&t()},g=>r(g))}),u=!0,o===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const o=e.length,u=new Array(o);let d=0;for(let g=0;g<o;g++){const y=g;t(e[y]).next(C=>{u[y]=C,++d,d===o&&r(u)},C=>i(C))}})}static doWhile(e,t){return new le((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class Gy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Qr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Jg(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=E0(r.target.error);this.P.reject(new Jg(e,i))}}static open(e,t,r,i){try{return new Gy(t,e.transaction(i,r))}catch(o){throw new Jg(t,o)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Zx(t)}}class fo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===fo.D((0,k.z$)())&&ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),yr(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,k.hl)())return!1;if(fo.N())return!0;const e=(0,k.z$)(),t=fo.D(e),r=0<t&&t<10,i=fo.k(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,we.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{r(u.target.result)},o.onblocked=()=>{i(new Jg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new Ne(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ne(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Jg(e,d))},o.onupgradeneeded=u=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,we.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{o.db=yield o.F(e);const g=Gy.open(o.db,e,u?"readonly":"readwrite",r),y=i(g).next(C=>(g.V(),C)).catch(C=>(g.abort(C),le.reject(C))).toPromise();return y.catch(()=>{}),yield g.v,y}catch(g){const y=g,C="FirebaseError"!==y.name&&d<3;if(Pe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),o.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ET{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return yr(this.U.delete())}}class Jg extends Ne{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $l(n){return"IndexedDbTransactionError"===n.name}class Zx{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yr(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),yr(this.store.add(e))}get(e){return yr(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),yr(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),yr(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.H(i,(u,d)=>{o.push(d)}).next(()=>o)}{const i=this.store.getAll(r.range);return new le((o,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{o(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(o,u,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=o=>{const u=E0(o.target.error);i(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}H(e,t){const r=[];return new le((i,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const g=new ET(d),y=t(d.primaryKey,d.value,g);if(y instanceof le){const C=y.catch(D=>(g.done(),le.reject(D)));r.push(C)}g.isDone?i():null===g.G?d.continue():d.continue(g.G)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yr(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=E0(r.target.error);t(i)}})}let Yd=!1;function E0(n){const e=fo.D((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yd||(Yd=!0,setTimeout(()=>{throw r},0)),r}}return n}class Yx{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){$l(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield dc(r)}yield t.nt(1)}))}}class Gk{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,o=!0;return le.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Pe("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(d=>{i-=d,r.add(u)});o=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,o)).next(d=>(Pe("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,o)=>{const u=wT(o);jy(u,r)>0&&(r=u)}),new Ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ks{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function I0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ks.at=-1;class ur{constructor(e,t){this.comparator=e,this.root=t||di.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,di.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uf(this.root,e,this.comparator,!0)}}class Uf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class di{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??di.RED,this.left=i??di.EMPTY,this.right=o??di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new di(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}di.EMPTY=null,di.RED=!0,di.BLACK=!1,di.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new di(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IT(this.data.getIterator())}getIteratorFrom(e){return new IT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class IT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bf(n){return n.hasNext()?n.getNext():void 0}class Os{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new Os([])}unionWith(e){let t=new vn(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Rr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const CT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(n){if(xt(!!n),"string"==typeof n){let e=0;const t=CT.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function jf(n){return"string"==typeof n?Rr.fromBase64String(n):Rr.fromUint8Array(n)}function Wy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bT(n){const e=n.mapValue.fields.__previous_value__;return Wy(e)?bT(e):e}function Hf(n){const e=Qo(n.mapValue.fields.__local_write_time__.timestampValue);return new jn(e.seconds,e.nanos)}class $f{constructor(e,t,r,i,o,u,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=g}}class fc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fc&&e.projectId===this.projectId&&e.database===this.database}}function Gf(n){return null==n}function Qd(n){return 0===n&&1/n==-1/0}function Qx(n){return"number"==typeof n&&Number.isInteger(n)&&!Qd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const pc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},b0={nullValue:"NULL_VALUE"};function Jd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wy(n)?4:A0(n)?9007199254740991:10:st()}function Ba(n,e){if(n===e)return!0;const t=Jd(n);if(t!==Jd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hf(n).isEqual(Hf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Qo(r.timestampValue),u=Qo(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,jf(n.bytesValue).isEqual(jf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Hn(r.geoPointValue.latitude)===Hn(i.geoPointValue.latitude)&&Hn(r.geoPointValue.longitude)===Hn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Hn(r.integerValue)===Hn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Hn(r.doubleValue),u=Hn(i.doubleValue);return o===u?Qd(o)===Qd(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return jl(n.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:return function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(I0(o)!==I0(u))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(void 0===u[d]||!Ba(o[d],u[d])))return!1;return!0}(n,e);default:return st()}var i}function Xg(n,e){return void 0!==(n.values||[]).find(t=>Ba(t,e))}function Gl(n,e){if(n===e)return 0;const t=Jd(n),r=Jd(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Hn(i.integerValue||i.doubleValue),d=Hn(o.integerValue||o.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return T0(n.timestampValue,e.timestampValue);case 4:return T0(Hf(n),Hf(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(i,o){const u=jf(i),d=jf(o);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),d=o.split("/");for(let g=0;g<u.length&&g<d.length;g++){const y=Mt(u[g],d[g]);if(0!==y)return y}return Mt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const u=Mt(Hn(i.latitude),Hn(o.latitude));return 0!==u?u:Mt(Hn(i.longitude),Hn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const u=i.values||[],d=o.values||[];for(let g=0;g<u.length&&g<d.length;++g){const y=Gl(u[g],d[g]);if(y)return y}return Mt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===pc.mapValue&&o===pc.mapValue)return 0;if(i===pc.mapValue)return 1;if(o===pc.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),g=o.fields||{},y=Object.keys(g);d.sort(),y.sort();for(let C=0;C<d.length&&C<y.length;++C){const D=Mt(d[C],y[C]);if(0!==D)return D;const M=Gl(u[d[C]],g[y[C]]);if(0!==M)return M}return Mt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw st()}}function T0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Qo(n),r=Qo(e),i=Mt(t.seconds,r.seconds);return 0!==i?i:Mt(t.nanos,r.nanos)}function Wf(n){return zy(n)}function zy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Qo(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?jf(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const u of r.values||[])o?o=!1:i+=",",i+=zy(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${zy(r.fields[d])}`;return o+"}"}(n.mapValue):st();var e}function gc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function D0(n){return!!n&&"integerValue"in n}function em(n){return!!n&&"arrayValue"in n}function S0(n){return!!n&&"nullValue"in n}function TT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tm(n){return!!n&&"mapValue"in n}function zf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function A0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function DT(n){return"nullValue"in n?b0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gc(fc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function Jx(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gc(fc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pc:st()}function ST(n,e){const t=Gl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Xx(n,e){const t=Gl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zf(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=zf(u):i.push(d.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());tm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){hc(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Jr(zf(this.value))}}function eM(n){const e=[];return hc(n.fields,(t,r)=>{const i=new lr([t]);if(tm(r)){const o=eM(r.mapValue).fields;if(0===o.length)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new Os(e)}class Pn{constructor(e,t,r,i,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Pn(e,0,Tt.min(),Tt.min(),Jr.empty(),0)}static newFoundDocument(e,t,r){return new Pn(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new Pn(e,2,t,Tt.min(),Jr.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,Tt.min(),Jr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wk{constructor(e,t=null,r=[],i=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=d,this.ht=null}}function tM(n,e=null,t=[],r=[],i=null,o=null,u=null){return new Wk(n,e,t,r,i,o,u)}function qf(n){const e=Qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Wf(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wf(r)).join(",")),e.ht=t}return e.ht}function qy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!iM(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ba(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NT(n.startAt,e.startAt)&&NT(n.endAt,e.endAt)}function x0(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Xd(n,e){return n.filters.filter(t=>t instanceof Nr&&t.field.isEqual(e))}function nM(n,e,t){let r=b0,i=!0;for(const o of Xd(n,e)){let u=b0,d=!0;switch(o.op){case"<":case"<=":u=DT(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,d=!1;break;case"!=":case"not-in":u=b0}ST({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];ST({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function M0(n,e,t){let r=pc,i=!0;for(const o of Xd(n,e)){let u=pc,d=!0;switch(o.op){case">=":case">":u=Jx(o.value),d=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,d=!1;break;case"!=":case"not-in":u=pc}Xx({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];Xx({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Nr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new AT(e,t,r):"array-contains"===t?new MT(e,r):"in"===t?new rM(e,r):"not-in"===t?new RT(e,r):"array-contains-any"===t?new Kk(e,r):new Nr(e,t,r)}static lt(e,t,r){return"in"===t?new xT(e,r):new qk(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Gl(t,this.value)):null!==t&&Jd(this.value)===Jd(t)&&this.ft(Gl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class AT extends Nr{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.ft(t)}}class xT extends Nr{constructor(e,t){super(e,"in",t),this.keys=Ky(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qk extends Nr{constructor(e,t){super(e,"not-in",t),this.keys=Ky(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ky(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class MT extends Nr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return em(t)&&Xg(t.arrayValue,this.value)}}class rM extends Nr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xg(this.value.arrayValue,t)}}class RT extends Nr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xg(this.value.arrayValue,t)}}class Kk extends Nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!em(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xg(this.value.arrayValue,r))}}class mc{constructor(e,t){this.position=e,this.inclusive=t}}class Kf{constructor(e,t="asc"){this.field=e,this.dir=t}}function iM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function nm(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(r=o.field.isKeyField()?Ke.comparator(Ke.fromName(u.referenceValue),t.key):Gl(u,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function NT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ba(n.position[t],e.position[t]))return!1;return!0}class _c{constructor(e,t=null,r=[],i=[],o=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=g,this._t=null,this.wt=null}}function sM(n,e,t,r,i,o,u,d){return new _c(n,e,t,r,i,o,u,d)}function rm(n){return new _c(n)}function PT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function R0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function N0(n){for(const e of n.filters)if(e.dt())return e.field;return null}function kT(n){return null!==n.collectionGroup}function Zf(n){const e=Qe(n);if(null===e._t){e._t=[];const t=N0(e),r=R0(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Kf(t)),e._t.push(new Kf(lr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e._t.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Kf(lr.keyField(),o))}}}return e._t}function Bi(n){const e=Qe(n);if(!e.wt)if("F"===e.limitType)e.wt=tM(e.path,e.collectionGroup,Zf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of Zf(e))t.push(new Kf(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new mc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new mc(e.startAt.position,e.startAt.inclusive):null;e.wt=tM(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function im(n,e,t){return new _c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zy(n,e){return qy(Bi(n),Bi(e))&&n.limitType===e.limitType}function po(n){return`${qf(Bi(n))}|lt:${n.limitType}`}function P0(n){return`Query(target=${function zk(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Wf(r.value)}`;var r}).join(", ")}]`),Gf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Wf(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Wf(t)).join(",")),`Target(${e})`}(Bi(n))}; limitType=${n.limitType})`}function sm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,u){const d=nm(i,o,u);return i.inclusive?d<=0:d<0}(t.startAt,Zf(t),r)||t.endAt&&!function(i,o,u){const d=nm(i,o,u);return i.inclusive?d>=0:d>0}(t.endAt,Zf(t),r)));var t,r}function OT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fs(n){return(e,t)=>{let r=!1;for(const i of Zf(n)){const o=oM(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function oM(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,o,u){const d=o.data.field(i),g=u.data.field(i);return null!==d&&null!==g?Gl(d,g):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function Yy(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qd(e)?"-0":e}}function FT(n){return{integerValue:""+n}}function LT(n,e){return Qx(e)?FT(e):Yy(n,e)}class Yf{constructor(){this._=void 0}}function VT(n,e,t){return n instanceof eh?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof yc?jT(n,e):n instanceof vc?HT(n,e):function(r,i){const o=BT(r,i),u=Wl(o)+Wl(r.yt);return D0(o)&&D0(r.yt)?FT(u):Yy(r.It,u)}(n,e)}function UT(n,e,t){return n instanceof yc?jT(n,e):n instanceof vc?HT(n,e):t}function BT(n,e){return n instanceof wc?D0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class eh extends Yf{}class yc extends Yf{constructor(e){super(),this.elements=e}}function jT(n,e){const t=k0(e);for(const r of n.elements)t.some(i=>Ba(i,r))||t.push(r);return{arrayValue:{values:t}}}class vc extends Yf{constructor(e){super(),this.elements=e}}function HT(n,e){let t=k0(e);for(const r of n.elements)t=t.filter(i=>!Ba(i,r));return{arrayValue:{values:t}}}class wc extends Yf{constructor(e,t){super(),this.It=e,this.yt=t}}function Wl(n){return Hn(n.integerValue||n.doubleValue)}function k0(n){return em(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class th{constructor(e,t){this.field=e,this.transform=t}}class aM{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Jy{}function $T(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new nh(n.key,tr.none()):new Jf(n.key,n.data,tr.none());{const t=n.data,r=Jr.empty();let i=new vn(lr.comparator);for(let o of e.fields)if(!i.has(o)){let u=t.field(o);null===u&&o.length>1&&(o=o.popLast(),u=t.field(o)),null===u?r.delete(o):r.set(o,u),i=i.add(o)}return new ja(n.key,r,new Os(i.toArray()),tr.none())}}function lM(n,e,t){n instanceof Jf?function(r,i,o){const u=r.value.clone(),d=Xy(r.fieldTransforms,i,o.transformResults);u.setAll(d),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof ja?function(r,i,o){if(!Qy(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Xy(r.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(uM(r)),d.setAll(u),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Qf(n,e,t,r){return n instanceof Jf?function(i,o,u,d){if(!Qy(i.precondition,o))return u;const g=i.value.clone(),y=F0(i.fieldTransforms,d,o);return g.setAll(y),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof ja?function(i,o,u,d){if(!Qy(i.precondition,o))return u;const g=F0(i.fieldTransforms,d,o),y=o.data;return y.setAll(uM(i)),y.setAll(g),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(u=t,Qy(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u);var o,u}function Zk(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=BT(r.transform,i||null);null!=o&&(null===t&&(t=Jr.empty()),t.set(r.field,o))}return t||null}function O0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&jl(t,r,(i,o)=>function zl(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof yc&&r instanceof yc||t instanceof vc&&r instanceof vc?jl(t.elements,r.elements,Ba):t instanceof wc&&r instanceof wc?Ba(t.yt,r.yt):t instanceof eh&&r instanceof eh);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Jf extends Jy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ja extends Jy{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function uM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Xy(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,d=e.data.field(o.field);r.set(o.field,UT(u,d,t[i]))}return r}function F0(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,VT(o,u,e))}return r}class nh extends Jy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ev extends Jy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GT{constructor(e){this.count=e}}var vr,Kt;function om(n){switch(n){default:return st();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function L0(n){if(void 0===n)return ar("GRPC error has no .code"),fe.UNKNOWN;switch(n){case vr.OK:return fe.OK;case vr.CANCELLED:return fe.CANCELLED;case vr.UNKNOWN:return fe.UNKNOWN;case vr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case vr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case vr.INTERNAL:return fe.INTERNAL;case vr.UNAVAILABLE:return fe.UNAVAILABLE;case vr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case vr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case vr.NOT_FOUND:return fe.NOT_FOUND;case vr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case vr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case vr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case vr.ABORTED:return fe.ABORTED;case vr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case vr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case vr.DATA_LOSS:return fe.DATA_LOSS;default:return st()}}(Kt=vr||(vr={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class Ec{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hc(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Vf(this.inner)}size(){return this.innerSize}}const WT=new ur(Ke.comparator);function ji(){return WT}const zT=new ur(Ke.comparator);function am(...n){let e=zT;for(const t of n)e=e.insert(t.key,t);return e}function cM(n){let e=zT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ql(){return lm()}function V0(){return lm()}function lm(){return new Ec(n=>n.toString(),(n,e)=>n.isEqual(e))}const dM=new ur(Ke.comparator),hM=new vn(Ke.comparator);function Ut(...n){let e=hM;for(const t of n)e=e.add(t);return e}const Yk=new vn(Mt);function U0(){return Yk}class tv{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,nv.createSynthesizedTargetChangeForCurrentChange(e,t)),new tv(Tt.min(),r,U0(),ji(),Ut())}}class nv{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t){return new nv(Rr.EMPTY_BYTE_STRING,t,Ut(),Ut(),Ut())}}class rv{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class um{constructor(e,t){this.targetId=e,this.At=t}}class qT{constructor(e,t,r=Rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class KT{constructor(){this.Rt=0,this.bt=B0(),this.Pt=Rr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ut(),t=Ut(),r=Ut();return this.bt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new nv(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=B0()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class ZT{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ji(),this.qt=Ic(),this.Kt=new vn(Mt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const o=i.target;if(x0(o))if(0===r){const u=new Ke(o.path);this.jt(t,u,Pn.newNoDocument(u,Tt.min()))}else xt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((o,u)=>{const d=this.Xt(u);if(d){if(o.current&&x0(d.target)){const g=new Ke(d.target.path);null!==this.Ut.get(g)||this.ee(u,g)||this.jt(u,g,Pn.newNoDocument(g,e))}o.Dt&&(t.set(u,o.xt()),o.Nt())}});let r=Ut();this.qt.forEach((o,u)=>{let d=!0;u.forEachWhile(g=>{const y=this.Xt(g);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(o))}),this.Ut.forEach((o,u)=>u.setReadTime(e));const i=new tv(e,t,this.Kt,this.Ut,r);return this.Ut=ji(),this.qt=Ic(),this.Kt=new vn(Mt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new KT,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new vn(Mt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new KT),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Ic(){return new ur(Ke.comparator)}function B0(){return new ur(Ke.comparator)}const j0={asc:"ASCENDING",desc:"DESCENDING"},H0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fM{constructor(e,t){this.databaseId=e,this.gt=t}}function rh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iv(n,e){return n.gt?e.toBase64():e.toUint8Array()}function sv(n,e){return rh(n,e.toTimestamp())}function hi(n){return xt(!!n),Tt.fromTimestamp(function(e){const t=Qo(e);return new jn(t.seconds,t.nanos)}(n))}function YT(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function pM(n){const e=Jt.fromString(n);return xt(vM(e)),e}function ov(n,e){return YT(n.databaseId,e.path)}function Jo(n,e){const t=pM(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(JT(t))}function $0(n,e){return YT(n.databaseId,e)}function QT(n){const e=pM(n);return 4===e.length?Jt.emptyPath():JT(e)}function cm(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JT(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function G0(n,e,t){return{name:ov(n,e),fields:t.value.mapValue.fields}}function W0(n,e,t){const r=Jo(n,e.name),i=hi(e.updateTime),o=new Jr({mapValue:{fields:e.fields}}),u=Pn.newFoundDocument(r,i,o);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function dm(n,e){let t;if(e instanceof Jf)t={update:G0(n,e.key,e.value)};else if(e instanceof nh)t={delete:ov(n,e.key)};else if(e instanceof ja)t={update:G0(n,e.key,e.data),updateMask:eO(e.fieldMask)};else{if(!(e instanceof ev))return st();t={verify:ov(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof eh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof yc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof vc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof wc)return{fieldPath:o.field.canonicalString(),increment:u.yt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:sv(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function av(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?tr.updateTime(hi(i.updateTime)):void 0!==i.exists?tr.exists(i.exists):tr.none():tr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let d=null;"setToServerValue"in u?(xt("REQUEST_TIME"===u.setToServerValue),d=new eh):"appendMissingElements"in u?d=new yc(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new vc(u.removeAllFromArray.values||[]):"increment"in u?d=new wc(o,u.increment):st();const g=lr.fromServerFormat(u.fieldPath);return new th(g,d)}(n,i)):[];var i;if(e.update){const i=Jo(n,e.update.name),o=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Os((e.updateMask.fieldPaths||[]).map(y=>lr.fromServerFormat(y)));return new ja(i,o,u,t,r)}return new Jf(i,o,t,r)}if(e.delete){const i=Jo(n,e.delete);return new nh(i,t)}if(e.verify){const i=Jo(n,e.verify);return new ev(i,t)}return st()}function mM(n,e){return{documents:[$0(n,e.path)]}}function q0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=$0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=$0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const y=g.map(C=>function(D){if("=="===D.op){if(TT(D.value))return{unaryFilter:{field:Xf(D.field),op:"IS_NAN"}};if(S0(D.value))return{unaryFilter:{field:Xf(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(TT(D.value))return{unaryFilter:{field:Xf(D.field),op:"IS_NOT_NAN"}};if(S0(D.value))return{unaryFilter:{field:Xf(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xf(D.field),op:Jk(D.op),value:D.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const o=function(g){if(0!==g.length)return g.map(y=>{return{field:Xf((C=y).field),direction:Qk(C.dir)};var C})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=(y=e.limit,n.gt||Gf(y)?y:{value:y});var y,d,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function lv(n){let e=QT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let o=[];t.where&&(o=eD(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new Kf(ep((D=C).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(C){let D;return D="object"==typeof C?C.value:C,Gf(D)?null:D}(t.limit));let g=null;var C;t.startAt&&(g=new mc((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new mc(C.values||[],!C.before)}(t.endAt)),sM(e,i,u,o,d,"F",g,y)}function eD(n){return n?void 0!==n.unaryFilter?[Xk(n)]:void 0!==n.fieldFilter?[yM(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>eD(e)).reduce((e,t)=>e.concat(t)):st():[]}function Qk(n){return j0[n]}function Jk(n){return H0[n]}function Xf(n){return{fieldPath:n.canonicalString()}}function ep(n){return lr.fromServerFormat(n.fieldPath)}function yM(n){return Nr.create(ep(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function Xk(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ep(n.unaryFilter.field);return Nr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ep(n.unaryFilter.field);return Nr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ep(n.unaryFilter.field);return Nr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ep(n.unaryFilter.field);return Nr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function eO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function as(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tD(e)),e=tO(n.get(t),e);return tD(e)}function tO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function tD(n){return n+"\x01\x01"}function Kl(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&st(),n.charAt(u+1)){case"\x01":const d=n.substring(o,u);let g;0===i.length?g=d:(i+=d,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(o,u),i+="\0";break;case"\x11":i+=n.substring(o,u+1);break;default:st()}o=u+2}return new Jt(r)}const wM=["userId","batchId"];function K0(n,e){return[n,as(e)]}function EM(n,e,t){return[n,as(e),t]}const nO={},rO=["prefixPath","collectionGroup","readTime","documentId"],s=["prefixPath","collectionGroup","documentId"],a=["collectionGroup","readTime","prefixPath","documentId"],l=["canonicalId","targetId"],c=["targetId","path"],h=["path","targetId"],m=["collectionId","parent"],w=["indexId","uid"],I=["uid","sequenceNumber"],b=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],A=["indexId","uid","orderedDocumentKey"],N=["userId","collectionPath","documentId"],L=["userId","collectionPath","largestBatchId"],K=["userId","collectionGroup","largestBatchId"],re=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],be=[...re,"documentOverlays"],ke=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ze=ke,it=[...Ze,"indexConfiguration","indexState","indexEntries"];class bt extends w0{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ce(n,e){const t=Qe(n);return fo.O(t.ie,e)}class mt{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&lM(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=V0();return this.mutations.forEach(i=>{const o=e.get(i.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=t.has(i.key)?null:d;const g=$T(u,d);null!==g&&r.set(i.key,g),u.isValidDocument()||u.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ut())}isEqual(e){return this.batchId===e.batchId&&jl(this.mutations,e.mutations,(t,r)=>O0(t,r))&&jl(this.baseMutations,e.baseMutations,(t,r)=>O0(t,r))}}class Wt{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=dM;const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new Wt(e,t,r,i)}}class Tn{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ls{constructor(e,t,r,i,o=Tt.min(),u=Tt.min(),d=Rr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class uv{constructor(e){this.re=e}}function cv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ov(i=n.re,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:rh(i,o.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Zl(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Zl(e.version)}}var i,o;return r}function tp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yl(n){const e=new jn(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Ql(n,e){const t=(e.baseMutations||[]).map(o=>av(n.re,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(u.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>av(n.re,o)),i=jn.fromMillis(e.localWriteTimeMs);return new mt(e.batchId,i,t,r)}function ih(n){const e=Yl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Yl(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=Bi(rm(QT(i.documents[0])))):r=Bi(lv(n.query)),new ls(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Rr.fromBase64String(n.resumeToken))}function dv(n,e){const t=Zl(e.snapshotVersion),r=Zl(e.lastLimboFreeSnapshotVersion);let i;i=x0(e.target)?mM(n.re,e.target):q0(n.re,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qf(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function IM(n){const e=lv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?im(e,e.limit,"L"):e}function CM(n,e){return new Tn(e.largestBatchId,av(n.re,e.overlayMutation))}function iO(n,e){const t=e.path.lastSegment();return[n,as(e.path.popLast()),t]}function sO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Zl(r.readTime),documentKey:as(r.documentKey.path),largestBatchId:r.largestBatchId}}class r2{getBundleMetadata(e,t){return oO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Yl(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return oO(e).put({bundleId:(r=t).id,createTime:Zl(hi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return aO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:IM(i.bundledQuery),readTime:Yl(i.readTime)};var i})}saveNamedQuery(e,t){return aO(e).put({name:(r=t).name,readTime:Zl(hi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function oO(n){return Ce(n,"bundles")}function aO(n){return Ce(n,"namedQueries")}class nD{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new nD(e,t.uid||"")}getOverlay(e,t){return Y0(e).get(iO(this.userId,t)).next(r=>r?CM(this.It,r):null)}getOverlays(e,t){const r=ql();return le.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,u)=>{const d=new Tn(t,u);i.push(this.ue(e,d))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(as(u.getCollectionPath())));const o=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(Y0(e).Y("collectionPathOverlayIndex",d))}),le.waitFor(o)}getOverlaysForCollection(e,t,r){const i=ql(),o=as(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Y0(e).W("collectionPathOverlayIndex",u).next(d=>{for(const g of d){const y=CM(this.It,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=ql();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Y0(e).Z({index:"collectionGroupOverlayIndex",range:d},(g,y,C)=>{const D=CM(this.It,y);o.size()<i||D.largestBatchId===u?(o.set(D.getKey(),D),u=D.largestBatchId):C.done()}).next(()=>o)}ue(e,t){return Y0(e).put(function(r,i,o){const[u,d,g]=iO(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:g,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:dm(r.re,o.mutation)}}(this.It,this.userId,t))}}function Y0(n){return Ce(n,"documentOverlays")}class hm{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Qd(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(jf(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?A0(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):st()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ke.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function i2(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function lO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=i2(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}hm.Te=new hm;class s2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=lO(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=lO(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class o2{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class a2{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Q0{constructor(){this.Be=new s2,this.Le=new o2(this.Be),this.Ue=new a2(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class fm{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fm(this.indexId,this.documentKey,this.arrayValue,r)}}function pm(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=uO(n.arrayValue,e.arrayValue),0!==t?t:(t=uO(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function uO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class l2{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Yg(e);if(void 0!==t&&!this.ze(t))return!1;const r=Hl(e);let i=0,o=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[o++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(o>=this.Ge.length||!this.Je(this.Ge[o++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class u2{constructor(){this.Ye=new bM}addToCollectionParentIndex(e,t){return this.Ye.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Ps.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class bM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Jt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Jt.comparator)).toArray()}}const rD=new Uint8Array(0);class c2{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new bM,this.Ze=new Ec(r=>qf(r),(r,i)=>qy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const o={collectionId:r,parent:as(i)};return cO(e).put(o)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[mT(t),""],!1,!0);return cO(e).W(i).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Kl(u.parent))}return r})}addFieldIndex(e,t){const r=iD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;delete i.indexId;const o=r.add(i);if(t.indexState){const u=X0(e);return o.next(d=>{u.put(sO(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=iD(e),i=X0(e),o=J0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=J0(e);let i=!0;const o=new Map;return le.forEach(this.tn(t),u=>this.en(e,u).next(d=>{i&&(i=!!d),o.set(u,d)})).next(()=>{if(i){let u=Ut();const d=[];return le.forEach(o,(g,y)=>{var C;Pe("IndexedDbIndexManager",`Using index ${C=g,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(qe=>`${qe.fieldPath}:${qe.kind}`).join(",")}`} to execute ${qf(t)}`);const D=function(qe,We){const _t=Yg(We);if(void 0===_t)return null;for(const wt of Xd(qe,_t.fieldPath))switch(wt.op){case"array-contains-any":return wt.value.arrayValue.values||[];case"array-contains":return[wt.value]}return null}(y,g),M=function(qe,We){const _t=new Map;for(const wt of Hl(We))for(const Qt of Xd(qe,wt.fieldPath))switch(Qt.op){case"==":case"in":_t.set(wt.fieldPath.canonicalString(),Qt.value);break;case"not-in":case"!=":return _t.set(wt.fieldPath.canonicalString(),Qt.value),Array.from(_t.values())}return null}(y,g),O=function(qe,We){const _t=[];let wt=!0;for(const Qt of Hl(We)){const Lr=0===Qt.kind?nM(qe,Qt.fieldPath,qe.startAt):M0(qe,Qt.fieldPath,qe.startAt);_t.push(Lr.value),wt&&(wt=Lr.inclusive)}return new mc(_t,wt)}(y,g),U=function(qe,We){const _t=[];let wt=!0;for(const Qt of Hl(We)){const Lr=0===Qt.kind?M0(qe,Qt.fieldPath,qe.endAt):nM(qe,Qt.fieldPath,qe.endAt);_t.push(Lr.value),wt&&(wt=Lr.inclusive)}return new mc(_t,wt)}(y,g),J=this.nn(g,y,O),se=this.nn(g,y,U),Fe=this.sn(g,y,M),Ge=this.rn(g.indexId,D,J,O.inclusive,se,U.inclusive,Fe);return le.forEach(Ge,qe=>r.J(qe,t.limit).next(We=>{We.forEach(_t=>{const wt=Ke.fromSegments(_t.documentKey);u.has(wt)||(u=u.add(wt),d.push(wt))})}))}).next(()=>d)}return le.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,o,u,d){const g=(null!=t?t.length:1)*Math.max(r.length,o.length),y=g/(null!=t?t.length:1),C=[];for(let D=0;D<g;++D){const M=t?this.on(t[D/y]):rD,O=this.un(e,M,r[D%y],i),U=this.cn(e,M,o[D%y],u),J=d.map(se=>this.un(e,M,se,!0));C.push(...this.createRange(O,U,J))}return C}un(e,t,r,i){const o=new fm(e,Ke.empty(),t,r);return i?o:o.Ke()}cn(e,t,r,i){const o=new fm(e,Ke.empty(),t,r);return i?o.Ke():o}en(e,t){const r=new l2(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let u=null;for(const d of o)r.We(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;return le.forEach(this.tn(t),i=>this.en(e,i).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new vn(lr.comparator),g=!1;for(const y of u.filters){const C=y;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?g=!0:d=d.add(C.field))}for(const y of u.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(g?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Q0;for(const i of Hl(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const u=r.qe(i.kind);hm.Te.ce(o,u)}return r.$e()}on(e){const t=new Q0;return hm.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Q0;return hm.Te.ce(gc(this.databaseId,t),r.qe(function(i){const o=Hl(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Q0);let o=0;for(const u of Hl(e)){const d=r[o++];for(const g of i)if(this.ln(t,u.fieldPath)&&em(d))i=this.fn(i,u,d);else{const y=g.qe(u.kind);hm.Te.ce(d,y)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],o=[];for(const u of r.arrayValue.values||[])for(const d of i){const g=new Q0;g.seed(d.$e()),hm.Te.ce(u,g.qe(t.kind)),o.push(g)}return o}ln(e,t){return!!e.filters.find(r=>r instanceof Nr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=iD(e),i=X0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(o=>{const u=[];return le.forEach(o,d=>i.get([d.indexId,this.uid]).next(g=>{u.push(function(y,C){const D=C?new Qg(C.sequenceNumber,new Ps(Yl(C.readTime),new Ke(Kl(C.documentKey)),C.largestBatchId)):Qg.empty(),M=y.fields.map(([O,U])=>new Lf(lr.fromServerFormat(O),U));return new y0(y.indexId,y.collectionGroup,M,D)}(d,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Mt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=iD(e),o=X0(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>le.forEach(d,g=>o.put(sO(g.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,o)=>{const u=r.get(i.collectionGroup);return(u?le.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),le.forEach(d,g=>this.wn(e,i,g).next(y=>{const C=this.mn(o,g);return y.isEqual(C)?le.resolve():this.gn(e,o,g,y,C)}))))})}yn(e,t,r,i){return J0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return J0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=J0(e);let o=new vn(pm);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,d)=>{o=o.add(new fm(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>o)}mn(e,t){let r=new vn(pm);const i=this.an(t,e);if(null==i)return r;const o=Yg(t);if(null!=o){const u=e.data.field(o.fieldPath);if(em(u))for(const d of u.arrayValue.values||[])r=r.add(new fm(t.indexId,e.key,this.on(d),i))}else r=r.add(new fm(t.indexId,e.key,rD,i));return r}gn(e,t,r,i,o){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,g,y,C,D){const M=d.getIterator(),O=g.getIterator();let U=Bf(M),J=Bf(O);for(;U||J;){let se=!1,Fe=!1;if(U&&J){const Ge=y(U,J);Ge<0?Fe=!0:Ge>0&&(se=!0)}else null!=U?Fe=!0:se=!0;se?(C(J),J=Bf(O)):Fe?(D(U),U=Bf(M)):(U=Bf(M),J=Bf(O))}}(i,o,pm,d=>{u.push(this.yn(e,t,r,d))},d=>{u.push(this.pn(e,t,r,d))}),le.waitFor(u)}_n(e){let t=1;return X0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>pm(u,d)).filter((u,d,g)=>!d||0!==pm(u,g[d-1]));const i=[];i.push(e);for(const u of r){const d=pm(u,e),g=pm(u,t);if(0===d)i[0]=e.Ke();else if(d>0&&g<0)i.push(u),i.push(u.Ke());else if(g>0)break}i.push(t);const o=[];for(let u=0;u<i.length;u+=2)o.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,rD,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,rD,[]]));return o}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dO)}getMinOffset(e,t){return le.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||st())).next(dO)}}function cO(n){return Ce(n,"collectionParents")}function J0(n){return Ce(n,"indexEntries")}function iD(n){return Ce(n,"indexConfiguration")}function X0(n){return Ce(n,"indexState")}function dO(n){xt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;jy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ps(e.readTime,e.documentKey,t)}const hO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class go{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new go(e,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let d=0;const g=r.Z({range:u},(C,D,M)=>(d++,M.delete()));o.push(g.next(()=>{xt(1===d)}));const y=[];for(const C of t.mutations){const D=EM(e,C.key.path,t.batchId);o.push(i.delete(D)),y.push(C.key)}return le.waitFor(o).next(()=>y)}function sD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(41943040,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);class oD{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){xt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new oD(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return np(e).Z({index:"userMutationsIndex",range:r},(i,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=hv(e),u=np(e);return u.add({}).next(d=>{xt("number"==typeof d);const g=new mt(d,t,r,i),y=function(M,O,U){const J=U.baseMutations.map(Fe=>dm(M.re,Fe)),se=U.mutations.map(Fe=>dm(M.re,Fe));return{userId:O,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:J,mutations:se}}(this.It,this.userId,g),C=[];let D=new vn((M,O)=>Mt(M.canonicalString(),O.canonicalString()));for(const M of i){const O=EM(this.userId,M.key.path,d);D=D.add(M.key.path.popLast()),C.push(u.put(y)),C.push(o.put(O,nO))}return D.forEach(M=>{C.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.In[d]=g.keys()}),le.waitFor(C).next(()=>g)})}lookupMutationBatch(e,t){return np(e).get(t).next(r=>r?(xt(r.userId===this.userId),Ql(this.It,r)):null)}Tn(e,t){return this.In[t]?le.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return np(e).Z({index:"userMutationsIndex",range:i},(u,d,g)=>{d.userId===this.userId&&(xt(d.batchId>=r),o=Ql(this.It,d)),g.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return np(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return np(e).W("userMutationsIndex",t).next(r=>r.map(i=>Ql(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=K0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return hv(e).Z({range:i},(u,d,g)=>{const[y,C,D]=u,M=Kl(C);if(y===this.userId&&t.path.isEqual(M))return np(e).get(D).next(O=>{if(!O)throw st();xt(O.userId===this.userId),o.push(Ql(this.It,O))});g.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Mt);const i=[];return t.forEach(o=>{const u=K0(this.userId,o.path),d=IDBKeyRange.lowerBound(u),g=hv(e).Z({range:d},(y,C,D)=>{const[M,O,U]=y,J=Kl(O);M===this.userId&&o.path.isEqual(J)?r=r.add(U):D.done()});i.push(g)}),le.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=K0(this.userId,r),u=IDBKeyRange.lowerBound(o);let d=new vn(Mt);return hv(e).Z({range:u},(g,y,C)=>{const[D,M,O]=g,U=Kl(M);D===this.userId&&r.isPrefixOf(U)?U.length===i&&(d=d.add(O)):C.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(o=>{i.push(np(e).get(o).next(u=>{if(null===u)throw st();xt(u.userId===this.userId),r.push(Ql(this.It,u))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fO(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return hv(e).Z({range:r},(o,u,d)=>{if(o[0]===this.userId){const g=Kl(o[1]);i.push(g)}else d.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return pO(e,this.userId,t)}Rn(e){return gO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pO(n,e,t){const r=K0(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return hv(n).Z({range:o,X:!0},(d,g,y)=>{const[C,D,M]=d;C===e&&D===i&&(u=!0),y.done()}).next(()=>u)}function np(n){return Ce(n,"mutations")}function hv(n){return Ce(n,"documentMutations")}function gO(n){return Ce(n,"mutationQueues")}class gm{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new gm(0)}static vn(){return new gm(-1)}}class d2{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new gm(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Tt.fromTimestamp(new jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fv(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return fv(e).Z((u,d)=>{const g=ih(d);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,o.push(this.removeTargetData(e,g)))}).next(()=>le.waitFor(o)).next(()=>i)}forEachTarget(e,t){return fv(e).Z((r,i)=>{const o=ih(i);t(o)})}Vn(e){return mO(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}Sn(e,t){return mO(e).put("targetGlobalKey",t)}Dn(e,t){return fv(e).put(dv(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return fv(e).Z({range:i,index:"queryTargetsIndex"},(u,d,g)=>{const y=ih(d);qy(t,y.target)&&(o=y,g.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=rp(e);return t.forEach(u=>{const d=as(u.path);i.push(o.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=rp(e);return le.forEach(t,o=>{const u=as(o.path);return le.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=rp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=rp(e);let o=Ut();return i.Z({range:r,X:!0},(u,d,g)=>{const y=Kl(u[1]),C=new Ke(y);o=o.add(C)}).next(()=>o)}containsKey(e,t){const r=as(t.path),i=IDBKeyRange.bound([r],[mT(r)],!1,!0);let o=0;return rp(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,d],g,y)=>{0!==u&&(o++,y.done())}).next(()=>o>0)}se(e,t){return fv(e).get(t).next(r=>r?ih(r):null)}}function fv(n){return Ce(n,"targets")}function mO(n){return Ce(n,"targetGlobal")}function rp(n){return Ce(n,"targetDocuments")}function _O([n,e],[t,r]){const i=Mt(n,t);return 0===i?Mt(e,r):i}class h2{constructor(e){this.xn=e,this.buffer=new vn(_O),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_O(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class f2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){$l(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield dc(r)}yield t.Fn(3e5)}))}}class p2{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(ks.at);const r=new h2(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(hO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hO):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,o,u,d,g,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(o=D,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),Zd()<=co.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${o} targets in `+(g-d)+`ms\n\tRemoved ${D} documents in `+(y-g)+`ms\nTotal Duration: ${y-C}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:D})))}}class g2{constructor(e,t){this.db=e,this.garbageCollector=new p2(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return aD(e,r)}removeReference(e,t,r){return aD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return aD(e,t)}Gn(e,t){return function(r,i){let o=!1;return gO(r).tt(u=>pO(r,u,i).next(d=>(d&&(o=!0),le.resolve(!d)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Kn(e,(u,d)=>{if(d<=t){const g=this.Gn(e,u).next(y=>{if(!y)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Tt.min()),rp(e).delete([0,as(u.path)])))});i.push(g)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return aD(e,t)}Kn(e,t){const r=rp(e);let i,o=ks.at;return r.Z({index:"documentTargetsIndex"},([u,d],{path:g,sequenceNumber:y})=>{0===u?(o!==ks.at&&t(new Ke(Kl(i)),o),o=y,i=g):o=ks.at}).next(()=>{o!==ks.at&&t(new Ke(Kl(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aD(n,e){return rp(n).put((r=n.currentSequenceNumber,{targetId:0,path:as(e.path),sequenceNumber:r}));var r}class yO{constructor(){this.changes=new Ec(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class m2{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mm(e).put(r)}removeEntry(e,t,r){return mm(e).delete(function(i,o){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],tp(o),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return mm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(eI(t))},(i,o)=>{r=this.jn(t,o)}).next(()=>r)}Wn(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return mm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(eI(t))},(i,o)=>{r={document:this.jn(t,o),size:sD(o)}}).next(()=>r)}getEntries(e,t){let r=ji();return this.zn(e,t,(i,o)=>{const u=this.jn(i,o);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=ji(),i=new ur(Ke.comparator);return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d),i=i.insert(o,sD(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return le.resolve();let i=new vn(IO);t.forEach(g=>i=i.add(g));const o=IDBKeyRange.bound(eI(i.first()),eI(i.last())),u=i.getIterator();let d=u.getNext();return mm(e).Z({index:"documentKeyIndex",range:o},(g,y,C)=>{const D=Ke.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&IO(d,D)<0;)r(d,null),d=u.getNext();d&&d.isEqual(D)&&(r(d,y),d=u.hasNext()?u.getNext():null),d?C.j(eI(d)):C.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),tp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mm(e).W(IDBKeyRange.bound(i,o,!0)).next(u=>{let d=ji();for(const g of u){const y=this.jn(Ke.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let o=ji();const u=EO(t,r),d=EO(t,Ps.max());return mm(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(g,y,C)=>{const D=this.jn(Ke.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(D.key,D),o.size===i&&C.done()}).next(()=>o)}newChangeBuffer(e){return new _2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wO(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}Qn(e,t){return wO(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Z0(n,e){let t;if(e.document)t=W0(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=Yl(e.noDocument.readTime);t=Pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ke.fromSegments(e.unknownDocument.path),i=Yl(e.unknownDocument.version);t=Pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new jn(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return Pn.newInvalidDocument(e)}}function vO(n){return new m2(n)}class _2 extends yO{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ec(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((o,u)=>Mt(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const d=this.Xn.get(o);if(t.push(this.Yn.removeEntry(e,o,d.readTime)),u.isValidDocument()){const g=cv(this.Yn.It,u);i=i.add(o.path.popLast()),r+=sD(g)-d.size,t.push(this.Yn.addEntry(e,o,g))}else if(r-=d.size,this.trackRemovals){const g=cv(this.Yn.It,u.convertToNoDocument(Tt.min()));t.push(this.Yn.addEntry(e,o,g))}}),i.forEach(o=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Yn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((o,u)=>{this.Xn.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function wO(n){return Ce(n,"remoteDocumentGlobal")}function mm(n){return Ce(n,"remoteDocumentsV14")}function eI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function EO(n,e){const t=e.documentKey.path.toArray();return[n,tp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function IO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Mt(t[o],r[o]),i)return i;return i=Mt(t.length,r.length),i||(i=Mt(t[t.length-2],r[r.length-2]),i||Mt(t[t.length-1],r[r.length-1]))}class y2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Qf(r.mutation,i,Os.empty(),jn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ut()){const i=ql();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let u=am();return o.forEach((d,g)=>{u=u.insert(d,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=ql();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ut()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let o=ji();const u=lm(),d=lm();return t.forEach((g,y)=>{const C=r.get(y.key);i.has(y.key)&&(void 0===C||C.mutation instanceof ja)?o=o.insert(y.key,y):void 0!==C&&(u.set(y.key,C.mutation.getFieldMask()),Qf(C.mutation,y,C.mutation.getFieldMask(),jn.now()))}),this.recalculateAndSaveOverlays(e,o).next(g=>(g.forEach((y,C)=>u.set(y,C)),t.forEach((y,C)=>{var D;return d.set(y,new y2(C,null!==(D=u.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=lm();let i=new ur((u,d)=>u-d),o=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let C=r.get(g)||Os.empty();C=d.applyToLocalView(y,C),r.set(g,C);const D=(i.get(d.batchId)||Ut()).add(g);i=i.insert(d.batchId,D)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),y=g.key,C=g.value,D=V0();C.forEach(M=>{if(!o.has(M)){const O=$T(t.get(M),r.get(M));null!==O&&D.set(M,O),o=o.add(M)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,D))}return le.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):kT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):le.resolve(ql());let d=-1,g=o;return u.next(y=>le.forEach(y,(C,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),o.get(C)?le.resolve():this.getBaseDocument(e,C,D).next(M=>{g=g.insert(C,M)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,g,y,Ut())).next(C=>({batchId:d,changes:cM(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=am();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=am();return this.indexManager.getCollectionParents(e,i).next(u=>le.forEach(u,d=>{const g=(y=t,C=d.child(i),new _c(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((C,D)=>{o=o.insert(C,D)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(o=>(i=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(o=>{o.forEach((d,g)=>{const y=g.getKey();null===i.get(y)&&(i=i.insert(y,Pn.newInvalidDocument(y)))});let u=am();return i.forEach((d,g)=>{const y=o.get(d);void 0!==y&&Qf(y.mutation,g,Os.empty(),jn.now()),sm(t,g)&&(u=u.insert(d,g))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):le.resolve(Pn.newInvalidDocument(t))}}class v2{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return le.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:hi(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:IM(r.bundledQuery),readTime:hi(r.readTime)}),le.resolve();var r}}class w2{constructor(){this.overlays=new ur(Ke.comparator),this.es=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ql();return le.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ue(e,t,o)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=ql(),o=t.length+1,u=new Ke(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&g.largestBatchId>r&&i.set(g.getKey(),g)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ur((y,C)=>y-C);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=o.get(y.largestBatchId);null===C&&(C=ql(),o=o.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const d=ql(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,C)=>d.set(y,C)),!(d.size()>=i)););return le.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Tn(t,r));let o=this.es.get(t);void 0===o&&(o=Ut(),this.es.set(t,o)),this.es.set(t,o.add(r.key))}}class TM{constructor(){this.ns=new vn(Di.ss),this.rs=new vn(Di.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Di(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Di(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ke(new Jt([])),r=new Di(t,e),i=new Di(t,e+1),o=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),o.push(u.key)}),o}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ke(new Jt([])),r=new Di(t,e),i=new Di(t,e+1);let o=Ut();return this.rs.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new Di(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Di{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ke.comparator(e.key,t.key)||Mt(e._s,t._s)}static os(e,t){return Mt(e._s,t._s)||Ke.comparator(e.key,t.key)}}class E2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new vn(Di.ss)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.ws;this.ws++;const u=new mt(o,t,r,i);this.mutationQueue.push(u);for(const d of i)this.gs=this.gs.add(new Di(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(u)}lookupMutationBatch(e,t){return le.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),o=i<0?0:i;return le.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Di(t,0),i=new Di(t,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([r,i],u=>{const d=this.ys(u._s);o.push(d)}),le.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Mt);return t.forEach(i=>{const o=new Di(i,0),u=new Di(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,u],d=>{r=r.add(d._s)})}),le.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ke.isDocumentKey(o)||(o=o.child(""));const u=new Di(new Ke(o),0);let d=new vn(Mt);return this.gs.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(g._s)),!0)},u),le.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return le.forEach(t.mutations,i=>{const o=new Di(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Di(t,0),i=this.gs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class I2{constructor(e){this.Es=e,this.docs=new ur(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=ji();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Pn.newInvalidDocument(i))}),le.resolve(r)}getAllFromCollection(e,t,r){let i=ji();const o=new Ke(t.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||jy(wT(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}As(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new C2(this)}getSize(e){return le.resolve(this.size)}}class C2 extends yO{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class b2{constructor(e){this.persistence=e,this.Rs=new Ec(t=>qf(t),qy),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new TM,this.targetCount=0,this.vs=gm.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),le.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new gm(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Dn(t),le.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Rs.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),le.waitFor(o).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),le.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Ps.containsKey(t))}}class bO{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ks(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new b2(this),this.indexManager=new u2,this.remoteDocumentCache=new I2(r=>this.referenceDelegate.xs(r)),this.It=new uv(t),this.Ns=new v2(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new w2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new E2(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new T2(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(o=>this.referenceDelegate.Ms(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Os(e,t){return le.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class T2 extends w0{constructor(e){super(),this.currentSequenceNumber=e}}class lD{constructor(e){this.persistence=e,this.Fs=new TM,this.$s=null}static Bs(e){return new lD(e)}get Ls(){if(this.$s)return this.$s;throw st()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),le.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ls.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ls,r=>{const i=Ke.fromPath(r);return this.Us(e,i).next(o=>{o||t.removeEntry(i,Tt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return le.or([()=>le.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class D2{constructor(e){this.It=e}$(e,t,r,i){const o=new Gy("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wM,{unique:!0}),d.createObjectStore("documentMutations"),TO(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=le.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),TO(e)),u=u.next(()=>function(d){const g=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,g){return g.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wM,{unique:!0});const C=g.store("mutations"),D=y.map(M=>C.put(M));return le.waitFor(D)})}(e,o))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(o))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(o)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(o))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,o))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(o))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:N});g.createIndex("collectionPathOverlayIndex",L,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",K,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:rO});g.createIndex("documentKeyIndex",s),g.createIndex("collectionGroupIndex",a)}(e)).next(()=>this.Ws(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,o))),r<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:w}).createIndex("sequenceNumberIndex",I,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:b}).createIndex("documentKeyIndex",A,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=sD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>le.forEach(i,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(d=>le.forEach(d,g=>{xt(g.userId===o.userId);const y=Ql(this.It,g);return fO(e,o.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Z((u,d)=>{const g=new Jt(u),y=[0,as(g)];o.push(t.get(y).next(C=>C?le.resolve():t.put({targetId:0,path:as(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(o))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:m});const r=t.store("collectionParents"),i=new bM,o=u=>{if(i.add(u)){const d=u.lastSegment(),g=u.popLast();return r.put({collectionId:d,parent:as(g)})}};return t.store("remoteDocuments").Z({X:!0},(u,d)=>{const g=new Jt(u);return o(g.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,d,g],y)=>{const C=Kl(d);return o(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const o=ih(i),u=dv(this.It,o);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((o,u)=>{const d=t.store("remoteDocumentsV14"),g=(y=u,y.document?new Ke(Jt.fromString(y.document.name).popFirst(5)):y.noDocument?Ke.fromSegments(y.noDocument.path):y.unknownDocument?Ke.fromSegments(y.unknownDocument.path):st()).path.toArray();var y;const C={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(C))}).next(()=>le.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=vO(this.It),o=new bO(lD.Bs,this.It.re);return r.W().next(u=>{const d=new Map;return u.forEach(g=>{var y;let C=null!==(y=d.get(g.userId))&&void 0!==y?y:Ut();Ql(this.It,g).keys().forEach(D=>C=C.add(D)),d.set(g.userId,C)}),le.forEach(d,(g,y)=>{const C=new Yr(y),D=nD.oe(this.It,C),M=o.getIndexManager(C),O=oD.oe(C,this.It,M,o.referenceDelegate);return new CO(i,O,D,M).recalculateAndSaveOverlaysForDocumentKeys(new bt(t,ks.at),g).next()})})}}function TO(n){n.createObjectStore("targetDocuments",{keyPath:c}).createIndex("documentTargetsIndex",h,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",l,{unique:!0}),n.createObjectStore("targetGlobal")}const DM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class SM{constructor(e,t,r,i,o,u,d,g,y,C,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=o,this.window=u,this.document=d,this.Js=y,this.Ys=C,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=M=>Promise.resolve(),!SM.C())throw new Ne(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g2(this,i),this.ii=t+"main",this.It=new uv(g),this.ri=new fo(this.ii,this.Xs,new D2(this.It)),this.Cs=new d2(this.referenceDelegate,this.It),this.remoteDocumentCache=vO(this.It),this.Ns=new r2,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(fe.FAILED_PRECONDITION,DM);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ks(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if($l(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return tI(e).get("owner").next(t=>le.resolve(this.mi(t)))}gi(e){return uD(e).delete(this.clientId)}yi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ce(r,"clientMetadata");return i.W().next(o=>{const u=e.Ii(o,18e5),d=o.filter(g=>-1===u.indexOf(g));return le.forEach(d,g=>i.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?le.resolve(!0):tI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(fe.FAILED_PRECONDITION,DM);return!1}}return!(!this.networkEnabled||!this.inForeground)||uD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bt(t,ks.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>uD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return oD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new c2(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return nD.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(u=this.Xs)?it:14===u?Ze:13===u?ke:12===u?be:11===u?re:void st();var u;let d;return this.ri.runTransaction(e,i,o,g=>(d=new bt(g,this.Ss?this.Ss.next():ks.at),"readwrite-primary"===t?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(fe.FAILED_PRECONDITION,Hy);return r(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>r(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}Vi(e){return tI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(fe.FAILED_PRECONDITION,DM)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tI(e).put("owner",t)}static C(){return fo.C()}_i(e){const t=tI(e);return t.get("owner").next(r=>this.mi(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ar(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ar("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ar("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tI(n){return Ce(n,"owner")}function uD(n){return Ce(n,"clientMetadata")}function AM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class xM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Ut(),i=Ut();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new xM(e,t.fromCache,r,i)}}class DO{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(o=>o||this.Mi(e,t,i,r)).next(o=>o||this.Oi(e,t))}ki(e,t){if(PT(t))return le.resolve(null);let r=Bi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=im(t,null,"F"),r=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=Ut(...o);return this.Ni.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.Fi(t,d);return this.$i(t,y,u,g.readTime)?this.ki(e,im(t,null,"F")):this.Bi(e,y,t,g)}))})))}Mi(e,t,r,i){return PT(t)||i.isEqual(Tt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(o=>{const u=this.Fi(t,o);return this.$i(t,u,r,i)?this.Oi(e,t):(Zd()<=co.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),P0(t)),this.Bi(e,u,t,vT(i,-1)))})}Fi(e,t){let r=new vn(Fs(e));return t.forEach((i,o)=>{sm(e,o)&&(r=r.add(o))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Oi(e,t){return Zd()<=co.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",P0(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ps.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class S2{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new ur(Mt),this.qi=new Ec(o=>qf(o),qy),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CO(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function SO(n,e,t,r){return new S2(n,e,t,r)}function AO(n,e){return MM.apply(this,arguments)}function MM(){return MM=(0,we.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],d=[];let g=Ut();for(const y of i){u.push(y.batchId);for(const C of y.mutations)g=g.add(C.key)}for(const y of o){d.push(y.batchId);for(const C of y.mutations)g=g.add(C.key)}return t.localDocuments.getDocuments(r,g).next(y=>({ji:y,removedBatchIds:u,addedBatchIds:d}))})})}),MM.apply(this,arguments)}function A2(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,d,g,y){const C=g.batch,D=C.keys();let M=le.resolve();return D.forEach(O=>{M=M.next(()=>y.getEntry(d,O)).next(U=>{const J=g.docVersions.get(O);xt(null!==J),U.version.compareTo(J)<0&&(C.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),y.addEntry(U)))})}),M.next(()=>u.mutationQueue.removeMutationBatch(d,C))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Ut();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(d=d.add(u.batch.mutations[g].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function xO(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function x2(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((C,D)=>{const M=i.get(D);if(!M)return;d.push(t.Cs.removeMatchingKeys(o,C.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(o,C.addedDocuments,D)));let O=M.withSequenceNumber(o.currentSequenceNumber);var U,J,se;e.targetMismatches.has(D)?O=O.withResumeToken(Rr.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):C.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(C.resumeToken,r)),i=i.insert(D,O),J=O,se=C,(0===(U=M).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(o,O))});let g=ji(),y=Ut();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,C))}),d.push(MO(o,u,e.documentUpdates).next(C=>{g=C.Wi,y=C.zi})),!r.isEqual(Tt.min())){const C=t.Cs.getLastRemoteSnapshotVersion(o).next(D=>t.Cs.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(C)}return le.waitFor(d).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,g,y)).next(()=>g)}).then(o=>(t.Ui=i,o))}function MO(n,e,t){let r=Ut(),i=Ut();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=ji();return t.forEach((d,g)=>{const y=o.get(d);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),g.isNoDocument()&&g.version.isEqual(Tt.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):Pe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",g.version)}),{Wi:u,zi:i}})}function M2(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pv(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(o=>o?(i=o,le.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new ls(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function gv(n,e,t){return RM.apply(this,arguments)}function RM(){return RM=(0,we.Z)(function*(n,e,t){const r=Qe(n),i=r.Ui.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!$l(u))throw u;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),RM.apply(this,arguments)}function cD(n,e,t){const r=Qe(n);let i=Tt.min(),o=Ut();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,g,y){const C=Qe(d),D=C.qi.get(y);return void 0!==D?le.resolve(C.Ui.get(D)):C.Cs.getTargetData(g,y)}(r,u,Bi(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,d.targetId).next(g=>{o=g})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Tt.min(),t?o:Ut())).next(d=>(PO(r,OT(e),d),{documents:d,Hi:o})))}function RO(n,e){const t=Qe(n),r=Qe(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.se(o,e).next(u=>u?u.target:null))}function NO(n,e){const t=Qe(n),r=t.Ki.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,vT(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(PO(t,e,i),i))}function PO(n,e,t){let r=Tt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ki.set(e,r)}function NM(){return NM=(0,we.Z)(function*(n,e,t,r){const i=Qe(n);let o=Ut(),u=ji();for(const y of t){const C=e.Ji(y.metadata.name);y.document&&(o=o.add(C));const D=e.Yi(y);D.setReadTime(e.Xi(y.metadata.readTime)),u=u.insert(C,D)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),g=yield pv(i,(y=r,Bi(rm(Jt.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>MO(y,d,u).next(C=>(d.apply(y),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Cs.addMatchingKeys(y,o,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,C.Wi,C.zi)).next(()=>C.Wi)))}),NM.apply(this,arguments)}function N2(n,e){return PM.apply(this,arguments)}function PM(){return PM=(0,we.Z)(function*(n,e,t=Ut()){const r=yield pv(n,Bi(IM(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const u=hi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(o,e);const d=r.withResumeToken(Rr.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(o,d).next(()=>i.Cs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Cs.addMatchingKeys(o,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(o,e))})}),PM.apply(this,arguments)}function kO(n,e){return`firestore_clients_${n}_${e}`}function OO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function kM(n,e){return`firestore_targets_${n}_${e}`}class dD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let o,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(o=new Ne(i.error.code,i.error.message))),u?new dD(e,t,i.state,o):(ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ne(r.error.code,r.error.message))),o?new nI(e,r.state,i):(ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=U0();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=Qx(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new hD(e,o):(ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class OM{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new OM(t.clientId,t.onlineState):(ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class FM{constructor(){this.activeTargetIds=U0()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LM{constructor(e,t,r,i,o){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ur(Mt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=kO(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new FM),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const o=e.getItem(kO(e.persistenceKey,i));if(o){const u=hD.Zi(i,o);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(kM(this.persistenceKey,e));if(r){const i=nI.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(o){let u=ks.at;if(null!=o)try{const d=JSON.parse(o);xt("number"==typeof d),u=d}catch(d){ar("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==ks.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Or(o)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new dD(this.currentUser,e,t,r),o=OO(this.persistenceKey,this.currentUser,e);this.setItem(o,i.tr())}Er(e){const t=OO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=kM(this.persistenceKey,e),o=new nI(e,t,r);this.setItem(i,o.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return hD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return dD.Zi(new Yr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return nI.Zi(i,t)}yr(e){return OM.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),o=this.Ir(r),u=[],d=[];return o.forEach(g=>{i.has(g)||u.push(g)}),i.forEach(g=>{o.has(g)||d.push(g)}),this.syncEngine.Br(u,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=U0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class FO{constructor(){this.Lr=new FM,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new FM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class P2{qr(e){}shutdown(){}}class LO{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const k2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class O2{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class F2 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,o){const u=this.ao(e,t);Pe("RestConnection","Sending: ",u,r);const d={};return this.ho(d,i,o),this.lo(e,u,d,r).then(g=>(Pe("RestConnection","Received: ",g),g),g=>{throw cc("RestConnection",`${e} failed with error: `,g,"url: ",u,"request:",r),g})}fo(e,t,r,i,o,u){return this.co(e,t,r,i,o)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Of,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}ao(e,t){return`${this.oo}/v1/${t}:${k2[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((o,u)=>{const d=new Wx;d.listenOnce($x.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case m0.NO_ERROR:const y=d.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(y)),o(y);break;case m0.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),u(new Ne(fe.DEADLINE_EXCEEDED,"Request time out"));break;case m0.HTTP_ERROR:const C=d.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',C,"response text:",d.getResponseText()),C>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const M=function(O){const U=O.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(U)>=0?U:fe.UNKNOWN}(D.status);u(new Ne(M,D.message))}else u(new Ne(fe.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ne(fe.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);d.send(t,"POST",g,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jk(),u=Hx(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new Gx({})),this.ho(d.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Pe("Connection","Creating WebChannel: "+g,d);const y=o.createWebChannel(g,d);let C=!1,D=!1;const M=new O2({Hr:U=>{D?Pe("Connection","Not sending because WebChannel is closed:",U):(C||(Pe("Connection","Opening WebChannel transport."),y.open(),C=!0),Pe("Connection","WebChannel sending:",U),y.send(U))},Jr:()=>y.close()}),O=(U,J,se)=>{U.listen(J,Fe=>{try{se(Fe)}catch(Ge){setTimeout(()=>{throw Ge},0)}})};return O(y,Vy.EventType.OPEN,()=>{D||Pe("Connection","WebChannel transport opened.")}),O(y,Vy.EventType.CLOSE,()=>{D||(D=!0,Pe("Connection","WebChannel transport closed"),M.io())}),O(y,Vy.EventType.ERROR,U=>{D||(D=!0,cc("Connection","WebChannel transport errored:",U),M.io(new Ne(fe.UNAVAILABLE,"The operation could not be completed")))}),O(y,Vy.EventType.MESSAGE,U=>{var J;if(!D){const se=U.data[0];xt(!!se);const Fe=se,Ge=Fe.error||(null===(J=Fe[0])||void 0===J?void 0:J.error);if(Ge){Pe("Connection","WebChannel received error:",Ge);const qe=Ge.status;let We=function(wt){const Qt=vr[wt];if(void 0!==Qt)return L0(Qt)}(qe),_t=Ge.message;void 0===We&&(We=fe.INTERNAL,_t="Unknown error status: "+qe+" with message "+Ge.message),D=!0,M.io(new Ne(We,_t)),y.close()}else Pe("Connection","WebChannel received:",se),M.ro(se)}}),O(u,cT.STAT_EVENT,U=>{U.stat===dT.PROXY?Pe("Connection","Detected buffering proxy"):U.stat===dT.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.so()},0),M}}function VO(){return typeof window<"u"?window:null}function fD(){return typeof document<"u"?document:null}function rI(n){return new fM(n,!0)}class VM{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class UO{constructor(e,t,r,i,o,u,d,g){this.Hs=e,this.Po=r,this.vo=i,this.Vo=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new VM(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,we.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,we.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(ar(t.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ne(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,we.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L2 extends UO{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=o}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function gM(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:st(),i=e.targetChange.targetIds||[],o=function(g,y){return g.gt?(xt(void 0===y||"string"==typeof y),Rr.fromBase64String(y||"")):(xt(void 0===y||y instanceof Uint8Array),Rr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(g){const y=void 0===g.code?fe.UNKNOWN:L0(g.code);return new Ne(y,g.message||"")}(u);t=new qT(r,i,o,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Jo(n,r.document.name),o=hi(r.document.updateTime),u=new Jr({mapValue:{fields:r.document.fields}}),d=Pn.newFoundDocument(i,o,u);t=new rv(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Jo(n,r.document),o=r.readTime?hi(r.readTime):Tt.min(),u=Pn.newNoDocument(i,o);t=new rv([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Jo(n,r.document);t=new rv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,o=new GT(r.count||0);t=new um(r.targetId,o)}}var g;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Tt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Tt.min():o.readTime?hi(o.readTime):Tt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=cm(this.It),t.addTarget=function(i,o){let u;const d=o.target;return u=x0(d)?{documents:mM(i,d)}:{query:q0(i,d)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?u.resumeToken=iv(i,o.resumeToken):o.snapshotVersion.compareTo(Tt.min())>0&&(u.readTime=rh(i,o.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function _M(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=cm(this.It),t.removeTarget=e,this.Bo(t)}}class V2 extends UO{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=o,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function z0(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let o=hi(r.updateTime?r.updateTime:i);return o.isEqual(Tt.min())&&(o=hi(i)),new aM(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=hi(e.commitTime);return this.listener.Zo(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=cm(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dm(this.It,r))};this.Bo(t)}}class U2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.Vo.co(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(fe.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.Vo.fo(e,t,r,o,u,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(fe.UNKNOWN,o.toString())})}terminate(){this.nu=!0}}class B2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ar(t),this.ou=!1):Pe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class j2{constructor(e,t,r,i,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.qr(d=>{r.enqueueAndForget((0,we.Z)(function*(){var g;ip(u)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,we.Z)(function*(y){const C=Qe(y);C._u.add(4),yield mv(C),C.gu.set("Unknown"),C._u.delete(4),yield iI(C)}),function(y){return g.apply(this,arguments)})(u))}))}),this.gu=new B2(r,i)}}function iI(n){return UM.apply(this,arguments)}function UM(){return UM=(0,we.Z)(function*(n){if(ip(n))for(const e of n.wu)yield e(!0)}),UM.apply(this,arguments)}function mv(n){return BM.apply(this,arguments)}function BM(){return BM=(0,we.Z)(function*(n){for(const e of n.wu)yield e(!1)}),BM.apply(this,arguments)}function pD(n,e){const t=Qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),$M(t)?HM(t):yv(t).ko()&&jM(t,e))}function sI(n,e){const t=Qe(n),r=yv(t);t.du.delete(e),r.ko()&&BO(t,e),0===t.du.size&&(r.ko()?r.Fo():ip(t)&&t.gu.set("Unknown"))}function jM(n,e){n.yu.Ot(e.targetId),yv(n).zo(e)}function BO(n,e){n.yu.Ot(e),yv(n).Ho(e)}function HM(n){n.yu=new ZT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),yv(n).start(),n.gu.uu()}function $M(n){return ip(n)&&!yv(n).No()&&n.du.size>0}function ip(n){return 0===Qe(n)._u.size}function jO(n){n.yu=void 0}function H2(n){return GM.apply(this,arguments)}function GM(){return GM=(0,we.Z)(function*(n){n.du.forEach((e,t)=>{jM(n,e)})}),GM.apply(this,arguments)}function $2(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,we.Z)(function*(n,e){jO(n),$M(n)?(n.gu.hu(e),HM(n)):n.gu.set("Unknown")}),WM.apply(this,arguments)}function G2(n,e,t){return zM.apply(this,arguments)}function zM(){return zM=(0,we.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof qT&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,o){const u=o.cause;for(const d of o.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.du.delete(d),i.yu.removeTarget(d))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gD(n,r)}else if(e instanceof rv?n.yu.Gt(e):e instanceof um?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Tt.min()))try{const r=yield xO(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const u=i.yu.te(o);return u.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.du.get(g);y&&i.du.set(g,y.withResumeToken(d.resumeToken,o))}}),u.targetMismatches.forEach(d=>{const g=i.du.get(d);if(!g)return;i.du.set(d,g.withResumeToken(Rr.EMPTY_BYTE_STRING,g.snapshotVersion)),BO(i,d);const y=new ls(g.target,d,1,g.sequenceNumber);jM(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield gD(n,r)}var r}),zM.apply(this,arguments)}function gD(n,e,t){return qM.apply(this,arguments)}function qM(){return qM=(0,we.Z)(function*(n,e,t){if(!$l(e))throw e;n._u.add(1),yield mv(n),n.gu.set("Offline"),t||(t=()=>xO(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield iI(n)}))}),qM.apply(this,arguments)}function HO(n,e){return e().catch(t=>gD(n,t,e))}function _v(n){return KM.apply(this,arguments)}function KM(){return KM=(0,we.Z)(function*(n){const e=Qe(n),t=sp(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;W2(e);)try{const i=yield M2(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,z2(e,i)}catch(i){yield gD(e,i)}$O(e)&&GO(e)}),KM.apply(this,arguments)}function W2(n){return ip(n)&&n.fu.length<10}function z2(n,e){n.fu.push(e);const t=sp(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function $O(n){return ip(n)&&!sp(n).No()&&n.fu.length>0}function GO(n){sp(n).start()}function q2(n){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,we.Z)(function*(n){sp(n).eu()}),ZM.apply(this,arguments)}function K2(n){return YM.apply(this,arguments)}function YM(){return YM=(0,we.Z)(function*(n){const e=sp(n);for(const t of n.fu)e.Xo(t.mutations)}),YM.apply(this,arguments)}function Z2(n,e,t){return QM.apply(this,arguments)}function QM(){return QM=(0,we.Z)(function*(n,e,t){const r=n.fu.shift(),i=Wt.from(r,e,t);yield HO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _v(n)}),QM.apply(this,arguments)}function Y2(n,e){return JM.apply(this,arguments)}function JM(){return JM=(0,we.Z)(function*(n,e){var t;e&&sp(n).Yo&&(yield(t=(0,we.Z)(function*(r,i){if(om(o=i.code)&&o!==fe.ABORTED){const u=r.fu.shift();sp(r).Oo(),yield HO(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield _v(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),$O(n)&&GO(n)}),JM.apply(this,arguments)}function WO(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,we.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=ip(t);t._u.add(3),yield mv(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield iI(t)}),XM.apply(this,arguments)}function eR(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,we.Z)(function*(n,e){const t=Qe(n);e?(t._u.delete(2),yield iI(t)):e||(t._u.add(2),yield mv(t),t.gu.set("Unknown"))}),tR.apply(this,arguments)}function yv(n){return n.pu||(n.pu=function(e,t,r){const i=Qe(e);return i.su(),new L2(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:H2.bind(null,n),Zr:$2.bind(null,n),Wo:G2.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.pu.Oo(),$M(n)?HM(n):n.gu.set("Unknown")):(yield n.pu.stop(),jO(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function sp(n){return n.Iu||(n.Iu=function(e,t,r){const i=Qe(e);return i.su(),new V2(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:q2.bind(null,n),Zr:Y2.bind(null,n),tu:K2.bind(null,n),Zo:Z2.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.Iu.Oo(),yield _v(n)):(yield n.Iu.stop(),n.fu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class nR{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,d=new nR(e,t,u,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vv(n,e){if(ar("AsyncQueue",`${e}: ${n}`),$l(n))return new Ne(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class wv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=am(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new wv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new wv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zO{constructor(){this.Tu=new ur(Ke.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):st():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ev{constructor(e,t,r,i,o,u,d,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new Ev(e,t,wv.emptySet(t),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Q2{constructor(){this.Au=void 0,this.listeners=[]}}class J2{constructor(){this.queries=new Ec(e=>po(e),Zy),this.onlineState="Unknown",this.Ru=new Set}}function rR(n,e){return iR.apply(this,arguments)}function iR(){return iR=(0,we.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new Q2),i)try{o.Au=yield t.onListen(r)}catch(u){const d=vv(u,`Initialization of query '${P0(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,o),o.listeners.push(e),e.bu(t.onlineState),o.Au&&e.Pu(o.Au)&&aR(t)}),iR.apply(this,arguments)}function sR(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,we.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),oR.apply(this,arguments)}function X2(n,e){const t=Qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Pu(i)&&(r=!0);u.Au=i}}r&&aR(t)}function ej(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function aR(n){n.Ru.forEach(e=>{e.next()})}class lR{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ev(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Ev.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class tj{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class qO{constructor(e){this.It=e}Ji(e){return Jo(this.It,e)}Yi(e){return e.metadata.exists?W0(this.It,e.document,!1):Pn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return hi(e)}}class nj{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KO(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new qO(this.It);for(const i of e)if(i.metadata.queries){const o=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||Ut()).add(o);t.set(u,d)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function R2(n,e,t,r){return NM.apply(this,arguments)}(e.localStore,new qO(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield N2(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function KO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ZO{constructor(e){this.key=e}}class YO{constructor(e){this.key=e}}class QO{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Ut(),this.mutatedKeys=Ut(),this.Ku=Fs(e),this.Gu=new wv(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new zO,i=t?t.Gu:this.Gu;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const M=i.get(C),O=sm(this.query,D)?D:null,U=!!M&&this.mutatedKeys.has(M.key),J=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let se=!1;M&&O?M.data.isEqual(O.data)?U!==J&&(r.track({type:3,doc:O}),se=!0):this.zu(M,O)||(r.track({type:2,doc:O}),se=!0,(g&&this.Ku(O,g)>0||y&&this.Ku(O,y)<0)&&(d=!0)):!M&&O?(r.track({type:0,doc:O}),se=!0):M&&!O&&(r.track({type:1,doc:M}),se=!0,(g||y)&&(d=!0)),se&&(O?(u=u.add(O),o=J?o.add(C):o.delete(C)):(u=u.delete(C),o=o.delete(C)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const C="F"===this.query.limitType?u.last():u.first();u=u.delete(C.key),o=o.delete(C.key),r.track({type:1,doc:C})}return{Gu:u,Wu:r,$i:d,mutatedKeys:o}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const o=e.Wu.Eu();o.sort((y,C)=>function(D,M){const O=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return O(D)-O(M)}(y.type,C.type)||this.Ku(y.doc,C.doc)),this.Hu(r);const u=t?this.Ju():[],d=0===this.qu.size&&this.current?1:0,g=d!==this.Uu;return this.Uu=d,0!==o.length||g?{snapshot:new Ev(this.query,e.Gu,i,o,e.mutatedKeys,0===d,g,!1),Yu:u}:{Yu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new zO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ut(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new YO(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new ZO(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Ut();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Ev.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class rj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ij{constructor(e){this.key=e,this.ec=!1}}class sj{constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new Ec(d=>po(d),Zy),this.ic=new Map,this.rc=new Set,this.oc=new ur(Ke.comparator),this.uc=new Map,this.cc=new TM,this.ac={},this.hc=new Map,this.lc=gm.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function oj(n,e){return uR.apply(this,arguments)}function uR(){return uR=(0,we.Z)(function*(n,e){const t=NR(n);let r,i;const o=t.sc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.tc();else{const u=yield pv(t.localStore,Bi(e));t.isPrimaryClient&&pD(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield cR(t,e,r,"current"===d)}return i}),uR.apply(this,arguments)}function cR(n,e,t,r){return dR.apply(this,arguments)}function dR(){return dR=(0,we.Z)(function*(n,e,t,r){n.dc=(C,D,M)=>{return(O=(0,we.Z)(function*(U,J,se,Fe){let Ge=J.view.ju(se);Ge.$i&&(Ge=yield cD(U.localStore,J.query,!1).then(({documents:_t})=>J.view.ju(_t,Ge)));const qe=Fe&&Fe.targetChanges.get(J.targetId),We=J.view.applyChanges(Ge,U.isPrimaryClient,qe);return ER(U,J.targetId,We.Yu),We.snapshot}),function(U,J,se,Fe){return O.apply(this,arguments)})(n,C,D,M);var O};const i=yield cD(n.localStore,e,!0),o=new QO(e,i.Hi),u=o.ju(i.documents),d=nv.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=o.applyChanges(u,n.isPrimaryClient,d);ER(n,t,g.Yu);const y=new rj(e,t,o);return n.sc.set(e,y),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),g.snapshot}),dR.apply(this,arguments)}function aj(n,e){return hR.apply(this,arguments)}function hR(){return hR=(0,we.Z)(function*(n,e){const t=Qe(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(o=>!Zy(o,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield gv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),sI(t.remoteStore,r.targetId),Iv(t,r.targetId)}).catch(dc))):(Iv(t,r.targetId),yield gv(t.localStore,r.targetId,!0))}),hR.apply(this,arguments)}function fR(){return fR=(0,we.Z)(function*(n,e,t){const r=PR(n);try{const i=yield function(o,u){const d=Qe(o),g=jn.now(),y=u.reduce((M,O)=>M.add(O.key),Ut());let C,D;return d.persistence.runTransaction("Locally write mutations","readwrite",M=>{let O=ji(),U=Ut();return d.Gi.getEntries(M,y).next(J=>{O=J,O.forEach((se,Fe)=>{Fe.isValidDocument()||(U=U.add(se))})}).next(()=>d.localDocuments.getOverlayedDocuments(M,O)).next(J=>{C=J;const se=[];for(const Fe of u){const Ge=Zk(Fe,C.get(Fe.key).overlayedDocument);null!=Ge&&se.push(new ja(Fe.key,Ge,eM(Ge.value.mapValue),tr.exists(!0)))}return d.mutationQueue.addMutationBatch(M,g,se,u)}).next(J=>{D=J;const se=J.applyToLocalDocumentSet(C,U);return d.documentOverlayCache.saveOverlays(M,J.batchId,se)})}).then(()=>({batchId:D.batchId,changes:cM(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,d){let g=o.ac[o.currentUser.toKey()];g||(g=new ur(Mt)),g=g.insert(u,d),o.ac[o.currentUser.toKey()]=g}(r,i.batchId,t),yield sh(r,i.changes),yield _v(r.remoteStore)}catch(i){const o=vv(i,"Failed to persist write");t.reject(o)}}),fR.apply(this,arguments)}function JO(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,we.Z)(function*(n,e){const t=Qe(n);try{const r=yield x2(t.localStore,e);e.targetChanges.forEach((i,o)=>{const u=t.uc.get(o);u&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.ec=!0:i.modifiedDocuments.size>0?xt(u.ec):i.removedDocuments.size>0&&(xt(u.ec),u.ec=!1))}),yield sh(t,r,e)}catch(r){yield dc(r)}}),pR.apply(this,arguments)}function XO(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((o,u)=>{const d=u.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(o,u){const d=Qe(o);d.onlineState=u;let g=!1;d.queries.forEach((y,C)=>{for(const D of C.listeners)D.bu(u)&&(g=!0)}),g&&aR(d)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uj(n,e,t){return gR.apply(this,arguments)}function gR(){return gR=(0,we.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),o=i&&i.key;if(o){let u=new ur(Ke.comparator);u=u.insert(o,Pn.newNoDocument(o,Tt.min()));const d=Ut().add(o),g=new tv(Tt.min(),new Map,new vn(Mt),u,d);yield JO(r,g),r.oc=r.oc.remove(o),r.uc.delete(e),IR(r)}else yield gv(r.localStore,e,!1).then(()=>Iv(r,e,t)).catch(dc)}),gR.apply(this,arguments)}function cj(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,we.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield A2(t.localStore,e);wR(t,r,null),vR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield sh(t,i)}catch(i){yield dc(i)}}),mR.apply(this,arguments)}function dj(n,e,t){return _R.apply(this,arguments)}function _R(){return _R=(0,we.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(o,u){const d=Qe(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return d.mutationQueue.lookupMutationBatch(g,u).next(C=>(xt(null!==C),y=C.keys(),d.mutationQueue.removeMutationBatch(g,C))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,y,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>d.localDocuments.getDocuments(g,y))})}(r.localStore,e);wR(r,e,t),vR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield sh(r,i)}catch(i){yield dc(i)}}),_R.apply(this,arguments)}function yR(){return yR=(0,we.Z)(function*(n,e){const t=Qe(n);ip(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const u=Qe(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=vv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),yR.apply(this,arguments)}function vR(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function wR(n,e,t){const r=Qe(n);let i=r.ac[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function Iv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||e1(n,r)})}function e1(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(sI(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),IR(n))}function ER(n,e,t){for(const r of t)r instanceof ZO?(n.cc.addReference(r.key,e),fj(n,r)):r instanceof YO?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||e1(n,r.key)):st()}function fj(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.rc.add(r),IR(n))}function IR(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ke(Jt.fromString(e)),r=n.lc.next();n.uc.set(r,new ij(t)),n.oc=n.oc.insert(t,r),pD(n.remoteStore,new ls(Bi(rm(t.path)),r,2,ks.at))}}function sh(n,e,t){return CR.apply(this,arguments)}function CR(){return CR=(0,we.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[],u=[];var d;r.sc.isEmpty()||(r.sc.forEach((d,g)=>{u.push(r.dc(g,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=xM.Ci(g.targetId,y);o.push(C)}}))}),yield Promise.all(u),r.nc.Wo(i),yield(d=(0,we.Z)(function*(g,y){const C=Qe(g);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>le.forEach(y,M=>le.forEach(M.Si,O=>C.persistence.referenceDelegate.addReference(D,M.targetId,O)).next(()=>le.forEach(M.Di,O=>C.persistence.referenceDelegate.removeReference(D,M.targetId,O)))))}catch(D){if(!$l(D))throw D;Pe("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const M=D.targetId;if(!D.fromCache){const O=C.Ui.get(M),J=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);C.Ui=C.Ui.insert(M,J)}}}),function(g,y){return d.apply(this,arguments)})(r.localStore,o))}),CR.apply(this,arguments)}function pj(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,we.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield AO(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(u=>{u.forEach(d=>{d.reject(new Ne(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield sh(t,r.ji)}var i}),bR.apply(this,arguments)}function gj(n,e){const t=Qe(n),r=t.uc.get(e);if(r&&r.ec)return Ut().add(r.key);{let i=Ut();const o=t.ic.get(e);if(!o)return i;for(const u of o){const d=t.sc.get(u);i=i.unionWith(d.view.Qu)}return i}}function mj(n,e){return TR.apply(this,arguments)}function TR(){return TR=(0,we.Z)(function*(n,e){const t=Qe(n),r=yield cD(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&ER(t,e.targetId,i.Yu),i}),TR.apply(this,arguments)}function _j(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,we.Z)(function*(n,e){const t=Qe(n);return NO(t.localStore,e).then(r=>sh(t,r))}),DR.apply(this,arguments)}function yj(n,e,t,r){return SR.apply(this,arguments)}function SR(){return SR=(0,we.Z)(function*(n,e,t,r){const i=Qe(n),o=yield function(u,d){const g=Qe(u),y=Qe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.Tn(C,d).next(D=>D?g.localDocuments.getDocuments(C,D):le.resolve(null)))}(i.localStore,e);var d;null!==o?("pending"===t?yield _v(i.remoteStore):"acknowledged"===t||"rejected"===t?(wR(i,e,r||null),vR(i,e),d=e,Qe(Qe(i.localStore).mutationQueue).An(d)):st(),yield sh(i,o)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),SR.apply(this,arguments)}function AR(){return AR=(0,we.Z)(function*(n,e){const t=Qe(n);if(NR(t),PR(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield t1(t,r.toArray());t.fc=!0,yield eR(t.remoteStore,!0);for(const o of i)pD(t.remoteStore,o)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Iv(t,u),gv(t.localStore,u,!0))),sI(t.remoteStore,u)}),yield i,yield t1(t,r),function(o){const u=Qe(o);u.uc.forEach((d,g)=>{sI(u.remoteStore,g)}),u.cc.fs(),u.uc=new Map,u.oc=new ur(Ke.comparator)}(t),t.fc=!1,yield eR(t.remoteStore,!1)}}),AR.apply(this,arguments)}function t1(n,e,t){return xR.apply(this,arguments)}function xR(){return xR=(0,we.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[];for(const u of e){let d;const g=r.ic.get(u);if(g&&0!==g.length){d=yield pv(r.localStore,Bi(g[0]));for(const y of g){const C=r.sc.get(y),D=yield mj(r,C);D.snapshot&&o.push(D.snapshot)}}else{const y=yield RO(r.localStore,u);d=yield pv(r.localStore,y),yield cR(r,n1(y),u,!1)}i.push(d)}return r.nc.Wo(o),i}),xR.apply(this,arguments)}function n1(n){return sM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function wj(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).vi()}function Ej(n,e,t,r){return MR.apply(this,arguments)}function MR(){return MR=(0,we.Z)(function*(n,e,t,r){const i=Qe(n);if(i.fc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const o=i.ic.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield NO(i.localStore,OT(o[0])),d=tv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield sh(i,u,d);break}case"rejected":yield gv(i.localStore,e,!0),Iv(i,e,r);break;default:st()}}),MR.apply(this,arguments)}function Ij(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,we.Z)(function*(n,e,t){const r=NR(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const o=yield RO(r.localStore,i),u=yield pv(r.localStore,o);yield cR(r,n1(o),u.targetId,!1),pD(r.remoteStore,u)}for(const i of t)r.ic.has(i)&&(yield gv(r.localStore,i,!1).then(()=>{sI(r.remoteStore,i),Iv(r,i)}).catch(dc))}}),RR.apply(this,arguments)}function NR(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uj.bind(null,e),e.nc.Wo=X2.bind(null,e.eventManager),e.nc._c=ej.bind(null,e.eventManager),e}function PR(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dj.bind(null,e),e}class r1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.It=rI(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return SO(this.persistence,new DO,e.initialUser,this.It)}gc(e){return new bO(lD.Bs,this.It)}mc(e){return new FO}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class i1 extends r1{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield PR(r.Ec.syncEngine),yield _v(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return SO(this.persistence,new DO,e.initialUser,this.It)}Ic(e,t){return new f2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new Gk(t,this.persistence);return new Yx(e.asyncQueue,r)}gc(e){const t=AM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new SM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,VO(),fD(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new FO}}class bj extends i1{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof LM&&(r.sharedClientState.syncEngine={Fr:yj.bind(null,i),$r:Ej.bind(null,i),Br:Ij.bind(null,i),vi:wj.bind(null,i),Or:_j.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var o=(0,we.Z)(function*(u){yield function vj(n,e){return AR.apply(this,arguments)}(r.Ec.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}mc(e){const t=VO();if(!LM.C(t))throw new Ne(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=AM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new LM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kR{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>XO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=pj.bind(null,r.syncEngine),yield eR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new J2}createDatastore(e){const t=rI(e.databaseInfo.databaseId),r=new F2(e.databaseInfo);return new U2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=d=>XO(this.syncEngine,d,0),u=LO.C()?new LO:new P2,new j2(t,r,i,o,u);var t,r,i,o,u}createSyncEngine(e,t){return function(r,i,o,u,d,g,y){const C=new sj(r,i,o,u,d,g);return y&&(C.fc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=Qe(t);Pe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield mv(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function s1(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class mD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Tj{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const o=yield e.Dc(i);return new tj(JSON.parse(o),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,we.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,we.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Dj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(o,u){const d=Qe(o),g=cm(d.It)+"/documents",y={documents:u.map(O=>ov(d.It,O))},C=yield d.fo("BatchGetDocuments",g,y,u.length),D=new Map;C.forEach(O=>{const U=function XT(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=Jo(t,r.found.name),o=hi(r.found.updateTime),u=new Jr({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(i,o,u)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=Jo(t,r.missing),o=hi(r.readTime);return Pn.newNoDocument(i,o)}(n,e):st()}(d.It,O);D.set(U.key.toString(),U)});const M=[];return u.forEach(O=>{const U=D.get(O.toString());xt(!!U),M.push(U)}),M}),function(o,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Ke.fromPath(i);e.mutations.push(new ev(o,e.precondition(o)))}),yield(r=(0,we.Z)(function*(i,o){const u=Qe(i),d=cm(u.It)+"/documents",g={writes:o.map(y=>dm(u.It,y))};yield u.co("Commit",d,g)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tt.min())?tr.exists(!1):tr.updateTime(t):tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Ne(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tr.updateTime(t)}return tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Sj{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Nc=r.maxAttempts,this.xo=new VM(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,we.Z)(function*(){const t=new Dj(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Oc(o)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Gf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!om(t)}return!1}}class Aj{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Yr.UNAUTHENTICATED,this.clientId=gT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,we.Z)(function*(d){Pe("FirestoreClient","Received user=",d.uid),yield o.authCredentialListener(d),o.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Pe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=vv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function o1(n,e){return OR.apply(this,arguments)}function OR(){return OR=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(o){r.isEqual(o)||(yield AO(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),OR.apply(this,arguments)}function a1(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield LR(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>WO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>WO(e.remoteStore,o)),n.onlineComponents=e}),FR.apply(this,arguments)}function LR(n){return VR.apply(this,arguments)}function VR(){return VR=(0,we.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield o1(n,new r1)),n.offlineComponents}),VR.apply(this,arguments)}function _D(n){return UR.apply(this,arguments)}function UR(){return UR=(0,we.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield a1(n,new kR)),n.onlineComponents}),UR.apply(this,arguments)}function l1(n){return LR(n).then(e=>e.persistence)}function yD(n){return LR(n).then(e=>e.localStore)}function u1(n){return _D(n).then(e=>e.remoteStore)}function BR(n){return _D(n).then(e=>e.syncEngine)}function Cv(n){return jR.apply(this,arguments)}function jR(){return jR=(0,we.Z)(function*(n){const e=yield _D(n),t=e.eventManager;return t.onListen=oj.bind(null,e.syncEngine),t.onUnlisten=aj.bind(null,e.syncEngine),t}),jR.apply(this,arguments)}function c1(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,o,u,d,g){const y=new mD({next:D=>{o.enqueueAndForget(()=>sR(i,C));const M=D.docs.has(u);!M&&D.fromCache?g.reject(new Ne(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&D.fromCache&&d&&"server"===d.source?g.reject(new Ne(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new lR(rm(u.path),y,{includeMetadataChanges:!0,Nu:!0});return rR(i,C)}(yield Cv(n),n.asyncQueue,e,t,r)})),r.promise}function d1(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,o,u,d,g){const y=new mD({next:D=>{o.enqueueAndForget(()=>sR(i,C)),D.fromCache&&"server"===d.source?g.reject(new Ne(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new lR(u,y,{includeMetadataChanges:!0,Nu:!0});return rR(i,C)}(yield Cv(n),n.asyncQueue,e,t,r)})),r.promise}const h1=new Map;function HR(n,e,t){if(!t)throw new Ne(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function f1(n,e,t,r){if(!0===e&&!0===r)throw new Ne(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function p1(n){if(!Ke.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function g1(n){if(Ke.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vD(n);throw new Ne(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function m1(n,e){if(e<=0)throw new Ne(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class _1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,f1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Kg;switch(t.type){case"gapi":return new qx(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=h1.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),h1.delete(e),t.terminate())}(this),Promise.resolve()}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class us{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class Cc extends us{constructor(e,t,r){super(e,t,rm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Ke(e))}withConverter(e){return new Cc(this.firestore,e,this._path)}}function y1(n,e,...t){if(n=(0,k.m9)(n),HR("collection","path",e),n instanceof oI){const r=Jt.fromString(e,...t);return g1(r),new Cc(n,null,r)}{if(!(n instanceof nr||n instanceof Cc))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return g1(r),new Cc(n.firestore,null,r)}}function wD(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=gT.R()),HR("doc","path",e),n instanceof oI){const r=Jt.fromString(e,...t);return p1(r),new nr(n,null,new Ke(r))}{if(!(n instanceof nr||n instanceof Cc))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return p1(r),new nr(n.firestore,n instanceof Cc?n.converter:null,new Ke(r))}}function v1(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof nr||n instanceof Cc)&&(e instanceof nr||e instanceof Cc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function w1(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof us&&e instanceof us&&n.firestore===e.firestore&&Zy(n._query,e._query)&&n.converter===e.converter}class Uj{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new VM(this,"async_queue_retry"),this.jc=()=>{const t=fD();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=fD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=fD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Qr;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!$l(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,ar("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=nR.createAndSchedule(this,e,t,r,o=>this.Jc(o));return this.Uc.push(i),i}Wc(){this.qc&&st()}verifyOperationInProgress(){}Yc(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function $R(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Bj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class cr extends oI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Uj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||E1(this),this._firestoreClient.terminate()}}function Xr(n){return n._firestoreClient||E1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function E1(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $f(n._databaseId,o,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var o,d;n._firestoreClient=new Aj(n._authCredentials,n._appCheckCredentials,n._queue,r)}function I1(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield o1(n,t),yield a1(n,e),r.resolve()}catch(i){const o=i;if(!("FirebaseError"===(u=o).name?u.code===fe.FAILED_PRECONDITION||u.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;cc("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function C1(n){if(n._initialized||n._terminated)throw new Ne(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bc(Rr.fromBase64String(e))}catch(t){throw new Ne(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bc(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _m{constructor(e){this._methodName=e}}class ED{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const Yj=/^__.*__$/;class Qj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ja(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jf(e,this.data,t,this.fieldTransforms)}}class b1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ja(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function T1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class ID{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ea(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new ID(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return TD(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(T1(this.na)&&Yj.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class Jj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||rI(e)}fa(e,t,r,i=!1){return new ID({na:e,methodName:t,la:r,path:lr.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function ym(n){const e=n._freezeSettings(),t=rI(n._databaseId);return new Jj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CD(n,e,t,r,i,o={}){const u=n.fa(o.merge||o.mergeFields?2:0,e,t,i);qR("Data must be an object, but it was:",u,r);const d=A1(r,u);let g,y;if(o.merge)g=new Os(u.fieldMask),y=u.fieldTransforms;else if(o.mergeFields){const C=[];for(const D of o.mergeFields){const M=KR(e,D,t);if(!u.contains(M))throw new Ne(fe.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);M1(C,M)||C.push(M)}g=new Os(C),y=u.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,y=u.fieldTransforms;return new Qj(new Jr(d),g,y)}class aI extends _m{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aI}}function D1(n,e,t){return new ID({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class GR extends _m{_toFieldTransform(e){return new th(e.path,new eh)}isEqual(e){return e instanceof GR}}class Xj extends _m{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=D1(this,e,!0),r=this.da.map(o=>vm(o,t)),i=new yc(r);return new th(e.path,i)}isEqual(e){return this===e}}class eH extends _m{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=D1(this,e,!0),r=this.da.map(o=>vm(o,t)),i=new vc(r);return new th(e.path,i)}isEqual(e){return this===e}}class tH extends _m{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new wc(e.It,LT(e.It,this._a));return new th(e.path,t)}isEqual(e){return this===e}}function WR(n,e,t,r){const i=n.fa(1,e,t);qR("Data must be an object, but it was:",i,r);const o=[],u=Jr.empty();hc(r,(g,y)=>{const C=bD(e,g,t);y=(0,k.m9)(y);const D=i.ua(C);if(y instanceof aI)o.push(C);else{const M=vm(y,D);null!=M&&(o.push(C),u.set(C,M))}});const d=new Os(o);return new b1(u,d,i.fieldTransforms)}function zR(n,e,t,r,i,o){const u=n.fa(1,e,t),d=[KR(e,r,t)],g=[i];if(o.length%2!=0)throw new Ne(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<o.length;M+=2)d.push(KR(e,o[M])),g.push(o[M+1]);const y=[],C=Jr.empty();for(let M=d.length-1;M>=0;--M)if(!M1(y,d[M])){const O=d[M];let U=g[M];U=(0,k.m9)(U);const J=u.ua(O);if(U instanceof aI)y.push(O);else{const se=vm(U,J);null!=se&&(y.push(O),C.set(O,se))}}const D=new Os(y);return new b1(C,D,u.fieldTransforms)}function S1(n,e,t,r=!1){return vm(t,n.fa(r?4:3,e))}function vm(n,e){if(x1(n=(0,k.m9)(n)))return qR("Unsupported field value:",e,n),A1(n,e);if(n instanceof _m)return function(t,r){if(!T1(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const u of t){let d=vm(u,r.ca(o));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return LT(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=jn.fromDate(t);return{timestampValue:rh(r.It,i)}}if(t instanceof jn){const i=new jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:rh(r.It,i)}}if(t instanceof ED)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bc)return{bytesValue:iv(r.It,t._byteString)};if(t instanceof nr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.aa(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:YT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${vD(t)}`)}(n,e)}function A1(n,e){const t={};return Vf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hc(n,(r,i)=>{const o=vm(i,e.ia(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function x1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof jn||n instanceof ED||n instanceof bc||n instanceof nr||n instanceof _m)}function qR(n,e,t){if(!x1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vD(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function KR(n,e,t){if((e=(0,k.m9)(e))instanceof oh)return e._internalPath;if("string"==typeof e)return bD(n,e);throw TD("Field path arguments must be of type string or ",n,!1,void 0,t)}const nH=new RegExp("[~\\*/\\[\\]]");function bD(n,e,t){if(e.search(nH)>=0)throw TD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oh(...e.split("."))._internalPath}catch{throw TD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function TD(n,e,t,r,i){const o=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(o||u)&&(g+=" (found",o&&(g+=` in field ${r}`),u&&(g+=` in document ${i}`),g+=")"),new Ne(fe.INVALID_ARGUMENT,d+n+g)}function M1(n,e){return n.some(t=>t.isEqual(e))}class lI{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(DD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rH extends lI{data(){return super.data()}}function DD(n,e){return"string"==typeof e?bD(n,e):e instanceof oh?e._internalPath:e._delegate._internalPath}class wm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ah extends lI{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(DD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class uI extends ah{data(e={}){return super.data(e)}}class op{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new uI(this._firestore,this._userDataWriter,r.key,r,new wm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new uI(r._firestore,r._userDataWriter,u.doc.key,u.doc,new wm(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new uI(r._firestore,r._userDataWriter,u.doc.key,u.doc,new wm(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==u.type&&(g=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),y=o.indexOf(u.doc.key)),{type:iH(u.type),doc:d,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function iH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function R1(n,e){return n instanceof ah&&e instanceof ah?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof op&&e instanceof op&&n._firestore===e._firestore&&w1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function N1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cI{}function ap(n,...e){for(const t of e)n=t._apply(n);return n}class sH extends cI{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=ym(e.firestore),r=function(i,o,u,d,g,y,C){let D;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){V1(C,y);const O=[];for(const U of C)O.push(L1(d,i,U));D={arrayValue:{values:O}}}else D=L1(d,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||V1(C,y),D=S1(u,"where",C,"in"===y||"not-in"===y);const M=Nr.create(g,y,D);return function(O,U){if(U.dt()){const se=N0(O);if(null!==se&&!se.isEqual(U.field))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${se.toString()}' and '${U.field.toString()}'`);const Fe=R0(O);null!==Fe&&U1(0,U.field,Fe)}const J=function(se,Fe){for(const Ge of se.filters)if(Fe.indexOf(Ge.op)>=0)return Ge.op;return null}(O,function(se){switch(se){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==J)throw new Ne(fe.INVALID_ARGUMENT,J===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${J.toString()}' filters.`)}(i,M),M}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new us(e.firestore,e.converter,function(i,o){const u=i.filters.concat([o]);return new _c(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class aH extends cI{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Kf(i,o);return function(d,g){if(null===R0(d)){const y=N0(d);null!==y&&U1(0,y,g.field)}}(r,u),u}(e._query,this.wa,this.ya);return new us(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new _c(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class P1 extends cI{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new us(e.firestore,e.converter,im(e._query,this.pa,this.Ia))}}class k1 extends cI{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=F1(e,this.type,this.Ta,this.Ea);return new us(e.firestore,e.converter,(i=t,new _c((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class O1 extends cI{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=F1(e,this.type,this.Ta,this.Ea);return new us(e.firestore,e.converter,(i=t,new _c((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function F1(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof lI)return function(i,o,u,d,g){if(!d)throw new Ne(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const C of Zf(i))if(C.field.isKeyField())y.push(gc(o,d.key));else{const D=d.data.field(C.field);if(Wy(D))throw new Ne(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const M=C.field.canonicalString();throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(D)}return new mc(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ym(n.firestore);return function(o,u,d,g,y,C){const D=o.explicitOrderBy;if(y.length>D.length)throw new Ne(fe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let O=0;O<y.length;O++){const U=y[O];if(D[O].field.isKeyField()){if("string"!=typeof U)throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof U}`);if(!kT(o)&&-1!==U.indexOf("/"))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${U}' contains a slash.`);const J=o.path.child(Jt.fromString(U));if(!Ke.isDocumentKey(J))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const se=new Ke(J);M.push(gc(u,se))}else{const J=S1(d,g,U);M.push(J)}}return new mc(M,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function L1(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kT(e)&&-1!==t.indexOf("/"))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ke.isDocumentKey(r))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gc(n,new Ke(r))}if(t instanceof nr)return gc(n,t._key);throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vD(t)}.`)}function V1(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function U1(n,e,t){if(!t.isEqual(e))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const gH={maxAttempts:5};class ZR{convertValue(e,t="none"){switch(Jd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return hc(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new ED(Hn(e.latitude),Hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hf(e));default:return null}}convertTimestamp(e){const t=Qo(e);return new jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);xt(vM(r));const i=new fc(r.get(1),r.get(3)),o=new Ke(r.popFirst(5));return i.isEqual(t)||ar(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function SD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class mH extends ZR{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}class B1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ym(e)}set(e,t,r){this._verifyNotCommitted();const i=lp(e,this._firestore),o=SD(i.converter,t,r),u=CD(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,tr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=lp(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof oh?zR(this._dataReader,"WriteBatch.update",o._key,t,r,i):WR(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lp(e,this._firestore);return this._mutations=this._mutations.concat(new nh(t._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lp(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Ne(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Em extends ZR{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function j1(n,e,t){n=ln(n,nr);const r=ln(n.firestore,cr),i=SD(n.converter,e,t);return bv(r,[CD(ym(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,tr.none())])}function H1(n,e,t,...r){n=ln(n,nr);const i=ln(n.firestore,cr),o=ym(i);let u;return u="string"==typeof(e=(0,k.m9)(e))||e instanceof oh?zR(o,"updateDoc",n._key,e,t,r):WR(o,"updateDoc",n._key,e),bv(i,[u.toMutation(n._key,tr.exists(!0))])}function $1(n,...e){var t,r,i;n=(0,k.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||$R(e[u])||(o=e[u],u++);const d={includeMetadataChanges:o.includeMetadataChanges};if($R(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let g,y,C;if(n instanceof nr)y=ln(n.firestore,cr),C=rm(n._key.path),g={next:D=>{e[u]&&e[u](YR(y,n,D))},error:e[u+1],complete:e[u+2]};else{const D=ln(n,us);y=ln(D.firestore,cr),C=D._query;const M=new Em(y);g={next:O=>{e[u]&&e[u](new op(y,M,D,O))},error:e[u+1],complete:e[u+2]},N1(n._query)}return function(D,M,O,U){const J=new mD(U),se=new lR(M,J,O);return D.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return rR(yield Cv(D),se)})),()=>{J.Rc(),D.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return sR(yield Cv(D),se)}))}}(Xr(y),C,d,g)}function bv(n,e){return function(t,r){const i=new Qr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function lj(n,e,t){return fR.apply(this,arguments)}(yield BR(t),r,i)})),i.promise}(Xr(n),e)}function YR(n,e,t){const r=t.docs.get(e._key),i=new Em(n);return new ah(n,i,e._key,r,new wm(t.hasPendingWrites,t.fromCache),e.converter)}class DH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ym(e)}get(e){const t=lp(e,this._firestore),r=new mH(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const o=i[0];if(o.isFoundDocument())return new lI(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new lI(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=lp(e,this._firestore),o=SD(i.converter,t,r),u=CD(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const o=lp(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof oh?zR(this._dataReader,"Transaction.update",o._key,t,r,i):WR(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=lp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lp(e,this._firestore),r=new Em(this._firestore);return super.get(e).then(i=>new ah(this._firestore,r,t._key,i._document,new wm(!1,!1),t.converter))}}function QR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function W1(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function z1(){if(!function C0(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Of=Ci.SDK_VERSION,(0,Ci._registerComponent)(new Ns.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),u=new cr(new _0(t.getProvider("auth-internal")),new Zg(t.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ne(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fc(d.options.projectId,g)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Ci.registerVersion)(hT,"3.4.15",n),(0,Ci.registerVersion)(hT,"3.4.15","esm2017")}();class dI{constructor(e){this._delegate=e}static fromBase64String(e){return z1(),new dI(bc.fromBase64String(e))}static fromUint8Array(e){return W1(),new dI(bc.fromUint8Array(e))}toBase64(){return z1(),this._delegate.toBase64()}toUint8Array(){return W1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JR(n){return function OH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class FH{enableIndexedDbPersistence(e,t){return function Hj(n,e){C1(n=ln(n,cr));const t=Xr(n),r=n._freezeSettings(),i=new kR;return I1(t,i,new i1(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $j(n){C1(n=ln(n,cr));const e=Xr(n),t=n._freezeSettings(),r=new kR;return I1(e,r,new bj(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Gj(n){if(n._initialized&&!n._terminated)throw new Ne(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!fo.C())return Promise.resolve();const i=r+"main";yield fo.delete(i)}),function(r){return t.apply(this,arguments)})(AM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class q1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Lj(n,e,t,r={}){var i;const o=(n=ln(n,oI))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&cc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=Yr.MOCK_USER;else{u=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ne(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Yr(g)}n._authCredentials=new zx(new pT(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function zj(n){return function xj(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield l1(n),t=yield u1(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i._u.delete(0),iI(i)}(t)}))}(Xr(n=ln(n,cr)))}(this._delegate)}disableNetwork(){return function qj(n){return function Mj(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield l1(n),t=yield u1(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const o=Qe(i);o._u.add(0),yield mv(o),o.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Xr(n=ln(n,cr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,f1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Wj(n){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function hj(n,e){return yR.apply(this,arguments)}(yield BR(e),t)})),t.promise}(Xr(n=ln(n,cr)))}(this._delegate)}onSnapshotsInSync(e){return function TH(n,e){return function Pj(n,e){const t=new mD(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield Cv(n),i=t,Qe(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield Cv(n),i=t,void Qe(r).Ru.delete(i);var r,i}))}}(Xr(n=ln(n,cr)),$R(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Tv(this,y1(this._delegate,e))}catch(t){throw Ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ha(this,wD(this._delegate,e))}catch(t){throw Ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vs(this,function Vj(n,e){if(n=ln(n,oI),HR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new us(n,null,(t=e,new _c(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function SH(n,e,t){n=ln(n,cr);const r=Object.assign(Object.assign({},gH),t);return function(i){if(i.maxAttempts<1)throw new Ne(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function kj(n,e,t){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const i=yield(o=n,_D(o).then(u=>u.datastore));var o;new Sj(n.asyncQueue,i,t,e,r).run()})),r.promise}(Xr(n),i=>e(new DH(n,i)),r)}(this._delegate,t=>e(new K1(this,t)))}batch(){return Xr(this._delegate),new Z1(new B1(this._delegate,e=>bv(this._delegate,e)))}loadBundle(e){return function Kj(n,e){const t=Xr(n=ln(n,cr)),r=new Bj;return function Oj(n,e,t,r){const i=function(o,u){let d;return d="string"==typeof o?(new TextEncoder).encode(o):o,g=function(g,y){if(g instanceof Uint8Array)return s1(g,y);if(g instanceof ArrayBuffer)return s1(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new Tj(g,u);var g}(t,rI(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function Cj(n,e,t){const r=Qe(n);var i;(i=(0,we.Z)(function*(o,u,d){try{const g=yield u.getMetadata();if(yield function(M,O){const U=Qe(M),J=hi(O.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",se=>U.Ns.getBundleMetadata(se,O.id)).then(se=>!!se&&se.createTime.compareTo(J)>=0)}(o.localStore,g))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(M=g).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);d._updateProgress(KO(g));const y=new nj(g,o.localStore,u.It);let C=yield u.wc();for(;C;){const M=yield y.Ou(C);M&&d._updateProgress(M),C=yield u.wc()}const D=yield y.complete();return yield sh(o,D.Bu,void 0),yield function(M,O){const U=Qe(M);return U.persistence.runTransaction("Save bundle","readwrite",J=>U.Ns.saveBundleMetadata(J,O))}(o.localStore,g),d._completeWith(D.progress),Promise.resolve(D.$u)}catch(g){return cc("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var M}),function(o,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield BR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Zj(n,e){return function Fj(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ns.getNamedQuery(o,r))}(yield yD(n),e)}))}(Xr(n=ln(n,cr)),e).then(t=>t?new us(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vs(this,t):null)}}class AD extends ZR{constructor(e){super(),this.firestore=e}convertBytes(e){return new dI(new bc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ha.forKey(t,this.firestore,null)}}class K1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}get(e){const t=Cm(e);return this._delegate.get(t).then(r=>new hI(this._firestore,new ah(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Cm(e);return r?(QR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Cm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Cm(e);return this._delegate.delete(t),this}}class Z1{constructor(e){this._delegate=e}set(e,t,r){const i=Cm(e);return r?(QR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Cm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Cm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Im{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new uI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Im.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Im(e,new AD(e),t),i.set(t,o)),o}}Im.INSTANCES=new WeakMap;class Ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ha(t,new nr(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Ha(t,new nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Tv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Tv(this.firestore,y1(this._delegate,e))}catch(t){throw Ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof nr&&v1(this._delegate,e)}set(e,t){t=QR("DocumentReference.set",t);try{return t?j1(this._delegate,e,t):j1(this._delegate,e)}catch(r){throw Ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?H1(this._delegate,e):H1(this._delegate,e,t,...r)}catch(i){throw Ls(i,"updateDoc()","DocumentReference.update()")}}delete(){return function CH(n){return bv(ln(n.firestore,cr),[new nh(n._key,tr.none())])}(this._delegate)}onSnapshot(...e){const t=Y1(e),r=Q1(e,i=>new hI(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return $1(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function yH(n){n=ln(n,nr);const e=ln(n.firestore,cr),t=Xr(e),r=new Em(e);return function Rj(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,o,u){try{const d=yield function(g,y){const C=Qe(g);return C.persistence.runTransaction("read document","readonly",D=>C.localDocuments.getDocument(D,y))}(i,o);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Ne(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=vv(d,`Failed to get document '${o} from cache`);u.reject(g)}}),function(i,o,u){return r.apply(this,arguments)})(yield yD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ah(e,r,n._key,i,new wm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function vH(n){n=ln(n,nr);const e=ln(n.firestore,cr);return c1(Xr(e),n._key,{source:"server"}).then(t=>YR(e,n,t))}(this._delegate):function _H(n){n=ln(n,nr);const e=ln(n.firestore,cr);return c1(Xr(e),n._key).then(t=>YR(e,n,t))}(this._delegate),t.then(r=>new hI(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ha(this.firestore,this._delegate.withConverter(e?Im.getInstance(this.firestore,e):null))}}function Ls(n,e,t){return n.message=n.message.replace(e,t),n}function Y1(n){for(const e of n)if("object"==typeof e&&!JR(e))return e;return{}}function Q1(n,e){var t,r;let i;return i=JR(n[0])?n[0]:JR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class hI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return R1(this._delegate,e._delegate)}}class fI extends hI{data(e){const t=this._delegate.data(e);return function Hk(n,e){n||st()}(void 0!==t),t}}class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}where(e,t,r){try{return new Vs(this.firestore,ap(this._delegate,function oH(n,e,t){const r=e,i=DD("where",n);return new sH(i,r,t)}(e,t,r)))}catch(i){throw Ls(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vs(this.firestore,ap(this._delegate,function lH(n,e="asc"){const t=e,r=DD("orderBy",n);return new aH(r,t)}(e,t)))}catch(r){throw Ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vs(this.firestore,ap(this._delegate,function uH(n){return m1("limit",n),new P1("limit",n,"F")}(e)))}catch(t){throw Ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vs(this.firestore,ap(this._delegate,function cH(n){return m1("limitToLast",n),new P1("limitToLast",n,"L")}(e)))}catch(t){throw Ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vs(this.firestore,ap(this._delegate,function dH(...n){return new k1("startAt",n,!0)}(...e)))}catch(t){throw Ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vs(this.firestore,ap(this._delegate,function hH(...n){return new k1("startAfter",n,!1)}(...e)))}catch(t){throw Ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vs(this.firestore,ap(this._delegate,function fH(...n){return new O1("endBefore",n,!1)}(...e)))}catch(t){throw Ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vs(this.firestore,ap(this._delegate,function pH(...n){return new O1("endAt",n,!0)}(...e)))}catch(t){throw Ls(t,"endAt()","Query.endAt()")}}isEqual(e){return w1(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function EH(n){n=ln(n,us);const e=ln(n.firestore,cr),t=Xr(e),r=new Em(e);return function Nj(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,o,u){try{const d=yield cD(i,o,!0),g=new QO(o,d.Hi),y=g.ju(d.documents),C=g.applyChanges(y,!1);u.resolve(C.snapshot)}catch(d){const g=vv(d,`Failed to execute query '${o} against cache`);u.reject(g)}}),function(i,o,u){return r.apply(this,arguments)})(yield yD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new op(e,r,n,i))}(this._delegate):"server"===e?.source?function IH(n){n=ln(n,us);const e=ln(n.firestore,cr),t=Xr(e),r=new Em(e);return d1(t,n._query,{source:"server"}).then(i=>new op(e,r,n,i))}(this._delegate):function wH(n){n=ln(n,us);const e=ln(n.firestore,cr),t=Xr(e),r=new Em(e);return N1(n._query),d1(t,n._query).then(i=>new op(e,r,n,i))}(this._delegate),t.then(r=>new XR(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Y1(e),r=Q1(e,i=>new XR(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return $1(this._delegate,t,r)}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?Im.getInstance(this.firestore,e):null))}}class VH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class XR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new fI(this._firestore,r))})}isEqual(e){return R1(this._delegate,e._delegate)}}class Tv extends Vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ha(this.firestore,e):null}doc(e){try{return new Ha(this.firestore,void 0===e?wD(this._delegate):wD(this._delegate,e))}catch(t){throw Ls(t,"doc()","CollectionReference.doc()")}}add(e){return function bH(n,e){const t=ln(n.firestore,cr),r=wD(n),i=SD(n.converter,e);return bv(t,[CD(ym(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ha(this.firestore,t))}isEqual(e){return v1(this._delegate,e._delegate)}withConverter(e){return new Tv(this.firestore,this._delegate.withConverter(e?Im.getInstance(this.firestore,e):null))}}function Cm(n){return ln(n,nr)}class eN{constructor(...e){this._delegate=new oh(...e)}static documentId(){return new eN(lr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof oh&&this._delegate._internalPath.isEqual(e._internalPath)}}class bm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xH(){return new GR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bm(e)}static delete(){const e=function AH(){return new aI("deleteField")}();return e._methodName="FieldValue.delete",new bm(e)}static arrayUnion(...e){const t=function MH(...n){return new Xj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bm(t)}static arrayRemove(...e){const t=function RH(...n){return new eH("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bm(t)}static increment(e){const t=function NH(n){return new tH("increment",n)}(e);return t._methodName="FieldValue.increment",new bm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const UH={Firestore:q1,GeoPoint:ED,Timestamp:jn,Blob:dI,Transaction:K1,WriteBatch:Z1,DocumentReference:Ha,DocumentSnapshot:hI,Query:Vs,QueryDocumentSnapshot:fI,QuerySnapshot:XR,CollectionReference:Tv,FieldPath:eN,FieldValue:bm,setLogLevel:function LH(n){!function fT(n){uc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function jH(n){(function BH(n,e){n.INTERNAL.registerComponent(new Ns.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},UH)))})(n,(e,t)=>new q1(e,t,new FH)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(bg.Z);var tN=V(6451),xD=V(5363),HH=V(6063);class $H extends Tr.x{constructor(e=1/0,t=1/0,r=HH.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:u}=this;t||(r.push(e),!i&&r.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let u=0;u<o.length&&!e.closed;u+=r?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const u=t.now();let d=0;for(let g=1;g<r.length&&r[g]<=u;g+=2)d=g;d&&r.splice(0,d+1)}}}var J1=V(3099);function X1(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,J1.B)({connector:()=>new $H(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function eF(n,e){return(0,Sd.m)(e)?An(()=>n,e):An(()=>n)}var nN=V(9468);V(5867);const nF=new Map,KH={activated:!1,tokenObservers:[]},ZH={initialized:!1,enabled:!1};function Si(n){return nF.get(n)||KH}function Jl(n,e){nF.set(n,e)}function RD(){return ZH}class e${constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function t$(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Us=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function iF(n){if(!Si(n).activated)throw Us.create("use-before-activation",{appName:n.name})}function oN(n,e){return aN.apply(this,arguments)}function aN(){return aN=(0,we.Z)(function*({url:n,body:e},t){var r,i;const o={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const O=yield u.getHeartbeatsHeader();O&&(o["X-Firebase-Client"]=O)}const d={method:"POST",body:JSON.stringify(e),headers:o};let g,y;try{g=yield fetch(n,d)}catch(O){throw Us.create("fetch-network-error",{originalErrorMessage:null===(r=O)||void 0===r?void 0:r.message})}if(200!==g.status)throw Us.create("fetch-status-error",{httpStatus:g.status});try{y=yield g.json()}catch(O){throw Us.create("fetch-parse-error",{originalErrorMessage:null===(i=O)||void 0===i?void 0:i.message})}const C=y.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw Us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(C[1]),M=Date.now();return{token:y.token,expireTimeMillis:M+D,issuedAtTimeMillis:M}}),aN.apply(this,arguments)}function s$(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const pI="firebase-app-check-store";let kD=null;function oF(){return kD||(kD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var o;e(Us.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(pI,{keyPath:"compositeKey"})}}catch(r){e(Us.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),kD)}function lN(){return lN=(0,we.Z)(function*(n,e){const r=(yield oF()).transaction(pI,"readwrite"),o=r.objectStore(pI).put({compositeKey:n,value:e});return new Promise((u,d)=>{o.onsuccess=g=>{u()},r.onerror=g=>{var y;d(Us.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})}),lN.apply(this,arguments)}const gI=new co.Yd("@firebase/app-check");function cF(n,e){return(0,k.hl)()?function u$(n,e){return function aF(n,e){return lN.apply(this,arguments)}(function uF(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{gI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function dF(){return RD().enabled}function hF(){return hN.apply(this,arguments)}function hN(){return hN=(0,we.Z)(function*(){const n=RD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),hN.apply(this,arguments)}const g$={error:"UNKNOWN_ERROR"};function m$(n){return k.US.encodeString(JSON.stringify(n),!1)}function OD(n){return fN.apply(this,arguments)}function fN(){return fN=(0,we.Z)(function*(n,e=!1){const t=n.app;iF(t);const r=Si(t);let o,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&FD(g)&&(i=g)}if(!e&&i&&FD(i))return{token:i.token};let d,u=!1;if(dF()){r.exchangeTokenPromise||(r.exchangeTokenPromise=oN(s$(t,yield hF()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const g=yield r.exchangeTokenPromise;return yield cF(t,g),Jl(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),u=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?gI.warn(g.message):gI.error(g),o=g}return i?(d={token:i.token},Jl(t,Object.assign(Object.assign({},r),{token:i})),yield cF(t,i)):d=y$(o),u&&pF(t,d),d}),fN.apply(this,arguments)}function gN(n,e){const t=Si(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Jl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function fF(n){const{app:e}=n,t=Si(e);let r=t.tokenRefresher;r||(r=function _$(n){const{app:e}=n;return new e$((0,we.Z)(function*(){let r;if(r=Si(e).token?yield OD(n,!0):yield OD(n),r.error)throw r.error}),()=>!0,()=>{const t=Si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Jl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function pF(n,e){const t=Si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function FD(n){return n.expireTimeMillis-Date.now()>0}function y$(n){return{token:m$(g$),error:n}}class v${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Si(this.app);for(const t of e)gN(this.app,t.next);return Promise.resolve()}}const IF="app-check-internal";!function P$(){(0,Ci._registerComponent)(new Ns.wA("app-check",n=>function w$(n,e){return new v$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(IF).initialize()})),(0,Ci._registerComponent)(new Ns.wA(IF,n=>function E$(n){return{getToken:e=>OD(n,e),addTokenListener:e=>function pN(n,e,t,r){const{app:i}=n,o=Si(i),u={next:t,error:r,type:e};if(Jl(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,u]})),o.token&&FD(o.token)){const d=o.token;Promise.resolve().then(()=>{t({token:d.token}),fF(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>fF(n))}(n,"INTERNAL",e),removeTokenListener:e=>gN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ci.registerVersion)("@firebase/app-check","0.5.12")}();class mI{constructor(){return(0,on.vb)("app-check")}}typeof window<"u"&&window;var VD=V(127);const wN=new f.OlP("angularfire2.auth.use-emulator"),EN=new f.OlP("angularfire2.auth.settings"),IN=new f.OlP("angularfire2.auth.tenant-id"),CN=new f.OlP("angularfire2.auth.langugage-code"),bN=new f.OlP("angularfire2.auth.use-device-language"),TN=new f.OlP("angularfire.auth.persistence"),DN=(n,e,t,r,i,o,u,d)=>(0,Ar.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,o&&g.useDeviceLanguage(),u)for(const[y,C]of Object.entries(u))g.settings[y]=C;return d&&g.setPersistence(d),g},[t,r,i,o,u,d]);let UD=(()=>{class n{constructor(t,r,i,o,u,d,g,y,C,D,M,O){const U=new Tr.x,J=Je(void 0).pipe((0,xD.Q)(u.outsideAngular),An(()=>o.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,2274)))),(0,Ct.U)(()=>(0,Ar.on)(t,o,r)),(0,Ct.U)(se=>DN(se,o,d,y,C,D,g,M)),X1({bufferSize:1,refCount:!1}));if(Cr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{J.pipe(Al()).subscribe();const Fe=J.pipe(An(We=>We.getRedirectResult().then(_t=>_t,()=>null)),on.iC,X1({bufferSize:1,refCount:!1})),Ge=J.pipe(An(We=>new lo.y(_t=>({unsubscribe:o.runOutsideAngular(()=>We.onAuthStateChanged(wt=>_t.next(wt),wt=>_t.error(wt),()=>_t.complete()))})))),qe=J.pipe(An(We=>new lo.y(_t=>({unsubscribe:o.runOutsideAngular(()=>We.onIdTokenChanged(wt=>_t.next(wt),wt=>_t.error(wt),()=>_t.complete()))}))));this.authState=Fe.pipe(eF(Ge),(0,nN.R)(u.outsideAngular),(0,xD.Q)(u.insideAngular)),this.user=Fe.pipe(eF(qe),(0,nN.R)(u.outsideAngular),(0,xD.Q)(u.insideAngular)),this.idToken=this.user.pipe(An(We=>We?(0,pn.D)(We.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(An(We=>We?(0,pn.D)(We.getIdTokenResult()):Je(null))),this.credential=(0,tN.T)(Fe,U,this.authState.pipe(Uo(We=>!We))).pipe((0,Ct.U)(We=>We?.user?We:null),(0,nN.R)(u.outsideAngular),(0,xD.Q)(u.insideAngular))}return(0,Ar.pX)(this,J,o,{spy:{apply:(se,Fe,Ge)=>{(se.startsWith("signIn")||se.startsWith("createUser"))&&Ge.then(qe=>U.next(qe))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ar.Dh),f.LFG(Ar.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(on.HU),f.LFG(wN,8),f.LFG(EN,8),f.LFG(IN,8),f.LFG(CN,8),f.LFG(bN,8),f.LFG(TN,8),f.LFG(mI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),U$=(()=>{class n{constructor(){VD.Z.registerVersion("angularfire",on.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[UD]}),n})();function bF(n,e){return function B$(n,e=Ef.z){return new lo.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function SN(n,e){return bF(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function BD(n,e){return SN(n,e).pipe(sg(void 0),mE(),(0,Ct.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const g=i.find(C=>C.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(C=>C.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),o}))}function TF(n,e,t){return BD(n,t).pipe(Xu((r,i)=>function H$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function $$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return AN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return AN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return AN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),Cg(),(0,Ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function AN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function DF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class SF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=BD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(sg(void 0),mE(),Uo(([r,i])=>i.length>0||!r),(0,Ct.U)(([r,i])=>i),on.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=DF(e);return TF(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return SN(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),on.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(on.iC)}add(e){return this.ref.add(e)}doc(e){return new AF(this.ref.doc(e),this.afs)}}class AF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=RF(r,t);return new SF(i,o,this.afs)}snapshotChanges(){return function j$(n,e){return bF(n,e).pipe(sg(void 0),mE(),(0,Ct.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(on.iC)}}class G${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?BD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Uo(t=>t.length>0),on.iC):BD(this.query,this.afs.schedulers.outsideAngular).pipe(on.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=DF(e);return TF(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return SN(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),on.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(on.iC)}}const xF=new f.OlP("angularfire2.enableFirestorePersistence"),MF=new f.OlP("angularfire2.firestore.persistenceSettings"),W$=new f.OlP("angularfire2.firestore.settings"),z$=new f.OlP("angularfire2.firestore.use-emulator");function RF(n,e=(t=>t)){return{query:e(n),ref:n}}let NF=(()=>{class n{constructor(t,r,i,o,u,d,g,y,C,D,M,O,U,J,se,Fe,Ge){this.schedulers=g;const qe=(0,Ar.on)(t,d,r),We=C;D&&DN(qe,d,M,U,J,se,O,Fe),[this.firestore,this.persistenceEnabled$]=(0,Ar.cc)(`${qe.name}.firestore`,"AngularFirestore",qe.name,()=>{const _t=d.runOutsideAngular(()=>qe.firestore());if(o&&_t.settings(o),We&&_t.useEmulator(...We),i&&!Cr(u)){const wt=()=>{try{return(0,pn.D)(_t.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Qt){return typeof console<"u"&&console.warn(Qt),Je(!1)}};return[_t,d.runOutsideAngular(wt)]}return[_t,Je(!1)]},[o,We,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=RF(i,r),d=this.schedulers.ngZone.run(()=>o);return new SF(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),o=this.firestore.collectionGroup(t);return new G$(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new AF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ar.Dh),f.LFG(Ar.xv,8),f.LFG(xF,8),f.LFG(W$,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(on.HU),f.LFG(MF,8),f.LFG(z$,8),f.LFG(UD,8),f.LFG(wN,8),f.LFG(EN,8),f.LFG(IN,8),f.LFG(CN,8),f.LFG(bN,8),f.LFG(TN,8),f.LFG(mI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q$=(()=>{class n{constructor(){VD.Z.registerVersion("angularfire",on.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:xF,useValue:!0},{provide:MF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[NF]}),n})(),PF=(()=>{class n{constructor(t){this.firestore=t}agregarEmpleado(t){return this.firestore.collection("empleados").add(t)}getEmpleados(){return this.firestore.collection("empleados",t=>t.orderBy("fechaCreacion","desc")).snapshotChanges()}eliminarEmpleado(t){return this.firestore.collection("empleados").doc(t).delete()}getEmpleado(t){return this.firestore.collection("empleados").doc(t).snapshotChanges()}actualizarEmpleado(t,r){return this.firestore.collection("empleados").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(NF))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kF=["toast-component",""];function K$(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",5),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.remove())}),f.TgZ(1,"span",6),f._uU(2,"\xd7"),f.qZA()()}}function Z$(n,e){if(1&n&&(f.ynx(0),f._uU(1),f.BQk()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("[",t.duplicatesCount+1,"]")}}function Y$(n,e){if(1&n&&(f.TgZ(0,"div"),f._uU(1),f.YNc(2,Z$,2,1,"ng-container",4),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.titleClass),f.uIk("aria-label",t.title),f.xp6(1),f.hij(" ",t.title," "),f.xp6(1),f.Q6J("ngIf",t.duplicatesCount)}}function Q$(n,e){if(1&n&&f._UZ(0,"div",7),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.Q6J("innerHTML",t.message,f.oJD)}}function J$(n,e){if(1&n&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.uIk("aria-label",t.message),f.xp6(1),f.hij(" ",t.message," ")}}function X$(n,e){if(1&n&&(f.TgZ(0,"div"),f._UZ(1,"div",9),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Udp("width",t.width+"%")}}class oG{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class jD{constructor(e,t,r,i,o,u){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=o,this.toastRef=u,this._onTap=new Tr.x,this._onAction=new Tr.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const FF=new f.OlP("ToastConfig");class lG{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new Tr.x,this._activate=new Tr.x,this._manualClose=new Tr.x,this._resetTimeout=new Tr.x,this._countDuplicate=new Tr.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class uG{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===jD?this._toastPackage:this._parentInjector.get(e,t,r)}}class cG extends class aG{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class dG{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let hG=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fG=(()=>{class n{constructor(t,r,i,o){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=o,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new cG(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new dG(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hG),f.LFG(f._Vd),f.LFG(f.z2F),f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HD=(()=>{class n{constructor(t,r,i,o,u){this.overlay=r,this._injector=i,this.sanitizer=o,this.ngZone=u,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},o=""){return this._preBuildNotification(o,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,o){const{includeTitleDuplicates:u}=this.toastrConfig;for(const d of this.toasts){const g=u&&d.title===t;if((!u||g)&&d.message===r)return d.toastRef.onDuplicate(i,o),d}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,o)):this._buildNotification(t,r,i,o)}_buildNotification(t,r,i,o){if(!o.toastComponent)throw new Error("toastComponent required");const u=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==u)return u;this.previousToastMessage=r;let d=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(d=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const g=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&o.enableHtml&&(y=this.sanitizer.sanitize(f.q3G.HTML,r));const C=new lG(g),D=new jD(this.index,o,y,i,t,C),M=new uG(D,this._injector),O=new oG(o.toastComponent,M),U=g.attach(O,this.toastrConfig.newestOnTop);C.componentInstance=U.instance;const J={toastId:this.index,title:i||"",message:r||"",toastRef:C,onShown:C.afterActivate(),onHidden:C.afterClosed(),onTap:D.onTap(),onAction:D.onAction(),portal:U};return d||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{J.toastRef.activate()})),this.toasts.push(J),J}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(FF),f.LFG(fG),f.LFG(f.zs3),f.LFG(fl),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pG={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(HD),f.Y36(jD),f.Y36(f.R0b))},n.\u0275cmp=f.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(f.d8E("@flyInOut",r.state),f.Tol(r.toastClasses),f.Udp("display",r.displayStyle))},attrs:kF,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(f.YNc(0,K$,3,0,"button",0),f.YNc(1,Y$,3,5,"div",1),f.YNc(2,Q$,1,3,"div",2),f.YNc(3,J$,2,4,"div",3),f.YNc(4,X$,2,2,"div",4)),2&t&&(f.Q6J("ngIf",r.options.closeButton),f.xp6(1),f.Q6J("ngIf",r.title),f.xp6(1),f.Q6J("ngIf",r.message&&r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.message&&!r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.options.progressBar))},dependencies:[Vn],encapsulation:2,data:{animation:[Fu("flyInOut",[Qi("inactive",Yi({opacity:0})),Qi("active",Yi({opacity:1})),Qi("removed",Yi({opacity:0})),Op("inactive => active",$r("{{ easeTime }}ms {{ easing }}")),Op("active => removed",$r("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let gG=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:FF,useValue:{default:pG,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[oa]}),n})();function mG(n,e){1&n&&(f.TgZ(0,"h5",7),f._uU(1,"No hay datos para mostrar"),f.qZA())}const _G=function(n){return["/editEmpleado/",n]};function yG(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr")(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.ALo(9,"currency"),f.qZA(),f.TgZ(10,"td"),f._UZ(11,"i",10),f.TgZ(12,"i",11),f.NdJ("click",function(){const o=f.CHM(t).$implicit,u=f.oxw(2);return f.KtG(u.eliminarEmpleado(o.id))}),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.nombre),f.xp6(2),f.Oqu(t.apellido),f.xp6(2),f.Oqu(t.documento),f.xp6(2),f.Oqu(f.lcZ(9,5,t.salario)),f.xp6(3),f.Q6J("routerLink",f.VKq(7,_G,t.id))}}function vG(n,e){if(1&n&&(f.TgZ(0,"table",8)(1,"thead")(2,"tr")(3,"th"),f._uU(4,"Nombre"),f.qZA(),f.TgZ(5,"th"),f._uU(6,"Apellido"),f.qZA(),f.TgZ(7,"th"),f._uU(8,"Documento"),f.qZA(),f.TgZ(9,"th"),f._uU(10,"Salario"),f.qZA(),f._UZ(11,"th"),f.qZA()(),f.TgZ(12,"tbody"),f.YNc(13,yG,13,9,"tr",9),f.qZA()()),2&n){const t=f.oxw();f.xp6(13),f.Q6J("ngForOf",t.empleados)}}let wG=(()=>{class n{constructor(t,r){this._empleadoService=t,this.toastr=r,this.empleados=[]}ngOnInit(){this.getEmpleados()}getEmpleados(){this._empleadoService.getEmpleados().subscribe(t=>{this.empleados=[],t.forEach(r=>{this.empleados.push({id:r.payload.doc.id,...r.payload.doc.data()})}),console.log(this.empleados)})}eliminarEmpleado(t){this._empleadoService.eliminarEmpleado(t).then(()=>{console.log("empleado eliminado con exito"),this.toastr.error("El empleado fue eliminado con exito","Registro eliminado!",{positionClass:"toast-bottom-right"})}).catch(r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(PF),f.Y36(HD))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-list-empleados"]],decls:9,vars:2,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body"],[1,"h3"],["routerLink","/create-empleado",1,"btn","btn-dark","btn-lg","float-right"],["style","margin-top: 30px;",4,"ngIf"],["class","table table-striped mt-5",4,"ngIf"],[2,"margin-top","30px"],[1,"table","table-striped","mt-5"],[4,"ngFor","ngForOf"],[1,"fas","fa-edit","fa-lg","text-info","mr-2",3,"routerLink"],[1,"fas","fa-trash-alt","fa-lg","text-danger",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),f._uU(4,"Listado de Empleados"),f.qZA(),f.TgZ(5,"button",4),f._uU(6,"Agregar"),f.qZA(),f.YNc(7,mG,2,0,"h5",5),f.YNc(8,vG,14,1,"table",6),f.qZA()()()),2&t&&(f.xp6(7),f.Q6J("ngIf",0==r.empleados.length),f.xp6(1),f.Q6J("ngIf",r.empleados.length>0))},dependencies:[Io,Vn,Ol,Qs],styles:["i[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),LF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Tm=(()=>{class n extends LF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Tc=new f.OlP("NgValueAccessor"),CG={provide:Tc,useExisting:(0,f.Gpc)(()=>$D),multi:!0},TG=new f.OlP("CompositionEventMode");let $D=(()=>{class n extends LF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bG(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(TG,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[f._Bn([CG]),f.qOj]}),n})();function up(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function UF(n){return null!=n&&"number"==typeof n.length}const cs=new f.OlP("NgValidators"),cp=new f.OlP("NgAsyncValidators"),SG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class GD{static min(e){return function BF(n){return e=>{if(up(e.value)||up(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function jF(n){return e=>{if(up(e.value)||up(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function HF(n){return up(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function $F(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function GF(n){return up(n.value)||SG.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function WF(n){return e=>up(e.value)||!UF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function zF(n){return e=>UF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function qF(n){if(!n)return WD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(up(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return XF(e)}static composeAsync(e){return eL(e)}}function WD(n){return null}function KF(n){return null!=n}function ZF(n){return(0,f.QGY)(n)?(0,pn.D)(n):n}function YF(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function QF(n,e){return e.map(t=>t(n))}function JF(n){return n.map(e=>function AG(n){return!n.validate}(e)?e:t=>e.validate(t))}function XF(n){if(!n)return null;const e=n.filter(KF);return 0==e.length?null:function(t){return YF(QF(t,e))}}function xN(n){return null!=n?XF(JF(n)):null}function eL(n){if(!n)return null;const e=n.filter(KF);return 0==e.length?null:function(t){return function EG(...n){const e=(0,Sl.jO)(n),{args:t,keys:r}=_C(n),i=new lo.y(o=>{const{length:u}=t;if(!u)return void o.complete();const d=new Array(u);let g=u,y=u;for(let C=0;C<u;C++){let D=!1;(0,rg.Xf)(t[C]).subscribe((0,Dr.x)(o,M=>{D||(D=!0,y--),d[C]=M},()=>g--,void 0,()=>{(!g||!D)&&(y||o.next(r?yC(r,d):d),o.complete())}))}});return e?i.pipe(Ra(e)):i}(QF(t,e).map(ZF)).pipe((0,Ct.U)(YF))}}function MN(n){return null!=n?eL(JF(n)):null}function tL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nL(n){return n._rawValidators}function rL(n){return n._rawAsyncValidators}function RN(n){return n?Array.isArray(n)?n:[n]:[]}function zD(n,e){return Array.isArray(n)?n.includes(e):n===e}function iL(n,e){const t=RN(e);return RN(n).forEach(i=>{zD(t,i)||t.push(i)}),t}function sL(n,e){return RN(e).filter(t=>!zD(n,t))}class oL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=MN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Bs extends oL{get formDirective(){return null}get path(){return null}}class dp extends oL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class aL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let lL=(()=>{class n extends aL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dp,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),uL=(()=>{class n extends aL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Bs,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const _I="VALID",KD="INVALID",Dv="PENDING",yI="DISABLED";function ON(n){return(ZD(n)?n.validators:n)||null}function dL(n){return Array.isArray(n)?xN(n):n||null}function FN(n,e){return(ZD(e)?e.asyncValidators:n)||null}function hL(n){return Array.isArray(n)?MN(n):n||null}function ZD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function fL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function pL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})}class YD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=dL(this._rawValidators),this._composedAsyncValidatorFn=hL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_I}get invalid(){return this.status===KD}get pending(){return this.status==Dv}get disabled(){return this.status===yI}get enabled(){return this.status!==yI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=dL(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=hL(e)}addValidators(e){this.setValidators(iL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sL(e,this._rawAsyncValidators))}hasValidator(e){return zD(this._rawValidators,e)}hasAsyncValidator(e){return zD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Dv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yI,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_I,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_I||this.status===Dv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yI:_I}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Dv,this._hasOwnPendingAsyncValidator=!0;const t=ZF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?yI:this.errors?KD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dv)?Dv:this._anyControlsHaveStatus(KD)?KD:_I}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ZD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class vI extends YD{constructor(e,t,r){super(ON(t),FN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){pL(this,0,e),Object.keys(e).forEach(r=>{fL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class gL extends vI{}function wI(n,e){LN(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function FG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&mL(n,e)})}(n,e),function VG(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function LG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&mL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function OG(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function JD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),eS(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function XD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LN(n,e){const t=nL(n);null!==e.validator?n.setValidators(tL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=rL(n);null!==e.asyncValidator?n.setAsyncValidators(tL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();XD(e._rawValidators,i),XD(e._rawAsyncValidators,i)}function eS(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=nL(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=rL(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return XD(e._rawValidators,r),XD(e._rawAsyncValidators,r),t}function mL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function EL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const II=class extends YD{constructor(e=null,t,r){super(ON(t),FN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ZD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=EL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){EL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let DL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const qG={provide:Tc,useExisting:(0,f.Gpc)(()=>jN),multi:!0};let jN=(()=>{class n extends Tm{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([qG]),f.qOj]}),n})(),SL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const HN=new f.OlP("NgModelWithFormControlWarning"),JG={provide:Bs,useExisting:(0,f.Gpc)(()=>tS)};let tS=(()=>{class n extends Bs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(eS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return wI(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){JD(t.control||null,t,!1),function HG(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function vL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(JD(r||null,t),(n=>n instanceof II)(i)&&(wI(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function _L(n,e){LN(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function UG(n,e){return eS(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){LN(this.form,this),this._oldForm&&eS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(cs,10),f.Y36(cp,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([JG]),f.qOj,f.TTD]}),n})();const t3={provide:dp,useExisting:(0,f.Gpc)(()=>WN)};let WN=(()=>{class n extends dp{constructor(t,r,i,o,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function UN(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===$D?t=o:function jG(n){return Object.getPrototypeOf(n.constructor)===Tm}(o)?r=o:i=o}),i||r||t||null}(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function VN(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function QD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Bs,13),f.Y36(cs,10),f.Y36(cp,10),f.Y36(Tc,10),f.Y36(HN,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([t3]),f.qOj,f.TTD]}),n})(),m3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[SL]}),n})(),$L=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:HN,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[m3]}),n})();class GL extends YD{constructor(e,t,r){super(ON(t),FN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){pL(this,0,e),e.forEach((r,i)=>{fL(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function WL(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let _3=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return WL(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new vI(i,o)}record(t,r=null){const i=this._reduceControls(t);return new gL(i,r)}control(t,r,i){let o={};return this.useNonNullable?(WL(r)?o=r:(o.validators=r,o.asyncValidators=i),new II(t,{...o,nonNullable:!0})):new II(t,r,i)}array(t,r,i){const o=t.map(u=>this._createControl(u));return new GL(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof II||t instanceof YD?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:$L}),n})();function y3(n,e){1&n&&(f.TgZ(0,"div",16)(1,"span",17),f._uU(2,"Cargando..."),f.qZA()())}function v3(n,e){1&n&&(f.TgZ(0,"span",18),f._uU(1,"TODOS LOS CAMPOS SON OBLIGATORIOS"),f.qZA())}let zL=(()=>{class n{constructor(t,r,i,o,u){this.fb=t,this._empleadoService=r,this.router=i,this.toastr=o,this.aRoute=u,this.submitted=!1,this.loading=!1,this.titulo="Sgregar Empleado",this.createEmpleado=this.fb.group({nombre:["",GD.required],apellido:["",GD.required],documento:["",GD.required],salario:["",GD.required]}),this.id=this.aRoute.snapshot.paramMap.get("id"),console.log(this.id)}ngOnInit(){this.esEditar()}agregarEditarEmpleado(){this.submitted=!0,!this.createEmpleado.invalid&&(null===this.id?this.agregarEmpleado():this.editarEmpleado(this.id))}agregarEmpleado(){const t={nombre:this.createEmpleado.value.nombre,apellido:this.createEmpleado.value.apellido,documento:this.createEmpleado.value.documento,salario:this.createEmpleado.value.salario,fechaCreacion:new Date,fechaActualizacion:new Date};this.loading=!0,this._empleadoService.agregarEmpleado(t).then(()=>{this.toastr.success("El empleado fue registrado con exito!","Empleado Registrado",{positionClass:"toast-bottom-right"}),this.loading=!1,this.router.navigate(["/list-empleados"])}).catch(r=>{console.log(r),this.loading=!1})}editarEmpleado(t){const r={nombre:this.createEmpleado.value.nombre,apellido:this.createEmpleado.value.apellido,documento:this.createEmpleado.value.documento,salario:this.createEmpleado.value.salario,fechaActualizacion:new Date};this.loading=!0,this._empleadoService.actualizarEmpleado(t,r).then(()=>{this.loading=!1,this.toastr.info("El empleado fue modificado con \xe9xito","Empleado modificado",{positionClass:"toast-bottom-right"}),this.router.navigate(["/list-empleados"])})}esEditar(){this.titulo="Editar Empleado",null!==this.id&&(this.loading=!0,this._empleadoService.getEmpleado(this.id).subscribe(t=>{this.loading=!1,console.log(t.payload.data().nombre),this.createEmpleado.setValue({nombre:t.payload.data().nombre,apellido:t.payload.data().apellido,documento:t.payload.data().documento,salario:t.payload.data().salario})}))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_3),f.Y36(PF),f.Y36(_r),f.Y36(HD),f.Y36(Go))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create-empleado"]],decls:22,vars:4,consts:[[1,"container","pt-4"],[1,"row"],[1,"col-lg-6","offset-lg-3"],[1,"card","text-center"],[1,"card-body"],["class","spinner-border float-right","role","status",4,"ngIf"],["class","badge-warning",4,"ngIf"],[1,"mt-4",3,"formGroup","ngSubmit"],[1,"col"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control","form-control-lg"],["type","text","formControlName","apellido","placeholder","Apellido",1,"form-control","form-control-lg"],["type","text","formControlName","documento","placeholder","Documento",1,"form-control","form-control-lg","mt-3"],["type","number","formControlName","salario","placeholder","Salario",1,"form-control","form-control-lg","mt-3"],[1,"mt-3"],["type","text","routerLink","/list-empleados",1,"btn","btn-secondary","btn-lg","mr-3"],["type","submit",1,"btn","btn-dark","btn-lg"],["role","status",1,"spinner-border","float-right"],[1,"sr-only"],[1,"badge-warning"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),f._uU(6),f.YNc(7,y3,3,0,"div",5),f.qZA(),f.YNc(8,v3,2,0,"span",6),f.TgZ(9,"form",7),f.NdJ("ngSubmit",function(){return r.agregarEditarEmpleado()}),f.TgZ(10,"div",1)(11,"div",8),f._UZ(12,"input",9),f.qZA(),f.TgZ(13,"div",8),f._UZ(14,"input",10),f.qZA()(),f._UZ(15,"input",11)(16,"input",12),f.TgZ(17,"div",13)(18,"button",14),f._uU(19,"Volver"),f.qZA(),f.TgZ(20,"button",15),f._uU(21,"Agregar"),f.qZA()()()()()()()()),2&t&&(f.xp6(6),f.hij("",r.titulo," "),f.xp6(1),f.Q6J("ngIf",r.loading),f.xp6(1),f.Q6J("ngIf",r.submitted&&r.createEmpleado.invalid),f.xp6(1),f.Q6J("formGroup",r.createEmpleado))},dependencies:[Vn,Ol,DL,$D,jN,lL,uL,tS,WN]}),n})();const w3=[{path:"",redirectTo:"list-empleados",pathMatch:"full"},{path:"list-empleados",component:wG},{path:"create-empleado",component:zL},{path:"editEmpleado/:id",component:zL},{path:"**",redirectTo:"list-empleados",pathMatch:"full"}];let E3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Eb.forRoot(w3),Eb]}),n})();const qL="firebasestorage.googleapis.com",KL="storageBucket";class Pr extends k.ZR{constructor(e,t){super(ZN(e),`Firebase Storage: ${t} (${ZN(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pr.prototype)}_codeEquals(e){return ZN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ZN(n){return"storage/"+n}function YN(){return new Pr("unknown","An unknown error occurred, please check the error payload for server response.")}function ZL(){return new Pr("canceled","User canceled the upload/download.")}function YL(){return new Pr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Sv(n){return new Pr("invalid-argument",n)}function QL(){return new Pr("app-deleted","The Firebase app was deleted.")}function JL(n){return new Pr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function CI(n,e){return new Pr("invalid-format","String does not match format '"+n+"': "+e)}function bI(n){throw new Pr("internal-error","Internal error: "+n)}class ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ds.makeFromUrl(e,t)}catch{return new ds(e,"")}if(""===r.path)return r;throw function N3(n){return new Pr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(We){We.path_=decodeURIComponent(We.path)}const D=t.replace(/[.]/g,"\\."),qe=[{regex:d,indices:{bucket:1,path:3},postModify:function o(We){"/"===We.path.charAt(We.path.length-1)&&(We.path_=We.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===qL?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let We=0;We<qe.length;We++){const _t=qe[We],wt=_t.regex.exec(e);if(wt){let Lr=wt[_t.indices.path];Lr||(Lr=""),r=new ds(wt[_t.indices.bucket],Lr),_t.postModify(r);break}}if(null==r)throw function R3(n){return new Pr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class F3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function nS(n){return"string"==typeof n||n instanceof String}function XL(n){return QN()&&n instanceof Blob}function QN(){return typeof Blob<"u"}function JN(n,e,t,r){if(r<e)throw Sv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Sv(`Invalid value for '${n}'. Expected ${t} or less.`)}function lh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function eV(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var hp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(hp||(hp={})),hp))();class H3{constructor(e,t,r,i,o,u,d,g,y,C,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,O)=>{this.resolve_=M,this.reject_=O,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());!function U3(n){return void 0!==n}(g)?o():o(g)}catch(g){u(g)}else if(null!==d){const g=YN();g.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,g):g)}else u(i.canceled?this.appDelete_?QL():ZL():function M3(){return new Pr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new rS(!1,null,!0)):this.backoffId_=function L3(n,e,t){let r=1,i=null,o=null,u=!1,d=0;function g(){return 2===d}let y=!1;function C(...se){y||(y=!0,e.apply(null,se))}function D(se){i=setTimeout(()=>{i=null,n(O,g())},se)}function M(){o&&clearTimeout(o)}function O(se,...Fe){if(y)return void M();if(se)return M(),void C.call(null,se,...Fe);if(g()||u)return M(),void C.call(null,se,...Fe);let qe;r<64&&(r*=2),1===d?(d=2,qe=0):qe=1e3*(r+Math.random()),D(qe)}let U=!1;function J(se){U||(U=!0,M(),!y&&(null!==i?(se||(d=2),clearTimeout(i),D(0)):se||(d=1)))}return D(0),o=setTimeout(()=>{u=!0,J(!0)},t),J}((r,i)=>{if(i)return void r(!1,new rS(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const d=o.getErrorCode()===hp.NO_ERROR,g=o.getStatus();if(!d||this.isRetryStatusCode_(g)){const C=o.getErrorCode()===hp.ABORT;return void r(!1,new rS(!1,null,C))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new rS(y,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function V3(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),o=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||o}}class rS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Z3(...n){const e=function K3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(QN())return new Blob(n);throw new Pr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Xo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class XN{constructor(e,t){this.data=e,this.contentType=t||null}}function eP(n,e){switch(n){case Xo.RAW:return new XN(tV(e));case Xo.BASE64:case Xo.BASE64URL:return new XN(nV(n,e));case Xo.DATA_URL:return new XN(function X3(n){const e=new rV(n);return e.base64?nV(Xo.BASE64,e.rest):function J3(n){let e;try{e=decodeURIComponent(n)}catch{throw CI(Xo.DATA_URL,"Malformed data URL.")}return tV(e)}(e.rest)}(e),function eW(n){return new rV(n).contentType}(e))}throw YN()}function tV(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function nV(n,e){switch(n){case Xo.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw CI(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xo.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw CI(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Q3(n){return atob(n)}(e)}catch{throw CI(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class rV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw CI(Xo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function tW(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Dc{constructor(e,t){let r=0,i="";XL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(XL(this.data_)){const i=function Y3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Dc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Dc(r,!0)}}static getBlob(...e){if(QN()){const t=e.map(r=>r instanceof Dc?r.data_:r);return new Dc(Z3.apply(null,t))}{const t=e.map(u=>nS(u)?eP(Xo.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[o++]=u[d]}),new Dc(i,!0)}}uploadData(){return this.data_}}function tP(n){let e;try{e=JSON.parse(n)}catch{return null}return function j3(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function iV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function iW(n,e){return e}class js{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||iW}}let iS=null;function TI(){if(iS)return iS;const n=[];n.push(new js("bucket")),n.push(new js("generation")),n.push(new js("metageneration")),n.push(new js("name","fullPath",!0));const t=new js("name");t.xform=function e(o,u){return function sW(n){return!nS(n)||n.length<2?n:iV(n)}(u)},n.push(t);const i=new js("size");return i.xform=function r(o,u){return void 0!==u?Number(u):u},n.push(i),n.push(new js("timeCreated")),n.push(new js("updated")),n.push(new js("md5Hash",null,!0)),n.push(new js("cacheControl",null,!0)),n.push(new js("contentDisposition",null,!0)),n.push(new js("contentEncoding",null,!0)),n.push(new js("contentLanguage",null,!0)),n.push(new js("contentType",null,!0)),n.push(new js("metadata","customMetadata",!0)),iS=n,iS}function sV(n,e,t){const r=tP(e);return null===r?null:function aW(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const u=t[o];r[u.local]=u.xform(r,e[u.server])}return function oW(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new ds(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function nP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const oV="prefixes";class Sc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ac(n){if(!n)throw YN()}function sS(n,e){return function t(r,i){const o=sV(n,i,e);return Ac(null!==o),o}}function Av(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function A3(){return new Pr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function S3(){return new Pr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function D3(n){return new Pr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function x3(n){return new Pr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function DI(n){const e=Av(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function T3(n){return new Pr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function lV(n,e,t){const i=lh(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new Sc(i,"GET",sS(n,t),u);return d.errorHandler=DI(e),d}function fW(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const d=lh(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,C=new Sc(d,"GET",function dW(n,e){return function t(r,i){const o=function cW(n,e,t){const r=tP(t);return null===r?null:function uW(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[oV])for(const i of t[oV]){const o=i.replace(/\/$/,""),u=n._makeStorageReference(new ds(e,o));r.prefixes.push(u)}if(t.items)for(const i of t.items){const o=n._makeStorageReference(new ds(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return Ac(null!==o),o}}(n,e.bucket),y);return C.urlParams=o,C.errorHandler=Av(e),C}function cV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function _W(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class oS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function rP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ac(!1)}return Ac(!!t&&-1!==(e||["active"]).indexOf(t)),t}const EW={STATE_CHANGED:"state_changed"},Hs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function iP(n){switch(n){case"running":case"pausing":case"canceling":return Hs.RUNNING;case"paused":return Hs.PAUSED;case"success":return Hs.SUCCESS;case"canceled":return Hs.CANCELED;default:return Hs.ERROR}}class IW{constructor(e,t,r){if(function B3(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function xv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class bW extends class CW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw bI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Xl(){return new bW}class pV{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=TI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function yW(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),u=cV(e,r,i),d={name:u.fullPath},g=lh(o,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},D=nP(u,t),U=new Sc(g,"POST",function O(J){let se;rP(J);try{se=J.getResponseHeader("X-Goog-Upload-URL")}catch{Ac(!1)}return Ac(nS(se)),se},n.maxUploadRetryTime);return U.urlParams=d,U.headers=C,U.body=D,U.errorHandler=Av(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function vW(n,e,t,r){const g=new Sc(t,"POST",function o(y){const C=rP(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ac(!1)}D||Ac(!1);const M=Number(D);return Ac(!isNaN(M)),new oS(M,r.size(),"final"===C)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Av(e),g}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Xl,t,r);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new oS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let u;try{u=function wW(n,e,t,r,i,o,u,d){const g=new oS(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function k3(){return new Pr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let C=y;i>0&&(C=Math.min(C,i));const D=g.current,U={"X-Goog-Upload-Command":C===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},J=r.slice(D,D+C);if(null===J)throw YL();const qe=new Sc(t,"POST",function se(We,_t){const wt=rP(We,["active","final"]),Qt=g.current+C,Lr=r.size();let na;return na="final"===wt?sS(e,o)(We,_t):null,new oS(Qt,Lr,"final"===wt,na)},e.maxUploadRetryTime);return qe.headers=U,qe.body=J.uploadData(),qe.progressCallback=d||null,qe.errorHandler=Av(n),qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const d=this._ref.storage._makeRequest(u,Xl,i,o);this._request=d,d.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=lV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Xl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function dV(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},g=function d(){let qe="";for(let We=0;We<2;We++)qe+=Math.random().toString().slice(2);return qe}();u["Content-Type"]="multipart/related; boundary="+g;const y=cV(e,r,i),C=nP(y,t),O=Dc.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===O)throw YL();const U={name:y.fullPath},J=lh(o,n.host,n._protocol),Fe=n.maxUploadRetryTime,Ge=new Sc(J,"POST",sS(n,t),Fe);return Ge.urlParams=U,Ge.headers=u,Ge.body=O.uploadData(),Ge.errorHandler=Av(e),Ge}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=ZL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=iP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new IW(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(iP(this._state)){case Hs.SUCCESS:xv(this._resolve.bind(null,this.snapshot))();break;case Hs.CANCELED:case Hs.ERROR:xv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(iP(this._state)){case Hs.RUNNING:case Hs.PAUSED:e.next&&xv(e.next.bind(e,this.snapshot))();break;case Hs.SUCCESS:e.complete&&xv(e.complete.bind(e))();break;default:e.error&&xv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Sm{constructor(e,t){this._service=e,this._location=t instanceof ds?t:ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sm(e,t)}get root(){const e=new ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iV(this._location.path)}get storage(){return this._service}get parent(){const e=function nW(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ds(this._location.bucket,e);return new Sm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw JL(e)}}function mV(n,e,t){return sP.apply(this,arguments)}function sP(){return sP=(0,we.Z)(function*(n,e,t){const i=yield _V(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield mV(n,e,i.nextPageToken))}),sP.apply(this,arguments)}function _V(n,e){null!=e&&"number"==typeof e.maxResults&&JN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=fW(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Xl)}function FW(n){n._throwIfRoot("getDownloadURL");const e=function pW(n,e,t){const i=lh(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new Sc(i,"GET",function hW(n,e){return function t(r,i){const o=sV(n,i,e);return Ac(null!==o),function lW(n,e,t,r){const i=tP(e);if(null===i||!nS(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const u=encodeURIComponent;return o.split(",").map(y=>{const D=n.fullPath;return lh("/b/"+u(n.bucket)+"/o/"+u(D),t,r)+eV({alt:"media",token:y})})[0]}(o,i,n.host,n._protocol)}}(n,t),u);return d.errorHandler=DI(e),d}(n.storage,n._location,TI());return n.storage.makeRequestWithTokens(e,Xl).then(t=>{if(null===t)throw function O3(){return new Pr("no-download-url","The given file does not have any download URLs.")}();return t})}function yV(n,e){const t=function rW(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ds(n._location.bucket,t);return new Sm(n.storage,r)}function vV(n,e){if(n instanceof oP){const t=n;if(null==t._bucket)throw function P3(){return new Pr("no-default-bucket","No default bucket found. Did you set the '"+KL+"' property when initializing the app?")}();const r=new Sm(t,t._bucket);return null!=e?vV(r,e):r}return void 0!==e?yV(n,e):n}function BW(n,e){if(e&&function VW(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof oP)return function UW(n,e){return new Sm(n,e)}(n,e);throw Sv("To use ref(service, url), the first argument must be a Storage instance.")}return vV(n,e)}function wV(n,e){const t=e?.[KL];return null==t?null:ds.makeFromBucketSpec(t,n)}class oP{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=qL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ds.makeFromBucketSpec(i,this._host):wV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ds.makeFromBucketSpec(this._url,e):wV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new F3(QL());{const o=function q3(n,e,t,r,i,o){const u=eV(n.urlParams),d=n.url+u,g=Object.assign({},n.headers);return function W3(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function $3(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function G3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(g,o),function z3(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new H3(d,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,we.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const EV="@firebase/storage";function bV(n,e){return BW(n=(0,k.m9)(n),e)}function QW(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new oP(t,r,i,e,Ci.SDK_VERSION)}!function JW(){(0,Ci._registerComponent)(new Ns.wA("storage",QW,"PUBLIC").setMultipleInstances(!0)),(0,Ci.registerVersion)(EV,"0.9.9",""),(0,Ci.registerVersion)(EV,"0.9.9","esm2017")}();class aS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class TV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new aS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new aS(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?u=>t(new aS(u,this,this._ref)):{next:t.next?u=>t.next(new aS(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class DV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new uh(e,this._service))}get items(){return this._delegate.items.map(e=>new uh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class uh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function ZW(n,e){return yV(n,e)}(this._delegate,e);return new uh(t,this.storage)}get root(){return new uh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new uh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new TV(function HW(n,e,t){return function RW(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new pV(n,new Dc(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Xo.RAW,r){this._throwIfRoot("putString");const i=eP(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new TV(new pV(this._delegate,new Dc(i.data,!0),o),this)}listAll(){return function zW(n){return function PW(n){const e={prefixes:[],items:[]};return mV(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new DV(e,this.storage))}list(e){return function WW(n,e){return _V(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new DV(t,this.storage))}getMetadata(){return function $W(n){return function kW(n){n._throwIfRoot("getMetadata");const e=lV(n.storage,n._location,TI());return n.storage.makeRequestWithTokens(e,Xl)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function GW(n,e){return function OW(n,e){n._throwIfRoot("updateMetadata");const t=function gW(n,e,t,r){const o=lh(e.fullServerUrl(),n.host,n._protocol),d=nP(t,r),y=n.maxOperationRetryTime,C=new Sc(o,"PATCH",sS(n,r),y);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=d,C.errorHandler=DI(e),C}(n.storage,n._location,e,TI());return n.storage.makeRequestWithTokens(t,Xl)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function qW(n){return FW(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function KW(n){return function LW(n){n._throwIfRoot("deleteObject");const e=function mW(n,e){const r=lh(e.fullServerUrl(),n.host,n._protocol),d=new Sc(r,"DELETE",function u(g,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=DI(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Xl)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw JL(e)}}class SV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(AV(e))throw Sv("ref() expected a child path but got a URL, use refFromURL instead.");return new uh(bV(this._delegate,e),this)}refFromURL(e){if(!AV(e))throw Sv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ds.makeFromUrl(e,this._delegate.host)}catch{throw Sv("refFromUrl() expected a valid full URL but got an invalid one.")}return new uh(bV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function YW(n,e,t,r={}){!function jW(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function AV(n){return/^[A-Za-z]+:\/\//.test(n)}function nz(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new SV(t,r)}function xV(n){const e=function iz(n){return new lo.y(e=>{const t=u=>e.next(u);t(n.snapshot);const o=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){o()}}).pipe(function I3(n,e=Ef.z){return(0,Sr.e)((t,r)=>{let i=null,o=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function g(){const y=u+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);d()}t.subscribe((0,Dr.x)(r,y=>{o=y,u=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ct.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function lS(n){return{getDownloadURL:()=>Je(void 0).pipe(on.fc,An(()=>n.getDownloadURL()),on.iC),getMetadata:()=>Je(void 0).pipe(on.fc,An(()=>n.getMetadata()),on.iC),delete:()=>(0,pn.D)(n.delete()),child:e=>lS(n.child(e)),updateMetadata:e=>(0,pn.D)(n.updateMetadata(e)),put:(e,t)=>xV(n.put(e,t)),putString:(e,t,r)=>xV(n.putString(e,t,r)),list:e=>(0,pn.D)(n.list(e)),listAll:()=>(0,pn.D)(n.listAll())}}!function rz(n){const e={TaskState:Hs,TaskEvent:EW,StringFormat:Xo,Storage:SV,Reference:uh};n.INTERNAL.registerComponent(new Ns.wA("storage-compat",nz,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(bg.Z);const sz=new f.OlP("angularfire2.storageBucket"),oz=new f.OlP("angularfire2.storage.maxUploadRetryTime"),az=new f.OlP("angularfire2.storage.maxOperationRetryTime"),lz=new f.OlP("angularfire2.storage.use-emulator");let uz=(()=>{class n{constructor(t,r,i,o,u,d,g,y,C,D){const M=(0,Ar.on)(t,u,r);this.storage=(0,Ar.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const O=u.runOutsideAngular(()=>M.storage(i||void 0)),U=C;return U&&O.useEmulator(...U),g&&O.setMaxUploadRetryTime(g),y&&O.setMaxOperationRetryTime(y),O},[g,y])}ref(t){return lS(this.storage.ref(t))}refFromURL(t){return lS(this.storage.refFromURL(t))}upload(t,r,i){return lS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ar.Dh),f.LFG(Ar.xv,8),f.LFG(sz,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(on.HU),f.LFG(oz,8),f.LFG(az,8),f.LFG(lz,8),f.LFG(mI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),dz=(()=>{class n{constructor(){VD.Z.registerVersion("angularfire",on.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[uz],imports:[cz]}),n})();var hz=V(5032);const MV="@firebase/database";let aP="";function NV(n){aP=n}class gz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class mz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const PV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gz(e)}}catch{}return new mz},Am=PV("localStorage"),lP=PV("sessionStorage"),Mv=new co.Yd("@firebase/database"),kV=function(){let n=1;return function(){return n++}}(),OV=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},SI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=SI.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let xm=null,FV=!0;const LV=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Mv.logLevel=co.in.VERBOSE,xm=Mv.log.bind(Mv),e&&lP.set("logging_enabled",!0)):"function"==typeof n?xm=n:(xm=null,lP.remove("logging_enabled"))},Ai=function(...n){if(!0===FV&&(FV=!1,null===xm&&!0===lP.get("logging_enabled")&&LV(!0)),xm){const e=SI.apply(null,n);xm(e)}},AI=function(n){return function(...e){Ai(n,...e)}},uP=function(...n){const e="FIREBASE INTERNAL ERROR: "+SI(...n);Mv.error(e)},xc=function(...n){const e=`FIREBASE FATAL ERROR: ${SI(...n)}`;throw Mv.error(e),new Error(e)},hs=function(...n){const e="FIREBASE WARNING: "+SI(...n);Mv.warn(e)},uS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ch="[MIN_NAME]",Mc="[MAX_NAME]",Mm=function(n,e){if(n===e)return 0;if(n===ch||e===Mc)return-1;if(e===ch||n===Mc)return 1;{const t=cS(n),r=cS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},vz=function(n,e){return n===e?0:n<e?-1:1},xI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},cP=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=cP(n[e[r]]);return t+="}",t},VV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function xi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const UV=function(n){(0,k.hu)(!uS(n),"Invalid JSON number");const r=1023;let i,o,u,d,g;0===n?(o=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const C=y.join("");let D="";for(g=0;g<64;g+=8){let M=parseInt(C.substr(g,8),2).toString(16);1===M.length&&(M="0"+M),D+=M}return D.toLowerCase()},Cz=new RegExp("^-?(0*)\\d{1,10}$"),BV=-2147483648,dP=2147483647,cS=function(n){if(Cz.test(n)){const e=Number(n);if(e>=BV&&e<=dP)return e}return null},Rv=function(n){try{n()}catch(e){setTimeout(()=>{throw hs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},MI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Tz{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){hs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Dz{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ai("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hs(e)}}let RI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const WV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,KV="websocket",ZV="long_polling";class fP{constructor(e,t,r,i,o=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Am.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Am.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function YV(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===KV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ZV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Sz(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return xi(t,(o,u)=>{i.push(o+"="+u)}),r+i.join("&")}class Az{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const pP={},gP={};function mP(n){const e=n.toString();return pP[e]||(pP[e]=new Az),pP[e]}class Mz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Rv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fp{constructor(e,t,r,i,o,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=AI(e),this.stats_=mP(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),YV(t,ZV,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Mz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _P((...o)=>{const[u,d,g,y,C]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&WV.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fp.forceAllow_=!0}static forceDisallow(){fp.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!fp.forceAllow_&&(fp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=VV(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _P{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=kV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_P.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){Ai("frame writing exception"),d.stack&&Ai(d.stack),Ai(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ai("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ai("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let hS=null;typeof MozWebSocket<"u"?hS=MozWebSocket:typeof WebSocket<"u"&&(hS=WebSocket);let Nv=(()=>{class n{constructor(t,r,i,o,u,d,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=AI(this.connId),this.stats_=mP(r),this.connURL=n.connectionURL_(r,d,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,u){const d={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&WV.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),o&&(d.ac=o),u&&(d.p=u),YV(t,KV,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Am.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${aP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,d=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new hS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==hS&&!n.forceDisallow_}static previouslyFailed(){return Am.isInMemoryStorage||!0===Am.get("previous_websocket_failure")}markConnectionHealthy(){Am.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=VV(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),rU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[fp,Nv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Nv&&Nv.isAvailable();let i=r&&!Nv.previouslyFailed();if(t.webSocketOnly&&(r||hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Nv];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class cU{constructor(e,t,r,i,o,u,d,g,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=AI("c:"+this.id+":"),this.transportManager_=new rU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=MI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=xI("t",e),r=xI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=xI("t",e),r=xI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=xI("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?uP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),MI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):MI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Am.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dU{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class hU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class fS extends hU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fS}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class En{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gn(){return new En("")}function Zt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function pp(n){return n.pieces_.length-n.pieceNum_}function kn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new En(n.pieces_,e)}function vP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function NI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function gU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new En(e,0)}function dr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof En)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new En(t,0)}function Yt(n){return n.pieceNum_>=n.pieces_.length}function $s(n,e){const t=Zt(n),r=Zt(e);if(null===t)return e;if(t===r)return $s(kn(n),kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Jz(n,e){const t=NI(n,0),r=NI(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Mm(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function wP(n,e){if(pp(n)!==pp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function $a(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(pp(n)>pp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Xz{constructor(e,t){this.errorPrefix_=t,this.parts_=NI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);mU(this)}}function mU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rm(n))}function Rm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class EP extends hU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new EP}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const PI=1e3;let gS,Nm=(()=>{class n extends dU{constructor(t,r,i,o,u,d,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=AI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=PI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");EP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&fS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,u={r:o,a:t,b:r};this.log_((0,k.Pz)(u)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const g=d.d;"ok"===d.s?r.resolve(g):r.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const y=g.d,C=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),"ok"!==C&&this.removeListen_(i,o),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const u=o.s,d=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const u={p:t};o&&(u.q=i,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):uP("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=PI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=PI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=PI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let g=!1,y=null;const C=function(){y?y.close():(g=!0,o())};t.realtime_={close:C,sendRequest:function(O){(0,k.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(O)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,U]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);g?Ai("getToken() completed but was canceled"):(Ai("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=U&&U.token,y=new cU(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,J=>{hs(J+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(O){t.log_("Failed to get token: "+O),g||(t.repoInfo_.nodeAdmin&&hs(O),C())}}})()}interrupt(t){Ai("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ai("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=PI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>cP(u)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new En(t).toString();let o;if(this.listens.has(i)){const u=this.listens.get(i);o=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Ai("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ai("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+aP.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=fS.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Xt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Xt(e,t)}}class pS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Xt(ch,e),i=new Xt(ch,t);return 0!==this.compare(r,i)}minPost(){return Xt.MIN}}class vU extends pS{static get __EMPTY_NODE(){return gS}static set __EMPTY_NODE(e){gS=e}compare(e,t){return Mm(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Xt.MIN}maxPost(){return new Xt(Mc,gS)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Xt(e,gS)}toString(){return".key"}}const Rc=new vU;class mS{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let CP,eu=(()=>{class n{constructor(t,r,i,o,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??mo.EMPTY_NODE,this.right=u??mo.EMPTY_NODE}copy(t,r,i,o,u){return new n(t??this.key,r??this.value,i??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const u=i(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return mo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return mo.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class mo{constructor(e,t=mo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new mo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,eu.BLACK,null,null))}remove(e){return new mo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,eu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mS(this.root_,null,this.comparator_,!0,e)}}function aq(n,e){return Mm(n.name,e.name)}function IP(n,e){return Mm(n,e)}mo.EMPTY_NODE=new class oq{copy(e,t,r,i,o){return this}insert(e,t,r){return new eu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const wU=function(n){return"number"==typeof n?"number:"+UV(n):"string:"+n},EU=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===CP||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===CP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let IU,CU,bU,Pv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),EU(this.priorityNode_)}static set __childrenNodeConstructor(t){IU=t}static get __childrenNodeConstructor(){return IU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Yt(t)?this:".priority"===Zt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Zt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===pp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(kn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wU(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?UV(this.value_):this.value_,this.lazyHash_=OV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(o>=0,"Unknown leaf type: "+r),(0,k.hu)(u>=0,"Unknown leaf type: "+i),o===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const $n=new class dq extends pS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Mm(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Xt.MIN}maxPost(){return new Xt(Mc,new Pv("[PRIORITY-POST]",bU))}makePost(e,t){const r=CU(e);return new Xt(t,new Pv("[PRIORITY-POST]",r))}toString(){return".priority"}},hq=Math.log(2);class fq{constructor(e){this.count=parseInt(Math.log(e+1)/hq,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _S=function(n,e,t,r){n.sort(e);const i=function(g,y){const C=y-g;let D,M;if(0===C)return null;if(1===C)return D=n[g],M=t?t(D):D,new eu(M,D.node,eu.BLACK,null,null);{const O=parseInt(C/2,10)+g,U=i(g,O),J=i(O+1,y);return D=n[O],M=t?t(D):D,new eu(M,D.node,eu.BLACK,U,J)}},d=function(g){let y=null,C=null,D=n.length;const M=function(U,J){const se=D-U,Fe=D;D-=U;const Ge=i(se+1,Fe),qe=n[se],We=t?t(qe):qe;O(new eu(We,qe.node,J,null,Ge))},O=function(U){y?(y.left=U,y=U):(C=U,y=U)};for(let U=0;U<g.count;++U){const J=g.nextBitIsOne(),se=Math.pow(2,g.count-(U+1));J?M(se,eu.BLACK):(M(se,eu.BLACK),M(se,eu.RED))}return C}(new fq(n.length));return new mo(r||e,d)};let bP;const kv={};class dh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(kv&&$n,"ChildrenNode.ts has not been loaded"),bP=bP||new dh({".priority":kv},{".priority":$n}),bP}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof mo?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Rc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Xt.Wrap);let d,u=o.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=o.getNext();d=i?_S(r,e.getCompare()):kv;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const C=Object.assign({},this.indexes_);return C[g]=d,new dh(C,y)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,o)=>{const u=(0,k.DV)(this.indexSet_,o);if((0,k.hu)(u,"Missing index implementation for "+o),i===kv){if(u.isDefinedOn(e.node)){const d=[],g=t.getIterator(Xt.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&d.push(y),y=g.getNext();return d.push(e),_S(d,u.getCompare())}return kv}{const d=t.get(e.name);let g=i;return d&&(g=g.remove(new Xt(e.name,d))),g.insert(e,e.node)}});return new dh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===kv)return i;{const o=t.get(e.name);return o?i.remove(new Xt(e.name,o)):i}});return new dh(r,this.indexSet_)}}let kI,Bt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&EU(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kI||(kI=new n(new mo(IP),null,dh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?kI:r}}getChild(t){const r=Zt(t);return null===r?this:this.getImmediateChild(r).getChild(kn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Xt(t,r);let o,u;r.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=o.isEmpty()?kI:this.priorityNode_;return new n(o,d,u)}}updateChild(t,r){const i=Zt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Zt(t)||1===pp(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(kn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,u=!0;if(this.forEachChild($n,(d,g)=>{r[d]=g.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):u=!1}),!t&&u&&o<2*i){const d=[];for(const g in r)d[g]=r[g];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+wU(this.getPriority().val())+":"),this.forEachChild($n,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":OV(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const u=o.getPredecessorKey(new Xt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Xt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Xt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Xt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Xt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===OI?-1:0}withIndex(t){if(t===Rc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Rc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator($n),o=r.getIterator($n);let u=i.getNext(),d=o.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=o.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===Rc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const OI=new class pq extends Bt{constructor(){super(new mo(IP),Bt.EMPTY_NODE,dh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Bt.EMPTY_NODE}isEmpty(){return!1}};function wr(n,e=null){if(null===n)return Bt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Pv(n,wr(e));if(n instanceof Array){let t=Bt.EMPTY_NODE;return xi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const o=wr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(wr(e))}{const t=[];let r=!1;if(xi(n,(u,d)=>{if("."!==u.substring(0,1)){const g=wr(d);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Xt(u,g)))}}),0===t.length)return Bt.EMPTY_NODE;const o=_S(t,aq,u=>u.name,IP);if(r){const u=_S(t,$n.getCompare());return new Bt(o,wr(e),new dh({".priority":u},{".priority":$n}))}return new Bt(o,wr(e),dh.Default)}}Object.defineProperties(Xt,{MIN:{value:new Xt(ch,Bt.EMPTY_NODE)},MAX:{value:new Xt(Mc,OI)}}),vU.__EMPTY_NODE=Bt.EMPTY_NODE,Pv.__childrenNodeConstructor=Bt,function lq(n){CP=n}(OI),function cq(n){bU=n}(OI),function uq(n){CU=n}(wr);class TP extends pS{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Yt(e)&&".priority"!==Zt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Mm(e.name,t.name):o}makePost(e,t){const r=wr(e),i=Bt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Xt(t,i)}maxPost(){const e=Bt.EMPTY_NODE.updateChild(this.indexPath_,OI);return new Xt(Mc,e)}toString(){return NI(this.indexPath_,0).join("/")}}const DP=new class mq extends pS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Xt.MIN}maxPost(){return Xt.MAX}makePost(e,t){const r=wr(e);return new Xt(t,r)}toString(){return".value"}},Ov="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_q=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Ov.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let u=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=Ov.charAt(e[i]);return(0,k.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),SU=function(n){if(n===""+dP)return"-";const e=cS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Mc;const o=Ov.charAt(Ov.indexOf(t[r])+1);return t[r]=o,t.slice(0,r+1).join("")},AU=function(n){if(n===""+BV)return ch;const e=cS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+dP:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ov.charAt(Ov.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function xU(n){return{type:"value",snapshotNode:n}}function Fv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function FI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function LI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class AP{constructor(e){this.index_=e}updateChild(e,t,r,i,o,u){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(FI(t,d)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(Fv(t,r)):u.trackChildChange(LI(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild($n,(i,o)=>{t.hasChild(i)||r.trackChildChange(FI(i,o))}),t.isLeafNode()||t.forEachChild($n,(i,o)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(o)||r.trackChildChange(LI(i,o,u))}else r.trackChildChange(Fv(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Bt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class VI{constructor(e){this.indexedFilter_=new AP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=VI.getStartPost_(e),this.endPost_=VI.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,o,u){return this.matches(new Xt(t,r))||(r=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Bt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Bt.EMPTY_NODE);const o=this;return t.forEachChild($n,(u,d)=>{o.matches(new Xt(u,d))||(i=i.updateImmediateChild(u,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class vq{constructor(e){this.rangedFilter_=new VI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,o,u){return this.rangedFilter_.matches(new Xt(t,r))||(r=Bt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,u):this.fullLimitUpdateChild_(e,t,r,o,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Bt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const d=o.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(d.name,d.node),u++}}else{let o,u,d,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Bt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(M,O)=>D(O,M)}else g=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,C=!1;for(;g.hasNext();){const D=g.getNext();!C&&d(o,D)<=0&&(C=!0),C&&y<this.limit_&&d(D,u)<=0?y++:i=i.updateImmediateChild(D.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let u;if(this.reverse_){const D=this.index_.getCompare();u=(M,O)=>D(O,M)}else u=this.index_.getCompare();const d=e;(0,k.hu)(d.numChildren()===this.limit_,"");const g=new Xt(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),C=this.rangedFilter_.matches(g);if(d.hasChild(t)){const D=d.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===t||d.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const O=null==M?1:u(M,g);if(C&&!r.isEmpty()&&O>=0)return o?.trackChildChange(LI(t,r,D)),d.updateImmediateChild(t,r);{o?.trackChildChange(FI(t,D));const J=d.updateImmediateChild(t,Bt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(o?.trackChildChange(Fv(M.name,M.node)),J.updateImmediateChild(M.name,M.node)):J}}return r.isEmpty()?e:C&&u(y,g)>=0?(null!=o&&(o.trackChildChange(FI(y.name,y.node)),o.trackChildChange(Fv(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,Bt.EMPTY_NODE)):e}}class yS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$n}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ch}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$n}copy(){const e=new yS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function MP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function vS(n,e){const t=n.copy();return t.index_=e,t}function MU(n){const e={};if(n.isDefault())return e;let t;return n.index_===$n?t="$priority":n.index_===DP?t="$value":n.index_===Rc?t="$key":((0,k.hu)(n.index_ instanceof TP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function RU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==$n&&(e.i=n.index_.toString()),e}class wS extends dU{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=AI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=wS.getListenId_(e,r),d={};this.listens_[u]=d;const g=MU(e._queryParams);this.restRequest_(o+".json",g,(y,C)=>{let D=C;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(o,D,!1,r),(0,k.DV)(this.listens_,u)===d){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(M,null)}})}unlisten(e,t){const r=wS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=MU(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(o,u)=>{let d=u;404===o&&(d=null,o=null),null===o?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,k.cI)(d.responseText)}catch{hs("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,g)}else 401!==d.status&&404!==d.status&&hs("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class Tq{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ES(){return{value:null,children:new Map}}function Lv(n,e,t){if(Yt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Zt(e);n.children.has(r)||n.children.set(r,ES()),Lv(n.children.get(r),e=kn(e),t)}}function RP(n,e){if(Yt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild($n,(r,i)=>{Lv(n,new En(r),i)}),RP(n,e)}}if(n.children.size>0){const t=Zt(e);return e=kn(e),n.children.has(t)&&RP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function NP(n,e,t){null!==n.value?t(e,n.value):function Dq(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{NP(i,new En(e.toString()+"/"+r),t)})}class Sq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Mq{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Sq(e);const r=1e4+2e4*Math.random();MI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;xi(e,(i,o)=>{o>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),MI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ga=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ga||(Ga={})),Ga))();function OP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class IS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ga.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Yt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new En(e));return new IS(gn(),t,this.revert)}}return(0,k.hu)(Zt(this.path)===e,"operationForChild called for unrelated child."),new IS(kn(this.path),this.affectedTree,this.revert)}}class UI{constructor(e,t){this.source=e,this.path=t,this.type=Ga.LISTEN_COMPLETE}operationForChild(e){return Yt(this.path)?new UI(this.source,gn()):new UI(this.source,kn(this.path))}}class Pm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ga.OVERWRITE}operationForChild(e){return Yt(this.path)?new Pm(this.source,gn(),this.snap.getImmediateChild(e)):new Pm(this.source,kn(this.path),this.snap)}}class Vv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ga.MERGE}operationForChild(e){if(Yt(this.path)){const t=this.children.subtree(new En(e));return t.isEmpty()?null:t.value?new Pm(this.source,gn(),t.value):new Vv(this.source,gn(),t)}return(0,k.hu)(Zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vv(this.source,kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Yt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Zt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Rq{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function BI(n,e,t,r,i,o){const u=r.filter(d=>d.type===t);u.sort((d,g)=>function kq(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Xt(e.childName,e.snapshotNode),i=new Xt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,g)),u.forEach(d=>{const g=function Pq(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,o);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(g,n.query_))})})}function CS(n,e){return{eventCache:n,serverCache:e}}function jI(n,e,t,r){return CS(new gp(e,t,r),n.serverCache)}function PU(n,e,t,r){return CS(n.eventCache,new gp(e,t,r))}function bS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function km(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let FP;class Gn{constructor(e,t=(()=>(FP||(FP=new mo(vz)),FP))()){this.value=e,this.children=t}static fromObject(e){let t=new Gn(null);return xi(e,(r,i)=>{t=t.set(new En(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gn(),value:this.value};if(Yt(e))return null;{const r=Zt(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(kn(e),t);return null!=o?{path:dr(new En(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Yt(e))return this;{const t=Zt(e),r=this.children.get(t);return null!==r?r.subtree(kn(e)):new Gn(null)}}set(e,t){if(Yt(e))return new Gn(t,this.children);{const r=Zt(e),o=(this.children.get(r)||new Gn(null)).set(kn(e),t),u=this.children.insert(r,o);return new Gn(this.value,u)}}remove(e){if(Yt(e))return this.children.isEmpty()?new Gn(null):new Gn(null,this.children);{const t=Zt(e),r=this.children.get(t);if(r){const i=r.remove(kn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Gn(null):new Gn(this.value,o)}return this}}get(e){if(Yt(e))return this.value;{const t=Zt(e),r=this.children.get(t);return r?r.get(kn(e)):null}}setTree(e,t){if(Yt(e))return t;{const r=Zt(e),o=(this.children.get(r)||new Gn(null)).setTree(kn(e),t);let u;return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Gn(this.value,u)}}fold(e){return this.fold_(gn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(dr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,gn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Yt(e))return null;{const o=Zt(e),u=this.children.get(o);return u?u.findOnPath_(kn(e),dr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gn(),t)}foreachOnPath_(e,t,r){if(Yt(e))return this;{this.value&&r(t,this.value);const i=Zt(e),o=this.children.get(i);return o?o.foreachOnPath_(kn(e),dr(t,i),r):new Gn(null)}}foreach(e){this.foreach_(gn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(dr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class tu{constructor(e){this.writeTree_=e}static empty(){return new tu(new Gn(null))}}function HI(n,e,t){if(Yt(e))return new tu(new Gn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const u=$s(i,e);return o=o.updateChild(u,t),new tu(n.writeTree_.set(i,o))}{const i=new Gn(t),o=n.writeTree_.setTree(e,i);return new tu(o)}}}function LP(n,e,t){let r=n;return xi(t,(i,o)=>{r=HI(r,dr(e,i),o)}),r}function kU(n,e){if(Yt(e))return tu.empty();{const t=n.writeTree_.setTree(e,new Gn(null));return new tu(t)}}function VP(n,e){return null!=Om(n,e)}function Om(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild($s(t.path,e)):null}function OU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild($n,(r,i)=>{e.push(new Xt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Xt(r,i.value))}),e}function mp(n,e){if(Yt(e))return n;{const t=Om(n,e);return new tu(null!=t?new Gn(t):n.writeTree_.subtree(e))}}function UP(n){return n.writeTree_.isEmpty()}function Uv(n,e){return FU(gn(),n.writeTree_,e)}function FU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,k.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=FU(dr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(dr(n,".priority"),r)),t}}function TS(n,e){return jU(e,n)}function Bq(n,e){if(n.snap)return $a(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&$a(dr(n.path,t),e))return!0;return!1}function Hq(n){return n.visible}function LU(n,e,t){let r=tu.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const u=o.path;let d;if(o.snap)$a(t,u)?(d=$s(t,u),r=HI(r,d,o.snap)):$a(u,t)&&(d=$s(u,t),r=HI(r,gn(),o.snap.getChild(d)));else{if(!o.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if($a(t,u))d=$s(t,u),r=LP(r,d,o.children);else if($a(u,t))if(d=$s(u,t),Yt(d))r=LP(r,gn(),o.children);else{const g=(0,k.DV)(o.children,Zt(d));if(g){const y=g.getChild(kn(d));r=HI(r,gn(),y)}}}}}return r}function VU(n,e,t,r,i){if(r||i){const o=mp(n.visibleWrites,e);return!i&&UP(o)?t:i||null!=t||VP(o,gn())?Uv(LU(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&($a(y.path,e)||$a(e,y.path))},e),t||Bt.EMPTY_NODE):null}{const o=Om(n.visibleWrites,e);if(null!=o)return o;{const u=mp(n.visibleWrites,e);return UP(u)?t:null!=t||VP(u,gn())?Uv(u,t||Bt.EMPTY_NODE):null}}}function DS(n,e,t,r){return VU(n.writeTree,n.treePath,e,t,r)}function BP(n,e){return function $q(n,e,t){let r=Bt.EMPTY_NODE;const i=Om(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild($n,(o,u)=>{r=r.updateImmediateChild(o,u)}),r;if(t){const o=mp(n.visibleWrites,e);return t.forEachChild($n,(u,d)=>{const g=Uv(mp(o,new En(u)),d);r=r.updateImmediateChild(u,g)}),OU(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return OU(mp(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function UU(n,e,t,r){return function Gq(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=dr(e,t);if(VP(n.visibleWrites,o))return null;{const u=mp(n.visibleWrites,o);return UP(u)?i.getChild(t):Uv(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function SS(n,e){return function zq(n,e){return Om(n.visibleWrites,e)}(n.writeTree,dr(n.treePath,e))}function jP(n,e,t){return function Wq(n,e,t,r){const i=dr(e,t),o=Om(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?Uv(mp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function BU(n,e){return jU(dr(n.treePath,e),n.writeTree)}function jU(n,e){return{treePath:n,writeTree:e}}class Yq{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,LI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,FI(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,Fv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,LI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const HU=new class Qq{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class HP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new gp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:km(this.viewCache_),o=function Zq(n,e,t,r,i,o){return function qq(n,e,t,r,i,o,u){let d;const g=mp(n.visibleWrites,e),y=Om(g,gn());if(null!=y)d=y;else{if(null==t)return[];d=Uv(g,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const C=[],D=u.getCompare(),M=o?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let O=M.getNext();for(;O&&C.length<i;)0!==D(O,r)&&C.push(O),O=M.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function $U(n,e,t,r,i,o){const u=e.eventCache;if(null!=SS(r,t))return e;{let d,g;if(Yt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=km(e),D=BP(r,y instanceof Bt?y:Bt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,o)}else{const y=DS(r,km(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=Zt(t);if(".priority"===y){(0,k.hu)(1===pp(t),"Can't have a priority with additional path components");const C=u.getNode();g=e.serverCache.getNode();const D=UU(r,t,C,g);d=null!=D?n.filter.updatePriority(C,D):u.getNode()}else{const C=kn(t);let D;if(u.isCompleteForChild(y)){g=e.serverCache.getNode();const M=UU(r,t,u.getNode(),g);D=null!=M?u.getNode().getImmediateChild(y).updateChild(C,M):u.getNode().getImmediateChild(y)}else D=jP(r,y,e.serverCache);d=null!=D?n.filter.updateChild(u.getNode(),y,D,C,i,o):u.getNode()}}return jI(e,d,u.isFullyInitialized()||Yt(t),n.filter.filtersNodes())}}function AS(n,e,t,r,i,o,u,d){const g=e.serverCache;let y;const C=u?n.filter:n.filter.getIndexedFilter();if(Yt(t))y=C.updateFullNode(g.getNode(),r,null);else if(C.filtersNodes()&&!g.isFiltered()){const O=g.getNode().updateChild(t,r);y=C.updateFullNode(g.getNode(),O,null)}else{const O=Zt(t);if(!g.isCompleteForPath(t)&&pp(t)>1)return e;const U=kn(t),se=g.getNode().getImmediateChild(O).updateChild(U,r);y=".priority"===O?C.updatePriority(g.getNode(),se):C.updateChild(g.getNode(),O,se,U,HU,null)}const D=PU(e,y,g.isFullyInitialized()||Yt(t),C.filtersNodes());return $U(n,D,t,i,new HP(i,D,o),d)}function $P(n,e,t,r,i,o,u){const d=e.eventCache;let g,y;const C=new HP(i,e,o);if(Yt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),g=jI(e,y,!0,n.filter.filtersNodes());else{const D=Zt(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=jI(e,y,d.isFullyInitialized(),d.isFiltered());else{const M=kn(t),O=d.getNode().getImmediateChild(D);let U;if(Yt(M))U=r;else{const J=C.getCompleteChild(D);U=null!=J?".priority"===vP(M)&&J.getChild(gU(M)).isEmpty()?J:J.updateChild(M,r):Bt.EMPTY_NODE}g=O.equals(U)?e:jI(e,n.filter.updateChild(d.getNode(),D,U,M,C,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function GU(n,e){return n.eventCache.isCompleteForChild(e)}function WU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function GP(n,e,t,r,i,o,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=Yt(t)?r:new Gn(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((D,M)=>{if(C.hasChild(D)){const U=WU(0,e.serverCache.getNode().getImmediateChild(D),M);g=AS(n,g,new En(D),U,i,o,u,d)}}),y.children.inorderTraversal((D,M)=>{const O=!e.serverCache.isCompleteForChild(D)&&null===M.value;if(!C.hasChild(D)&&!O){const J=WU(0,e.serverCache.getNode().getImmediateChild(D),M);g=AS(n,g,new En(D),J,i,o,u,d)}}),g}class o6{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new AP(r.getIndex()),o=function wq(n){return n.loadsAllData()?new AP(n.getIndex()):n.hasLimit()?new vq(n):new VI(n)}(r);this.processor_=function Jq(n){return{filter:n}}(o);const u=t.serverCache,d=t.eventCache,g=i.updateFullNode(Bt.EMPTY_NODE,u.getNode(),null),y=o.updateFullNode(Bt.EMPTY_NODE,d.getNode(),null),C=new gp(g,u.isFullyInitialized(),i.filtersNodes()),D=new gp(y,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=CS(D,C),this.eventGenerator_=new Rq(this.query_)}get query(){return this.query_}}function u6(n,e){const t=km(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Yt(e)&&!t.getImmediateChild(Zt(e)).isEmpty())?t.getChild(e):null}function zU(n){return 0===n.eventRegistrations_.length}function qU(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function KU(n,e,t,r){e.type===Ga.MERGE&&null!==e.source.queryId&&((0,k.hu)(km(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(bS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function e6(n,e,t,r,i){const o=new Yq;let u,d;if(t.type===Ga.OVERWRITE){const y=t;y.source.fromUser?u=$P(n,e,y.path,y.snap,r,i,o):((0,k.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!Yt(y.path),u=AS(n,e,y.path,y.snap,r,i,d,o))}else if(t.type===Ga.MERGE){const y=t;y.source.fromUser?u=function n6(n,e,t,r,i,o,u){let d=e;return r.foreach((g,y)=>{const C=dr(t,g);GU(e,Zt(C))&&(d=$P(n,d,C,y,i,o,u))}),r.foreach((g,y)=>{const C=dr(t,g);GU(e,Zt(C))||(d=$P(n,d,C,y,i,o,u))}),d}(n,e,y.path,y.children,r,i,o):((0,k.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),u=GP(n,e,y.path,y.children,r,i,d,o))}else if(t.type===Ga.ACK_USER_WRITE){const y=t;u=y.revert?function s6(n,e,t,r,i,o){let u;if(null!=SS(r,t))return e;{const d=new HP(r,e,i),g=e.eventCache.getNode();let y;if(Yt(t)||".priority"===Zt(t)){let C;if(e.serverCache.isFullyInitialized())C=DS(r,km(e));else{const D=e.serverCache.getNode();(0,k.hu)(D instanceof Bt,"serverChildren would be complete if leaf node"),C=BP(r,D)}y=n.filter.updateFullNode(g,C,o)}else{const C=Zt(t);let D=jP(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=g.getImmediateChild(C)),y=null!=D?n.filter.updateChild(g,C,D,kn(t),d,o):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(g,C,Bt.EMPTY_NODE,kn(t),d,o):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=DS(r,km(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=SS(r,gn()),jI(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function r6(n,e,t,r,i,o,u){if(null!=SS(i,t))return e;const d=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(Yt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return AS(n,e,t,g.getNode().getChild(t),i,o,d,u);if(Yt(t)){let y=new Gn(null);return g.getNode().forEachChild(Rc,(C,D)=>{y=y.set(new En(C),D)}),GP(n,e,t,y,i,o,d,u)}return e}{let y=new Gn(null);return r.foreach((C,D)=>{const M=dr(t,C);g.isCompleteForPath(M)&&(y=y.set(C,g.getNode().getChild(M)))}),GP(n,e,t,y,i,o,d,u)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==Ga.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);u=function i6(n,e,t,r,i){const o=e.serverCache;return $U(n,PU(e,o.getNode(),o.isFullyInitialized()||Yt(t),o.isFiltered()),t,r,HU,i)}(n,e,t.path,r,o)}const g=o.getChanges();return function t6(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=bS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(xU(bS(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,i,e,t,r);return function Xq(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,k.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,ZU(n,o.changes,o.viewCache.eventCache.getNode(),null)}function ZU(n,e,t,r){return function Nq(n,e,t,r){const i=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function yq(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),BI(n,i,"child_removed",e,r,t),BI(n,i,"child_added",e,r,t),BI(n,i,"child_moved",o,r,t),BI(n,i,"child_changed",e,r,t),BI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let xS,RS;class YU{constructor(){this.views=new Map}}function WP(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,k.hu)(null!=o,"SyncTree gave us an op for an invalid query."),KU(o,e,t,r)}{let o=[];for(const u of n.views.values())o=o.concat(KU(u,e,t,r));return o}}function QU(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=DS(t,i?r:null),g=!1;d?g=!0:r instanceof Bt?(d=BP(t,r),g=!1):(d=Bt.EMPTY_NODE,g=!1);const y=CS(new gp(d,g,!1),new gp(r,i,!1));return new o6(e,y)}return u}function JU(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function _p(n,e){let t=null;for(const r of n.views.values())t=t||u6(r,e);return t}function XU(n,e){return e._queryParams.loadsAllData()?MS(n):n.views.get(e._queryIdentifier)}function eB(n,e){return null!=XU(n,e)}function yp(n){return null!=MS(n)}function MS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let v6=1;class tB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Gn(null),this.pendingWriteTree_=function Kq(){return{visibleWrites:tu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zP(n,e,t,r,i){return function Fq(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=HI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Bv(n,new Pm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function vp(n,e,t=!1){const r=function Vq(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Uq(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&Bq(d,r.path)?i=!1:$a(r.path,d.path)&&(o=!0)),u--}return!!i&&(o?(function jq(n){n.visibleWrites=LU(n.allWrites,Hq,gn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=kU(n.visibleWrites,r.path):xi(r.children,g=>{n.visibleWrites=kU(n.visibleWrites,dr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let o=new Gn(null);return null!=r.snap?o=o.set(gn(),!0):xi(r.children,u=>{o=o.set(new En(u),!0)}),Bv(n,new IS(r.path,o,t))}return[]}function $I(n,e,t){return Bv(n,new Pm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function NS(n,e,t,r,i=!1){const o=e._path,u=n.syncPointTree_.get(o);let d=[];if(u&&("default"===e._queryIdentifier||eB(u,e))){const g=function m6(n,e,t,r){const i=e._queryIdentifier,o=[];let u=[];const d=yp(n);if("default"===i)for(const[g,y]of n.views.entries())u=u.concat(qU(y,t,r)),zU(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||o.push(y.query));else{const g=n.views.get(i);g&&(u=u.concat(qU(g,t,r)),zU(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return d&&!yp(n)&&o.push(new(function f6(){return(0,k.hu)(xS,"Reference.ts has not been loaded"),xS}())(e._repo,e._path)),{removed:o,events:u}}(u,e,t,r);(function p6(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=g.removed;if(d=g.events,!i){const C=-1!==y.findIndex(M=>M._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(o,(M,O)=>yp(O));if(C&&!D){const M=n.syncPointTree_.subtree(o);if(!M.isEmpty()){const O=function D6(n){return n.fold((e,t,r)=>{if(t&&yp(t))return[MS(t)];{let i=[];return t&&(i=JU(t)),xi(r,(o,u)=>{i=i.concat(u)}),i}})}(M);for(let U=0;U<O.length;++U){const J=O[U],se=J.query,Fe=sB(n,J);n.listenProvider_.startListening(WI(se),GI(n,se),Fe.hashFn,Fe.onComplete)}}}!D&&y.length>0&&!r&&(C?n.listenProvider_.stopListening(WI(e),null):y.forEach(M=>{const O=n.queryToTagMap.get(kS(M));n.listenProvider_.stopListening(WI(M),O)}))}!function S6(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=kS(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,y)}return d}function nB(n,e,t,r){const i=KP(n,r);if(null!=i){const o=ZP(i),u=o.path,d=o.queryId,g=$s(u,e);return YP(n,u,new Pm(OP(d),g,t))}return[]}function qP(n,e,t,r=!1){const i=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(i,(M,O)=>{const U=$s(M,i);o=o||_p(O,U),u=u||yp(O)});let g,d=n.syncPointTree_.get(i);d?(u=u||yp(d),o=o||_p(d,gn())):(d=new YU,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=o?g=!0:(g=!1,o=Bt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((O,U)=>{const J=_p(U,gn());J&&(o=o.updateImmediateChild(O,J))}));const y=eB(d,e);if(!y&&!e._queryParams.loadsAllData()){const M=kS(e);(0,k.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const O=function A6(){return v6++}();n.queryToTagMap.set(M,O),n.tagToQueryMap.set(O,M)}let D=function g6(n,e,t,r,i,o){const u=QU(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function c6(n,e){n.eventRegistrations_.push(e)}(u,t),function d6(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild($n,(o,u)=>{r.push(Fv(o,u))}),t.isFullyInitialized()&&r.push(xU(t.getNode())),ZU(n,r,t.getNode(),e)}(u,t)}(d,e,t,TS(n.pendingWriteTree_,i),o,g);if(!y&&!u&&!r){const M=XU(d,e);D=D.concat(function x6(n,e,t){const r=e._path,i=GI(n,e),o=sB(n,t),u=n.listenProvider_.startListening(WI(e),i,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!yp(d.value),"If we're adding a query, it shouldn't be shadowed");else{const g=d.fold((y,C,D)=>{if(!Yt(y)&&C&&yp(C))return[MS(C).query];{let M=[];return C&&(M=M.concat(JU(C).map(O=>O.query))),xi(D,(O,U)=>{M=M.concat(U)}),M}});for(let y=0;y<g.length;++y){const C=g[y];n.listenProvider_.stopListening(WI(C),GI(n,C))}}return u}(n,e,M))}return D}function PS(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,d)=>{const y=_p(d,$s(u,e));if(y)return y});return VU(i,e,o,t,!0)}function Bv(n,e){return rB(e,n.syncPointTree_,null,TS(n.pendingWriteTree_,gn()))}function rB(n,e,t,r){if(Yt(n.path))return iB(n,e,t,r);{const i=e.get(gn());null==t&&null!=i&&(t=_p(i,gn()));let o=[];const u=Zt(n.path),d=n.operationForChild(u),g=e.children.get(u);if(g&&d){const y=t?t.getImmediateChild(u):null,C=BU(r,u);o=o.concat(rB(d,g,y,C))}return i&&(o=o.concat(WP(i,n,r,t))),o}}function iB(n,e,t,r){const i=e.get(gn());null==t&&null!=i&&(t=_p(i,gn()));let o=[];return e.children.inorderTraversal((u,d)=>{const g=t?t.getImmediateChild(u):null,y=BU(r,u),C=n.operationForChild(u);C&&(o=o.concat(iB(C,d,g,y)))}),i&&(o=o.concat(WP(i,n,r,t))),o}function sB(n,e){const t=e.query,r=GI(n,t);return{hashFn:()=>(function a6(n){return n.viewCache_.serverCache.getNode()}(e)||Bt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function C6(n,e,t){const r=KP(n,t);if(r){const i=ZP(r),o=i.path,u=i.queryId,d=$s(o,e);return YP(n,o,new UI(OP(u),d))}return[]}(n,t._path,r):function I6(n,e){return Bv(n,new UI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function Iz(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return NS(n,t,null,o)}}}}function GI(n,e){const t=kS(e);return n.queryToTagMap.get(t)}function kS(n){return n._path.toString()+"$"+n._queryIdentifier}function KP(n,e){return n.tagToQueryMap.get(e)}function ZP(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new En(n.substr(0,e))}}function YP(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),WP(r,t,TS(n.pendingWriteTree_,e),null)}function WI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function y6(){return(0,k.hu)(RS,"Reference.ts has not been loaded"),RS}())(n._repo,n._path):n}class QP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new QP(t)}node(){return this.node_}}class JP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=dr(this.path_,e);return new JP(this.syncTree_,t)}node(){return PS(this.syncTree_,this.path_)}}const oB=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?R6(n[".sv"],e,t):"object"==typeof n[".sv"]?N6(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},R6=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},N6=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},aB=function(n,e,t,r){return ek(e,new JP(t,n),r)},XP=function(n,e,t){return ek(n,new QP(e),t)};function ek(n,e,t){const r=n.getPriority().val(),i=oB(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,d=oB(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new Pv(d,wr(i)):n}{const u=n;return o=u,i!==u.getPriority().val()&&(o=o.updatePriority(new Pv(i))),u.forEachChild($n,(d,g)=>{const y=ek(g,e.getImmediateChild(d),t);y!==g&&(o=o.updateImmediateChild(d,y))}),o}}class tk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function OS(n,e){let t=e instanceof En?e:new En(e),r=n,i=Zt(t);for(;null!==i;){const o=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new tk(i,r,o),t=kn(t),i=Zt(t)}return r}function Fm(n){return n.node.value}function nk(n,e){n.node.value=e,rk(n)}function lB(n){return n.node.childCount>0}function FS(n,e){xi(n.node.children,(t,r)=>{e(new tk(t,n,r))})}function uB(n,e,t,r){t&&!r&&e(n),FS(n,i=>{uB(i,e,!0,r)}),t&&r&&e(n)}function zI(n){return new En(null===n.parent?n.name:zI(n.parent)+"/"+n.name)}function rk(n){null!==n.parent&&function O6(n,e,t){const r=function P6(n){return void 0===Fm(n)&&!lB(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,rk(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,rk(n))}(n.parent,n.name,n)}const F6=/[\[\].#$\/\u0000-\u001F\u007F]/,L6=/[\[\].#$\u0000-\u001F\u007F]/,ik=10485760,LS=function(n){return"string"==typeof n&&0!==n.length&&!F6.test(n)},cB=function(n){return"string"==typeof n&&0!==n.length&&!L6.test(n)},qI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!uS(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Nc=function(n,e,t,r){r&&void 0===e||KI((0,k.gK)(n,"value"),e,t)},KI=function(n,e,t){const r=t instanceof En?new Xz(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Rm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Rm(r)+" with contents = "+e.toString());if(uS(e))throw new Error(n+"contains "+e.toString()+" "+Rm(r));if("string"==typeof e&&e.length>ik/3&&(0,k.ug)(e)>ik)throw new Error(n+"contains a string greater than "+ik+" utf8 bytes "+Rm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(xi(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!LS(u)))throw new Error(n+" contains an invalid key ("+u+") "+Rm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function eq(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),mU(n)})(r,u),KI(n,d,r),function tq(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Rm(r)+" in addition to actual children.")}},dB=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];xi(e,(u,d)=>{const g=new En(u);if(KI(i,d,dr(t,g)),".priority"===vP(g)&&!qI(d))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=NI(r);for(let u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!LS(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Jz);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&$a(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},sk=function(n,e,t){if(!t||void 0!==e){if(uS(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qI(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ZI=function(n,e,t,r){if(!(r&&void 0===t||LS(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},YI=function(n,e,t,r){if(!(r&&void 0===t||cB(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Wa=function(n,e){if(".info"===Zt(e))throw new Error(n+" failed = Can't modify data under /.info/")},hB=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!LS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cB(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class j6{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function VS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!wP(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function fB(n,e,t){VS(n,t),pB(n,r=>wP(r,e))}function ea(n,e,t){VS(n,t),pB(n,r=>$a(r,e)||$a(e,r))}function pB(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(H6(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function H6(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();xm&&Ai("event: "+t.toString()),Rv(r)}}}const gB="repo_interrupt";class G6{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new j6,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ES(),this.transactionQueueTree_=new tk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mB(n){const t=n.infoData_.getNode(new En(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function QI(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:mB(n)})}function _B(n,e,t,r,i){n.dataUpdateCount++;const o=new En(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const g=(0,k.UI)(t,y=>wr(y));u=function b6(n,e,t,r){const i=KP(n,r);if(i){const o=ZP(i),u=o.path,d=o.queryId,g=$s(u,e),y=Gn.fromObject(t);return YP(n,u,new Vv(OP(d),g,y))}return[]}(n.serverSyncTree_,o,g,i)}else{const g=wr(t);u=nB(n.serverSyncTree_,o,g,i)}else if(r){const g=(0,k.UI)(t,y=>wr(y));u=function E6(n,e,t){const r=Gn.fromObject(t);return Bv(n,new Vv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,g)}else{const g=wr(t);u=$I(n.serverSyncTree_,o,g)}let d=o;u.length>0&&(d=Hv(n,o)),ea(n.eventQueue_,d,u)}function yB(n,e){ok(n,"connected",e),!1===e&&function Z6(n){jv(n,"onDisconnectEvents");const e=QI(n),t=ES();NP(n.onDisconnect_,gn(),(i,o)=>{const u=aB(i,o,n.serverSyncTree_,e);Lv(t,i,u)});let r=[];NP(t,gn(),(i,o)=>{r=r.concat($I(n.serverSyncTree_,i,o));const u=ck(n,i);Hv(n,u)}),n.onDisconnect_=ES(),ea(n.eventQueue_,gn(),r)}(n)}function ok(n,e,t){const r=new En("/.info/"+e),i=wr(t);n.infoData_.updateSnapshot(r,i);const o=$I(n.infoSyncTree_,r,i);ea(n.eventQueue_,r,o)}function US(n){return n.nextWriteId_++}function ak(n,e,t,r,i){jv(n,"set",{path:e.toString(),value:t,priority:r});const o=QI(n),u=wr(t,r),d=PS(n.serverSyncTree_,e),g=XP(u,d,o),y=US(n),C=zP(n.serverSyncTree_,e,g,y,!0);VS(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(M,O)=>{const U="ok"===M;U||hs("set at "+e+" failed: "+M);const J=vp(n.serverSyncTree_,y,!U);ea(n.eventQueue_,e,J),wp(0,i,M,O)});const D=ck(n,e);Hv(n,D),ea(n.eventQueue_,D,[])}function Y6(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&RP(n.onDisconnect_,e),wp(0,t,r,i)})}function vB(n,e,t,r){const i=wr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,u)=>{"ok"===o&&Lv(n.onDisconnect_,e,i),wp(0,r,o,u)})}function lk(n,e,t){let r;r=".info"===Zt(e._path)?NS(n.infoSyncTree_,e,t):NS(n.serverSyncTree_,e,t),fB(n.eventQueue_,e._path,r)}function wB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(gB)}function jv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ai(t,...e)}function wp(n,e,t,r){e&&Rv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const u=new Error(o);u.code=i,e(u)}})}function uk(n,e,t){return PS(n.serverSyncTree_,e,t)||Bt.EMPTY_NODE}function BS(n,e=n.transactionQueueTree_){if(e||jS(n,e),Fm(e)){const t=IB(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function n4(n,e,t){const r=t.map(y=>y.currentWriteId),i=uk(n,e,r);let o=i;const u=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,k.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=$s(e,C.path);o=o.updateChild(D,C.currentOutputSnapshotRaw)}const d=o.val(!0),g=e;n.server_.put(g.toString(),d,y=>{jv(n,"transaction put response",{path:g.toString(),status:y});let C=[];if("ok"===y){const D=[];for(let M=0;M<t.length;M++)t[M].status=2,C=C.concat(vp(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&D.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();jS(n,OS(n.transactionQueueTree_,e)),BS(n,n.transactionQueueTree_),ea(n.eventQueue_,e,C);for(let M=0;M<D.length;M++)Rv(D[M])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{hs("transaction at "+g.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}Hv(n,e)}},u)}(n,zI(e),t)}else lB(e)&&FS(e,t=>{BS(n,t)})}function Hv(n,e){const t=EB(n,e),r=zI(t);return function r4(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const g=e[d],y=$s(t,g.path);let D,C=!1;if((0,k.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)C=!0,D=g.abortReason,i=i.concat(vp(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)C=!0,D="maxretry",i=i.concat(vp(n.serverSyncTree_,g.currentWriteId,!0));else{const M=uk(n,g.path,u);g.currentInputSnapshot=M;const O=e[d].update(M.val());if(void 0!==O){KI("transaction failed: Data returned ",O,g.path);let U=wr(O);"object"==typeof O&&null!=O&&(0,k.r3)(O,".priority")||(U=U.updatePriority(M.getPriority()));const se=g.currentWriteId,Fe=QI(n),Ge=XP(U,M,Fe);g.currentOutputSnapshotRaw=U,g.currentOutputSnapshotResolved=Ge,g.currentWriteId=US(n),u.splice(u.indexOf(se),1),i=i.concat(zP(n.serverSyncTree_,g.path,Ge,g.currentWriteId,g.applyLocally)),i=i.concat(vp(n.serverSyncTree_,se,!0))}else C=!0,D="nodata",i=i.concat(vp(n.serverSyncTree_,g.currentWriteId,!0))}ea(n.eventQueue_,t,i),i=[],C&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}jS(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Rv(r[d]);BS(n,n.transactionQueueTree_)}(n,IB(n,t),r),r}function EB(n,e){let t,r=n.transactionQueueTree_;for(t=Zt(e);null!==t&&void 0===Fm(r);)r=OS(r,t),t=Zt(e=kn(e));return r}function IB(n,e){const t=[];return CB(n,e,t),t.sort((r,i)=>r.order-i.order),t}function CB(n,e,t){const r=Fm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);FS(e,i=>{CB(n,i,t)})}function jS(n,e){const t=Fm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,nk(e,t.length>0?t:void 0)}FS(e,r=>{jS(n,r)})}function ck(n,e){const t=zI(EB(n,e)),r=OS(n.transactionQueueTree_,e);return function k6(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{dk(n,i)}),dk(n,r),uB(r,i=>{dk(n,i)}),t}function dk(n,e){const t=Fm(e);if(t){const r=[];let i=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,k.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,k.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(vp(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?nk(e,void 0):t.length=o+1,ea(n.eventQueue_,zI(e),i);for(let u=0;u<r.length;u++)Rv(r[u])}}const hk=function(n,e){const t=o4(n),r=t.namespace;return"firebase.com"===t.domain&&xc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&xc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new En(t.pathString)}},o4=function(n){let e="",t="",r="",i="",o="",u=!0,d="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function i4(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,D)));const M=function s4(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):hs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(u="https"===d||"wss"===d,g=parseInt(e.substring(y+1),10)):y=e.length;const O=e.slice(0,y);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),t=e.substring(U+1),o=r}"ns"in M&&(o=M.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:o}};class bB{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class TB{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class DB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return Y6(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Wa("OnDisconnect.remove",this._path);const e=new k.BH;return vB(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Wa("OnDisconnect.set",this._path),Nc("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return vB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Wa("OnDisconnect.setWithPriority",this._path),Nc("OnDisconnect.setWithPriority",e,this._path,!1),sk("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function Q6(n,e,t,r,i){const o=wr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,d)=>{"ok"===u&&Lv(n.onDisconnect_,e,o),wp(0,i,u,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Wa("OnDisconnect.update",this._path),dB("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function J6(n,e,t,r){if((0,k.xb)(t))return Ai("onDisconnect().update() called with empty data.  Don't do anything."),void wp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&xi(t,(u,d)=>{const g=wr(d);Lv(n.onDisconnect_,dr(e,u),g)}),wp(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class _o{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Yt(this._path)?null:vP(this._path)}get ref(){return new za(this._repo,this._path)}get _queryIdentifier(){const e=RU(this._queryParams),t=cP(e);return"{}"===t?"default":t}get _queryObject(){return RU(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof _o))return!1;const t=this._repo===e._repo,r=wP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Qz(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function HS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ep(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Rc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ch)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Mc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===$n){if(null!=e&&!qI(e)||null!=t&&!qI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof TP||n.getIndex()===DP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $S(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class za extends _o{constructor(e,t){super(e,t,new yS,!1)}get parent(){const e=gU(this._path);return null===e?null:new za(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Lm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new En(e),r=Vm(this.ref,e);return new Lm(this._node.getChild(t),r,$n)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Lm(i,Vm(this.ref,r),$n)))}hasChild(e){const t=new En(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function SB(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Vm(n._root,e):n._root}function AB(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=hk(e,n._repo.repoInfo_.nodeAdmin);hB("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&xc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),SB(n,t.path.toString())}function Vm(n,e){return null===Zt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),YI("child","path",t,!1)):YI("child","path",e,!1),new za(n._repo,dr(n._path,e));var t}function pk(n,e){n=(0,k.m9)(n),Wa("set",n._path),Nc("set",e,n._path,!1);const t=new k.BH;return ak(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function d4(n,e){dB("update",e,n._path,!1);const t=new k.BH;return function K6(n,e,t,r){jv(n,"update",{path:e.toString(),value:t});let i=!0;const o=QI(n),u={};if(xi(t,(d,g)=>{i=!1,u[d]=aB(dr(e,d),wr(g),n.serverSyncTree_,o)}),i)Ai("update() called with empty data.  Don't do anything."),wp(0,r,"ok",void 0);else{const d=US(n),g=function w6(n,e,t,r){!function Lq(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=LP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Gn.fromObject(t);return Bv(n,new Vv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,d);VS(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,C)=>{const D="ok"===y;D||hs("update at "+e+" failed: "+y);const M=vp(n.serverSyncTree_,d,!D),O=M.length>0?Hv(n,e):e;ea(n.eventQueue_,O,M),wp(0,r,y,C)}),xi(t,y=>{const C=ck(n,dr(e,y));Hv(n,C)}),ea(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function h4(n){n=(0,k.m9)(n);const e=new fk(()=>{}),t=new JI(e);return function q6(n,e,t){const r=function T6(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const D=$s(y,t);r=r||_p(C,D)});let i=n.syncPointTree_.get(t);i?r=r||_p(i,gn()):(i=new YU,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,u=o?new gp(r,!0,!1):null;return function l6(n){return bS(n.viewCache_)}(QU(i,e,TS(n.pendingWriteTree_,e._path),o?u.getNode():Bt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=wr(i).withIndex(e._queryParams.getIndex());let u;if(qP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=$I(n.serverSyncTree_,e._path,o);else{const d=GI(n.serverSyncTree_,e);u=nB(n.serverSyncTree_,e._path,o,d)}return ea(n.eventQueue_,e._path,u),NS(n.serverSyncTree_,e,t,null,!0),o},i=>(jv(n,"get for query "+(0,k.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Lm(r,new za(n._repo,n._path),n._queryParams.getIndex()))}class JI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new bB("value",this,new Lm(e.snapshotNode,new za(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TB(this,e,t):null}matches(e){return e instanceof JI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class GS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TB(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Vm(new za(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new bB(e.type,this,new Lm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof GS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function XI(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const g=t,y=(C,D)=>{lk(n._repo,n,d),g(C,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new fk(t,o||void 0),d="value"===e?new JI(u):new GS(e,u);return function X6(n,e,t){let r;r=".info"===Zt(e._path)?qP(n.infoSyncTree_,e,t):qP(n.serverSyncTree_,e,t),fB(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>lk(n._repo,n,d)}function gk(n,e,t,r){return XI(n,"value",e,t,r)}function xB(n,e,t,r){return XI(n,"child_added",e,t,r)}function MB(n,e,t,r){return XI(n,"child_changed",e,t,r)}function RB(n,e,t,r){return XI(n,"child_moved",e,t,r)}function NB(n,e,t,r){return XI(n,"child_removed",e,t,r)}function PB(n,e,t){let r=null;const i=t?new fk(t):null;"value"===e?r=new JI(i):e&&(r=new GS(e,i)),lk(n._repo,n,r)}class nu{}class kB extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("endAt",this._value,e._path,!0);const t=MP(e._queryParams,this._value,this._key);if($S(t),Ep(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class p4 extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("endBefore",this._value,e._path,!1);const t=function bq(n,e,t){let r,i;return n.index_===Rc?("string"==typeof e&&(e=AU(e)),i=MP(n,e,t)):(r=null==t?ch:AU(t),i=MP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if($S(t),Ep(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class OB extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("startAt",this._value,e._path,!0);const t=xP(e._queryParams,this._value,this._key);if($S(t),Ep(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class _4 extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("startAfter",this._value,e._path,!1);const t=function Cq(n,e,t){let r;if(n.index_===Rc)"string"==typeof e&&(e=SU(e)),r=xP(n,e,t);else{let i;i=null==t?Mc:SU(t),r=xP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if($S(t),Ep(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class v4 extends nu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new _o(e._repo,e._path,function Eq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class E4 extends nu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new _o(e._repo,e._path,function Iq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class C4 extends nu{constructor(e){super(),this._path=e}_apply(e){HS(e,"orderByChild");const t=new En(this._path);if(Yt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new TP(t),i=vS(e._queryParams,r);return Ep(i),new _o(e._repo,e._path,i,!0)}}class T4 extends nu{_apply(e){HS(e,"orderByKey");const t=vS(e._queryParams,Rc);return Ep(t),new _o(e._repo,e._path,t,!0)}}class S4 extends nu{_apply(e){HS(e,"orderByPriority");const t=vS(e._queryParams,$n);return Ep(t),new _o(e._repo,e._path,t,!0)}}class x4 extends nu{_apply(e){HS(e,"orderByValue");const t=vS(e._queryParams,DP);return Ep(t),new _o(e._repo,e._path,t,!0)}}class R4 extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Nc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new kB(this._value,this._key)._apply(new OB(this._value,this._key)._apply(e))}}function ru(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function h6(n){(0,k.hu)(!xS,"__referenceConstructor has already been defined"),xS=n})(za),function _6(n){(0,k.hu)(!RS,"__referenceConstructor has already been defined"),RS=n}(za);const mk={};function LB(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||xc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ai("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,u=hk(o,i),d=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,o=`http://${y}?ns=${d.namespace}`,u=hk(o,i),d=u.repoInfo):g=!u.repoInfo.secure;const C=i&&g?new RI(RI.OWNER):new Dz(n.name,n.options,e);hB("Invalid Firebase Database URL",u),Yt(u.path)||xc("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function F4(n,e,t,r){let i=mk[e.name];i||(i={},mk[e.name]=i);let o=i[n.toURLString()];return o&&xc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new G6(n,false,t,r),i[n.toURLString()]=o,o}(d,n,C,new Tz(n.name,t));return new V4(D,n)}class V4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function W6(n,e,t){if(n.stats_=mP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new wS(n.repoInfo_,(r,i,o,u)=>{_B(n,r,i,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>yB(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Nm(n.repoInfo_,e,(r,i,o,u)=>{_B(n,r,i,o,u)},r=>{yB(n,r)},r=>{!function z6(n,e){xi(e,(t,r)=>{ok(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function xz(n,e){const t=n.toString();return gP[t]||(gP[t]=e()),gP[t]}(n.repoInfo_,()=>new Mq(n.stats_,n.server_)),n.infoData_=new Tq,n.infoSyncTree_=new tB({startListening:(r,i,o,u)=>{let d=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(d=$I(n.infoSyncTree_,r._path,g),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),ok(n,"connected",!1),n.serverSyncTree_=new tB({startListening:(r,i,o,u)=>(n.server_.listen(r,o,i,(d,g)=>{const y=u(d,g);ea(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new za(this._repo,gn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function O4(n,e){const t=mk[e];(!t||t[n.key]!==n)&&xc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),wB(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&xc("Cannot call "+e+" on a deleted database.")}}function VB(){rU.IS_TRANSPORT_INITIALIZED&&hs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function U4(){VB(),fp.forceDisallow()}function B4(){VB(),Nv.forceDisallow(),fp.forceAllow()}function G4(n,e){LV(n,e)}const z4={".sv":"timestamp"};class Z4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Nm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Nm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function W4(n){NV(Ci.SDK_VERSION),(0,Ci._registerComponent)(new Ns.wA("database",(e,{instanceIdentifier:t})=>LB(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ci.registerVersion)(MV,"0.13.6",n),(0,Ci.registerVersion)(MV,"0.13.6","esm2017")}();const X4=new co.Yd("@firebase/database-compat"),UB=function(n){X4.warn("FIREBASE WARNING: "+n)};class nK{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,UB("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class rK{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ip{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),YI("DataSnapshot.child","path",e,!1),new Ip(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),YI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ip(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new ta(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Hi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const u=Hi.getCancelAndContextArgs_("Query.on",r,i),d=(y,C)=>{t.call(u.context,new Ip(this.database,y),C)};d.userCallback=t,d.context=u.context;const g=null===(o=u.cancel)||void 0===o?void 0:o.bind(u.context);switch(e){case"value":return gk(this._delegate,d,g),t;case"child_added":return xB(this._delegate,d,g),t;case"child_removed":return NB(this._delegate,d,g),t;case"child_changed":return MB(this._delegate,d,g),t;case"child_moved":return RB(this._delegate,d,g),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,PB(this._delegate,e,i)}else PB(this._delegate,e)}get(){return h4(this._delegate).then(e=>new Ip(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const o=Hi.getCancelAndContextArgs_("Query.once",r,i),u=new k.BH,d=(y,C)=>{const D=new Ip(this.database,y);t&&t.call(o.context,D,C),u.resolve(D)};d.userCallback=t,d.context=o.context;const g=y=>{o.cancel&&o.cancel.call(o.context,y),u.reject(y)};switch(e){case"value":gk(this._delegate,d,g,{onlyOnce:!0});break;case"child_added":xB(this._delegate,d,g,{onlyOnce:!0});break;case"child_removed":NB(this._delegate,d,g,{onlyOnce:!0});break;case"child_changed":MB(this._delegate,d,g,{onlyOnce:!0});break;case"child_moved":RB(this._delegate,d,g,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Hi(this.database,ru(this._delegate,function w4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new v4(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Hi(this.database,ru(this._delegate,function I4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new E4(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Hi(this.database,ru(this._delegate,function b4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return YI("orderByChild","path",n,!1),new C4(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Hi(this.database,ru(this._delegate,function D4(){return new T4}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Hi(this.database,ru(this._delegate,function A4(){return new S4}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Hi(this.database,ru(this._delegate,function M4(){return new x4}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Hi(this.database,ru(this._delegate,function m4(n=null,e){return ZI("startAt","key",e,!0),new OB(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Hi(this.database,ru(this._delegate,function y4(n,e){return ZI("startAfter","key",e,!0),new _4(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Hi(this.database,ru(this._delegate,function f4(n,e){return ZI("endAt","key",e,!0),new kB(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Hi(this.database,ru(this._delegate,function g4(n,e){return ZI("endBefore","key",e,!0),new p4(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Hi(this.database,ru(this._delegate,function N4(n,e){return ZI("equalTo","key",e,!0),new R4(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Hi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ta(this.database,new za(this._delegate._repo,this._delegate._path))}}class ta extends Hi{constructor(e,t){super(e,new _o(t._repo,t._path,new yS,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ta(this.database,Vm(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ta(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new ta(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=pk(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,UB("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=d4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function c4(n,e,t){if(Wa("setWithPriority",n._path),Nc("setWithPriority",e,n._path,!1),sk("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return ak(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function l4(n){return Wa("remove",n._path),pk(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Y4(n,e,t){var r;if(n=(0,k.m9)(n),Wa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new k.BH,d=gk(n,()=>{});return function t4(n,e,t,r,i,o){jv(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:kV(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=uk(n,e,void 0);u.currentInputSnapshot=d;const g=u.update(d.val());if(void 0===g)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{KI("transaction failed: Data returned ",g,u.path),u.status=0;const y=OS(n.transactionQueueTree_,e),C=Fm(y)||[];let D;C.push(u),nk(y,C),"object"==typeof g&&null!==g&&(0,k.r3)(g,".priority")?(D=(0,k.DV)(g,".priority"),(0,k.hu)(qI(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(PS(n.serverSyncTree_,e)||Bt.EMPTY_NODE).getPriority().val();const M=QI(n),O=wr(g,D),U=XP(O,d,M);u.currentOutputSnapshotRaw=O,u.currentOutputSnapshotResolved=U,u.currentWriteId=US(n);const J=zP(n.serverSyncTree_,e,U,u.currentWriteId,u.applyLocally);ea(n.eventQueue_,e,J),BS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,C)=>{let D=null;g?o.reject(g):(D=new Lm(C,new za(n._repo,n._path),$n),o.resolve(new Z4(y,D)))},d,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new rK(o.committed,new Ip(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function u4(n,e){n=(0,k.m9)(n),Wa("setPriority",n._path),sk("setPriority",e,!1);const t=new k.BH;return ak(n._repo,dr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function a4(n,e){n=(0,k.m9)(n),Wa("push",n._path),Nc("push",e,n._path,!0);const t=mB(n._repo),r=_q(t),i=Vm(n,r),o=Vm(n,r);let u;return u=null!=e?pk(o,e).then(()=>o):Promise.resolve(o),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new ta(this.database,u));t&&i.then(()=>t(null),u=>t(u));const o=new ta(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Wa("Reference.onDisconnect",this._delegate._path),new nK(new DB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class eC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:U4,forceLongPolling:B4}}useEmulator(e,t,r={}){!function j4(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&xc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new RI(RI.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);o=new RI(u)}!function k4(n,e,t,r){n.repoInfo_=new fP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof ta){const t=AB(this._delegate,e.toString());return new ta(this,t)}{const t=SB(this._delegate,e);return new ta(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=AB(this._delegate,e);return new ta(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function H4(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),wB(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function $4(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function e4(n){n.persistentConnection_&&n.persistentConnection_.resume(gB)}(n._repo)}(this._delegate)}}eC.ServerValue={TIMESTAMP:function q4(){return z4}(),increment:n=>function K4(n){return{".sv":{increment:n}}}(n)};var sK=Object.freeze({__proto__:null,initStandalone:function iK({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){NV(t);const u=new Ns.zt("auth-internal",new Ns.H0("database-standalone"));return u.setComponent(new Ns.wA("auth-internal",()=>r,"PRIVATE")),{instance:new eC(LB(n,u,void 0,e,o),n),namespace:i}}});const oK=eC.ServerValue;function BB(n){return null==n}function jB(n){return"function"==typeof n.set}function HB(n,e){return jB(e)?e:n.ref(e)}function $B(n,e){if(function lK(n){return"string"==typeof n}(n))return e.stringCase();if(jB(n))return e.firebaseCase();if(function uK(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function tC(n,e,t="on",r=Ef.z){return new lo.y(i=>{let o=null;return o=n[t](e,(u,d)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Ct.U)(i=>{const{snapshot:o,prevKey:u}=i;let d=null;return o.exists()&&(d=o.key),{type:e,payload:o,prevKey:u,key:d}}),(0,J1.B)())}function GB(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function hK(n,e){const{payload:t,prevKey:r,key:i}=e,o=GB(n,i),u=function dK(n,e){if(BB(e))return 0;{const t=GB(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:d,key:g.key};return d=g.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const d=n[o-1];(d&&d.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(o>-1){const d=n.splice(o,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function WB(n){return(BB(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function zB(n,e,t){return function cK(n,e,t){return tC(n,"value","once",t).pipe(An(r=>{const i=[Je(r)];return e.forEach(o=>i.push(tC(n,o,"on",t))),(0,tN.T)(...i).pipe(Xu(hK,[]))}),Cg())}(n,e=WB(e),t)}function qB(n,e,t){const r=(e=WB(e)).map(i=>tC(n,i,"on",t));return(0,tN.T)(...r)}function KB(n,e){return function(r,i){return $B(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function mK(n){return function(t){return t?$B(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function ZB(n,e){return function(){return tC(n,"value","on",e)}}!function aK(n){n.INTERNAL.registerComponent(new Ns.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new eC(i,r)},"PUBLIC").setServiceProps({Reference:ta,Query:Hi,Database:eC,DataSnapshot:Ip,enableLogging:G4,INTERNAL:sK,ServerValue:oK}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}(bg.Z);const vK=new f.OlP("angularfire2.realtimeDatabaseURL"),wK=new f.OlP("angularfire2.database.use-emulator");let EK=(()=>{class n{constructor(t,r,i,o,u,d,g,y,C,D,M,O,U,J,se){this.schedulers=d;const Fe=g,Ge=(0,Ar.on)(t,u,r);y&&DN(Ge,u,C,M,O,U,D,J),this.database=(0,Ar.cc)(`${Ge.name}.database.${i}`,"AngularFireDatabase",Ge.name,()=>{const qe=u.runOutsideAngular(()=>Ge.database(i||void 0));return Fe&&qe.useEmulator(...Fe),qe},[Fe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>HB(this.database,t));let o=i;return r&&(o=r(i)),function _K(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:KB(r,"update"),set:KB(r,"set"),push:i=>r.push(i),remove:mK(r),snapshotChanges:i=>zB(n,i,t).pipe(on.iC),stateChanges:i=>qB(n,i,t).pipe(on.iC),auditTrail:i=>function fK(n,e,t){return function gK(n,e,t){return function pK(n,e){return tC(n,"value","on",e).pipe((0,Ct.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function fz(...n){const e=(0,Sl.jO)(n);return(0,Sr.e)((t,r)=>{const i=n.length,o=new Array(i);let u=n.map(()=>!1),d=!1;for(let g=0;g<i;g++)(0,rg.Xf)(n[g]).subscribe((0,Dr.x)(r,y=>{o[g]=y,!d&&!u[g]&&(u[g]=!0,(d=u.every(tf.y))&&(u=null))},hz.Z));t.subscribe((0,Dr.x)(r,g=>{if(d){const y=[g,...o];r.next(e?e(...y):y)}}))})}(e),(0,Ct.U)(([i,o])=>{const u=i.lastKeyToLoad,d=o.map(g=>g.key);return{actions:o,lastKeyToLoad:u,loadedKeys:d}}),function pz(n){return(0,Sr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Dr.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Ct.U)(i=>i.actions))}(n,qB(n,e).pipe(Xu((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(on.iC),valueChanges:(i,o)=>zB(n,i,t).pipe((0,Ct.U)(d=>d.map(g=>o&&o.idField?Object.assign(Object.assign({},g.payload.val()),{[o.idField]:g.key}):g.payload.val())),on.iC)}}(o,this)}object(t){return function yK(n,e){return{query:n,snapshotChanges:()=>ZB(n,e.schedulers.outsideAngular)().pipe(on.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ZB(n,e.schedulers.outsideAngular)().pipe(on.iC,(0,Ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>HB(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ar.Dh),f.LFG(Ar.xv,8),f.LFG(vK,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(on.HU),f.LFG(wK,8),f.LFG(UD,8),f.LFG(wN,8),f.LFG(EN,8),f.LFG(IN,8),f.LFG(CN,8),f.LFG(bN,8),f.LFG(TN,8),f.LFG(mI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IK=(()=>{class n{constructor(){VD.Z.registerVersion("angularfire",on.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[EK]}),n})();const YB_firebase={apiKey:"AIzaSyAjBMlGxMdKlvpBTnDmSR6poWOcBA7D_Pw",authDomain:"ngfirebaseproy-cris.firebaseapp.com",projectId:"ngfirebaseproy-cris",storageBucket:"ngfirebaseproy-cris.appspot.com",messagingSenderId:"242706282264",appId:"1:242706282264:web:09691bac99771a15d7106d",measurementId:"G-ZC4GMXXKSC"};let CK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navbar"]],decls:4,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand","mb-0","h1"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"span",2),f._uU(3,"App Empleados - Firebase"),f.qZA()()())}}),n})(),bK=(()=>{class n{constructor(){this.title="empleados"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[ZC,CK]}),n})(),TK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[bK]}),n.\u0275inj=f.cJS({imports:[Mu,E3,Ar.hO.initializeApp(YB_firebase),U$,q$,dz,IK,$L,gG.forRoot(),eA]}),n})();(0,f.G48)(),xu().bootstrapModule(TK).catch(n=>console.error(n))},5867:(ut,Se,V)=>{V.d(Se,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=V(9681);(0,f.registerVersion)("firebase","9.9.4","app")},127:(ut,Se,V)=>{V.d(Se,{Z:()=>f.Z});var f=V(3942);f.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(ut,Se,V)=>{V.r(Se);var f=V(5861),ne=V(3942),F=V(2090),ue=V(9681),oe=V(655),pe=V(1877),ce=V(4859);const Ie=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new pe.Yd("@firebase/auth");function ot(v,...p){tt.logLevel<=pe.in.ERROR&&tt.error(`Auth (${ue.SDK_VERSION}): ${v}`,...p)}function Me(v,...p){throw He(v,...p)}function Ee(v,...p){return He(v,...p)}function Te(v,p,_){const E=Object.assign(Object.assign({},nt()),{[p]:_});return new F.LL("auth","Firebase",E).create(p,{appName:v.name})}function Be(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Me(v,"argument-error"),Te(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(v,...p){if("string"!=typeof v){const _=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(_,...E)}return ve.create(v,...p)}function H(v,p,..._){if(!v)throw He(p,..._)}function ye(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ot(p),new Error(p)}function Q(v,p){v||ye(p)}const te=new Map;function ae(v){Q(v instanceof Function,"Expected a class definition");let p=te.get(v);return p?(Q(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,te.set(v,p),p)}function Oe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function dt(){return"http:"===zt()||"https:"===zt()}function zt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class cn{constructor(p,_){this.shortDelay=p,this.longDelay=_,Q(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function On(v,p){Q(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class en{static initialize(p,_,E){this.fetchImpl=p,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vr=new cn(3e4,6e4);function Ot(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function un(v,p,_,E){return ia.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(v,p,_,E,x={}){return ei(v,x,(0,f.Z)(function*(){let P={},W={};E&&("GET"===p?W=E:P={body:JSON.stringify(E)});const he=(0,F.xO)(Object.assign({key:v.config.apiKey},W)).slice(1),Ve=yield v._getAdditionalHeaders();return Ve["Content-Type"]="application/json",v.languageCode&&(Ve["X-Firebase-Locale"]=v.languageCode),en.fetch()($i(v,v.config.apiHost,_,he),Object.assign({method:p,headers:Ve,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function ei(v,p,_){return kr.apply(this,arguments)}function kr(){return(kr=(0,f.Z)(function*(v,p,_){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},tn),p);try{const x=new ni(v),P=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const W=yield P.json();if("needConfirmation"in W)throw fi(v,"account-exists-with-different-credential",W);if(P.ok&&!("errorMessage"in W))return W;{const he=P.ok?W.errorMessage:W.error.message,[Ve,et]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw fi(v,"credential-already-in-use",W);if("EMAIL_EXISTS"===Ve)throw fi(v,"email-already-in-use",W);if("USER_DISABLED"===Ve)throw fi(v,"user-disabled",W);const vt=E[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw Te(v,vt,et);Me(v,vt)}}catch(x){if(x instanceof F.ZR)throw x;Me(v,"network-request-failed")}})).apply(this,arguments)}function ti(v,p,_,E){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(v,p,_,E,x={}){const P=yield un(v,p,_,E,x);return"mfaPendingCredential"in P&&Me(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function $i(v,p,_,E){const x=`${p}${_}?${E}`;return v.config.emulator?On(v.config,x):`${v.config.apiScheme}://${x}`}class ni{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),Vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fi(v,p,_){const E={appName:v.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const x=Ee(v,p,E);return x.customData._tokenResponse=_,x}function Xe(){return(Xe=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function ri(v,p){return ps.apply(this,arguments)}function ps(){return(ps=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Fn(v,p){return pi.apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function ii(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function mn(){return(mn=(0,f.Z)(function*(v,p=!1){const _=(0,F.m9)(v),E=yield _.getIdToken(p),x=at(E);H(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,W=P?.sign_in_provider;return{claims:x,token:E,authTime:ii(ht(x.auth_time)),issuedAtTime:ii(ht(x.iat)),expirationTime:ii(ht(x.exp)),signInProvider:W||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(v){return 1e3*Number(v)}function at(v){var p;const[_,E,x]=v.split(".");if(void 0===_||void 0===E||void 0===x)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,F.tV)(E);return P?JSON.parse(P):(ot("Failed to decode base64 JWT payload"),null)}catch(P){return ot("Caught error parsing JWT payload as JSON",null===(p=P)||void 0===p?void 0:p.toString()),null}}function hr(v,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,f.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(E){throw E instanceof F.ZR&&Ur(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Ur({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class St{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),E)}iteration(){var p=this;return(0,f.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(_=E)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class gs{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rn(v){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(v){var p;const _=v.auth,E=yield v.getIdToken(),x=yield hr(v,Fn(_,{idToken:E}));H(x?.users.length,_,"internal-error");const P=x.users[0];v._notifyReloadListener(P);const W=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?j(P.providerUserInfo):[],he=G(v.providerData,W),vt=!!v.isAnonymous&&!(v.email&&P.passwordHash||he?.length),gt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:he,metadata:new gs(P.createdAt,P.lastLoginAt),isAnonymous:vt};Object.assign(v,gt)})).apply(this,arguments)}function Y(){return(Y=(0,f.Z)(function*(v){const p=(0,F.m9)(v);yield rn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function G(v,p){return[...v.filter(E=>!p.some(x=>x.providerId===E.providerId)),...p]}function j(v){return v.map(p=>{var{providerId:_}=p,E=(0,oe._T)(p,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Z(){return(Z=(0,f.Z)(function*(v,p){const _=yield ei(v,{},(0,f.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:P}=v.config,W=$i(v,x,"/v1/token",`key=${P}`),he=yield v._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",en.fetch()(W,{method:"POST",headers:he,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class De{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){H(p.idToken,"internal-error"),H(typeof p.idToken<"u","internal-error"),H(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function dn(v){const p=at(v);return H(p,"internal-error"),H(typeof p.exp<"u","internal-error"),H(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var E=this;return(0,f.Z)(function*(){return H(!E.accessToken||E.refreshToken,p,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var E=this;return(0,f.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:W}=yield function q(v,p){return Z.apply(this,arguments)}(p,_);E.updateTokensAndExpiration(x,P,Number(W))})()}updateTokensAndExpiration(p,_,E){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,_){const{refreshToken:E,accessToken:x,expirationTime:P}=_,W=new De;return E&&(H("string"==typeof E,"internal-error",{appName:p}),W.refreshToken=E),x&&(H("string"==typeof x,"internal-error",{appName:p}),W.accessToken=x),P&&(H("number"==typeof P,"internal-error",{appName:p}),W.expirationTime=P),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new De,this.toJSON())}_performRefresh(){return ye("not implemented")}}function je(v,p){H("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class lt{constructor(p){var{uid:_,auth:E,stsTokenManager:x}=p,P=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new St(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new gs(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,f.Z)(function*(){const E=yield hr(_,_.stsTokenManager.getToken(_.auth,p));return H(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(p){return function Wn(v){return mn.apply(this,arguments)}(this,p)}reload(){return function nn(v){return Y.apply(this,arguments)}(this)}_assign(p){this!==p&&(H(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new lt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var E=this;return(0,f.Z)(function*(){let x=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),x=!0),_&&(yield rn(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,f.Z)(function*(){const _=yield p.getIdToken();return yield hr(p,function sa(v,p){return Xe.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var E,x,P,W,he,Ve,et,vt;const gt=null!==(E=_.displayName)&&void 0!==E?E:void 0,Jn=null!==(x=_.email)&&void 0!==x?x:void 0,xs=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,bd=null!==(W=_.photoURL)&&void 0!==W?W:void 0,Yu=null!==(he=_.tenantId)&&void 0!==he?he:void 0,Td=null!==(Ve=_._redirectEventId)&&void 0!==Ve?Ve:void 0,Xp=null!==(et=_.createdAt)&&void 0!==et?et:void 0,eg=null!==(vt=_.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Qu,emailVerified:ns,isAnonymous:Ju,providerData:Dd,stsTokenManager:aw}=_;H(Qu&&aw,p,"internal-error");const lw=De.fromJSON(this.name,aw);H("string"==typeof Qu,p,"internal-error"),je(gt,p.name),je(Jn,p.name),H("boolean"==typeof ns,p,"internal-error"),H("boolean"==typeof Ju,p,"internal-error"),je(xs,p.name),je(bd,p.name),je(Yu,p.name),je(Td,p.name),je(Xp,p.name),je(eg,p.name);const __=new lt({uid:Qu,auth:p,email:Jn,emailVerified:ns,displayName:gt,isAnonymous:Ju,photoURL:bd,phoneNumber:xs,tenantId:Yu,stsTokenManager:lw,createdAt:Xp,lastLoginAt:eg});return Dd&&Array.isArray(Dd)&&(__.providerData=Dd.map(uw=>Object.assign({},uw))),Td&&(__._redirectEventId=Td),__}static _fromIdTokenResponse(p,_,E=!1){return(0,f.Z)(function*(){const x=new De;x.updateFromServerResponse(_);const P=new lt({uid:_.localId,auth:p,stsTokenManager:x,isAnonymous:E});return yield rn(P),P})()}}const sn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,E){var x=this;return(0,f.Z)(function*(){x.storage[_]=E})()}_get(_){var E=this;return(0,f.Z)(function*(){const x=E.storage[_];return void 0===x?null:x})()}_remove(_){var E=this;return(0,f.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return v.type="NONE",v})();function rr(v,p,_){return`firebase:${v}:${p}:${_}`}class Ht{constructor(p,_,E){this.persistence=p,this.auth=_,this.userKey=E;const{config:x,name:P}=this.auth;this.fullUserKey=rr(this.userKey,x.apiKey,P),this.fullPersistenceKey=rr("persistence",x.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?lt._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,f.Z)(function*(){if(_.persistence===p)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,E="authUser"){return(0,f.Z)(function*(){if(!_.length)return new Ht(ae(sn),p,E);const x=(yield Promise.all(_.map(function(){var et=(0,f.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return et.apply(this,arguments)}}()))).filter(et=>et);let P=x[0]||ae(sn);const W=rr(E,p.config.apiKey,p.name);let he=null;for(const et of _)try{const vt=yield et._get(W);if(vt){const gt=lt._fromJSON(p,vt);et!==P&&(he=gt),P=et;break}}catch{}const Ve=x.filter(et=>et._shouldAllowMigration);return P._shouldAllowMigration&&Ve.length?(P=Ve[0],he&&(yield P._set(W,he.toJSON())),yield Promise.all(_.map(function(){var et=(0,f.Z)(function*(vt){if(vt!==P)try{yield vt._remove(W)}catch{}});return function(vt){return et.apply(this,arguments)}}())),new Ht(P,p,E)):new Ht(P,p,E)})()}}function Ft(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Br(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(In(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(ze(p))return"Blackberry";if(Et(p))return"Webos";if(zn(p))return"Safari";if((p.includes("chrome/")||Gi(p))&&!p.includes("edge/"))return"Chrome";if(qn(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function In(v=(0,F.z$)()){return/firefox\//i.test(v)}function zn(v=(0,F.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Gi(v=(0,F.z$)()){return/crios\//i.test(v)}function Br(v=(0,F.z$)()){return/iemobile/i.test(v)}function qn(v=(0,F.z$)()){return/android/i.test(v)}function ze(v=(0,F.z$)()){return/blackberry/i.test(v)}function Et(v=(0,F.z$)()){return/webos/i.test(v)}function an(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function yo(v=(0,F.z$)()){return an(v)||qn(v)||Et(v)||ze(v)||/windows phone/i.test(v)||Br(v)}function Ws(v,p=[]){let _;switch(v){case"Browser":_=Ft((0,F.z$)());break;case"Worker":_=`${Ft((0,F.z$)())}-${v}`;break;default:_=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${ue.SDK_VERSION}/${E}`}class vo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const E=P=>new Promise((W,he)=>{try{W(p(P))}catch(Ve){he(Ve)}});E.onAbort=_,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,f.Z)(function*(){var E;if(_.auth.currentUser===p)return;const x=[];try{for(const P of _.queue)yield P(p),P.onAbort&&x.push(P.onAbort)}catch(P){x.reverse();for(const W of x)try{W()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=P)||void 0===E?void 0:E.message})}})()}}class Lt{constructor(p,_,E){this.app=p,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wo(this),this.idTokenSubscription=new wo(this),this.beforeStateQueue=new vo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,_){var E=this;return _&&(this._popupRedirectResolver=ae(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var x,P;if(!E._deleted&&(E.persistenceManager=yield Ht.create(E,p),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,f.Z)(function*(){var E;const x=yield _.assertedPersistence.getCurrentUser();let P=x,W=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,Ve=P?._redirectEventId,et=yield _.tryRedirectSignIn(p);(!he||he===Ve)&&et?.user&&(P=et.user,W=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(W)try{yield _.beforeStateQueue.runMiddleware(P)}catch(he){P=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return H(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var _=this;return(0,f.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,f.Z)(function*(){var E;try{yield rn(p)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ye(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,f.Z)(function*(){const E=p?(0,F.m9)(p):null;return E&&H(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(p,_=!1){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return p&&H(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(ae(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,_,E){return this.registerStateListener(this.authStateSubscription,p,_,E)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,E){return this.registerStateListener(this.idTokenSubscription,p,_,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var E=this;return(0,f.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(_);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const E=p&&ae(p)||_._popupRedirectResolver;H(E,_,"argument-error"),_.redirectPersistenceManager=yield Ht.create(_,[ae(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,f.Z)(function*(){var E,x;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===p?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,f.Z)(function*(){if(p===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,E,x){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),W=this._isInitialized?Promise.resolve():this._initializationPromise;return H(W,this,"internal-error"),W.then(()=>P(this.currentUser)),"function"==typeof _?p.addObserver(_,E,x):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Ws(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var _;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function bn(v){return(0,F.m9)(v)}class wo{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(_=>this.observer=_)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wi(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function zs(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Ir{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return ye("not implemented")}_getIdTokenResponse(p){return ye("not implemented")}_linkToIdToken(p,_){return ye("not implemented")}_getReauthenticationResolver(p){return ye("not implemented")}}function Zn(v,p){return iu.apply(this,arguments)}function iu(){return(iu=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:resetPassword",Ot(v,p))})).apply(this,arguments)}function hn(v,p){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Fc(v,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:update",Ot(v,p))})).apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(v,p){return ti(v,"POST","/v1/accounts:signInWithPassword",Ot(v,p))})).apply(this,arguments)}function Ks(v,p){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:sendOobCode",Ot(v,p))})).apply(this,arguments)}function Vn(v,p){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,f.Z)(function*(v,p){return Ks(v,p)})).apply(this,arguments)}function pr(v,p){return jr.apply(this,arguments)}function jr(){return(jr=(0,f.Z)(function*(v,p){return Ks(v,p)})).apply(this,arguments)}function su(v,p){return Za.apply(this,arguments)}function Za(){return(Za=(0,f.Z)(function*(v,p){return Ks(v,p)})).apply(this,arguments)}function Vc(v,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,f.Z)(function*(v,p){return Ks(v,p)})).apply(this,arguments)}function fh(){return(fh=(0,f.Z)(function*(v,p){return ti(v,"POST","/v1/accounts:signInWithEmailLink",Ot(v,p))})).apply(this,arguments)}function Uc(){return(Uc=(0,f.Z)(function*(v,p){return ti(v,"POST","/v1/accounts:signInWithEmailLink",Ot(v,p))})).apply(this,arguments)}class Bc extends Ir{constructor(p,_,E,x=null){super("password",E),this._email=p,this._password=_,this._tenantId=x}static _fromEmailAndPassword(p,_){return new Bc(p,_,"password")}static _fromEmailAndCode(p,_,E=null){return new Bc(p,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function Ka(v,p){return Io.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function bp(v,p){return fh.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Me(p,"internal-error")}})()}_linkToIdToken(p,_){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return hn(p,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Tp(v,p){return Uc.apply(this,arguments)}(p,{idToken:_,email:E._email,oobCode:E._password});default:Me(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function sr(v,p){return ph.apply(this,arguments)}function ph(){return(ph=(0,f.Z)(function*(v,p){return ti(v,"POST","/v1/accounts:signInWithIdp",Ot(v,p))})).apply(this,arguments)}class ms extends Ir{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new ms(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Me("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x}=_,P=(0,oe._T)(_,["providerId","signInMethod"]);if(!E||!x)return null;const W=new ms(E,x);return W.idToken=P.idToken||void 0,W.accessToken=P.accessToken||void 0,W.secret=P.secret,W.nonce=P.nonce,W.pendingToken=P.pendingToken||null,W}_getIdTokenResponse(p){return sr(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,sr(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,sr(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,F.xO)(_)}return p}}function Hm(v,p){return gh.apply(this,arguments)}function gh(){return(gh=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:sendVerificationCode",Ot(v,p))})).apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(v,p){return ti(v,"POST","/v1/accounts:signInWithPhoneNumber",Ot(v,p))})).apply(this,arguments)}function mh(){return(mh=(0,f.Z)(function*(v,p){const _=yield ti(v,"POST","/v1/accounts:signInWithPhoneNumber",Ot(v,p));if(_.temporaryProof)throw fi(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Gm={USER_NOT_FOUND:"user-not-found"};function _h(){return(_h=(0,f.Z)(function*(v,p){return ti(v,"POST","/v1/accounts:signInWithPhoneNumber",Ot(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Gm)})).apply(this,arguments)}class Ys extends Ir{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Ys({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Ys({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function jc(v,p){return Zs.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function $m(v,p){return mh.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Wm(v,p){return _h.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:E,verificationCode:x}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:E,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:P}=p;return E||_||x||P?new Ys({verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:P}):null}}class ou{constructor(p){var _,E,x,P,W,he;const Ve=(0,F.zd)((0,F.pd)(p)),et=null!==(_=Ve.apiKey)&&void 0!==_?_:null,vt=null!==(E=Ve.oobCode)&&void 0!==E?E:null,gt=function yh(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ve.mode)&&void 0!==x?x:null);H(et&&vt&&gt,"argument-error"),this.apiKey=et,this.operation=gt,this.code=vt,this.continueUrl=null!==(P=Ve.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(W=Ve.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(he=Ve.tenantId)&&void 0!==he?he:null}static parseLink(p){const _=function vh(v){const p=(0,F.zd)((0,F.pd)(v)).link,_=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||_||p||v}(p);try{return new ou(_)}catch{return null}}}let zi=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,E){return Bc._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const x=ou.parseLink(E);return H(x,"argument-error"),Bc._fromEmailAndCode(_,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class _s{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ys extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Qs extends ys{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return H("providerId"in _&&"signInMethod"in _,"argument-error"),ms._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return H(p.idToken||p.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Qs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Qs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:P,nonce:W,providerId:he}=p;if(!E&&!x&&!_&&!P||!he)return null;try{return new Qs(he)._credential({idToken:_,accessToken:E,nonce:W,pendingToken:P})}catch{return null}}}let Ya=(()=>{class v extends ys{constructor(){super("facebook.com")}static credential(_){return ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),au=(()=>{class v extends ys{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:x}=_;if(!E&&!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Hc=(()=>{class v extends ys{constructor(){super("github.com")}static credential(_){return ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class oa extends Ir{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return sr(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,sr(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,sr(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x,pendingToken:P}=_;return E&&x&&P&&E===x?new oa(E,P):null}static _create(p,_){return new oa(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mi extends _s{constructor(p){H(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return mi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return mi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=oa.fromJSON(p);return H(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:E}=p;if(!_||!E)return null;try{return oa._create(E,_)}catch{return null}}}let si=(()=>{class v extends ys{constructor(){super("twitter.com")}static credential(_,E){return ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=_;if(!E||!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function aa(v,p){return wh.apply(this,arguments)}function wh(){return(wh=(0,f.Z)(function*(v,p){return ti(v,"POST","/v1/accounts:signUp",Ot(v,p))})).apply(this,arguments)}class Cr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,E,x=!1){return(0,f.Z)(function*(){const P=yield lt._fromIdTokenResponse(p,E,x),W=Ap(E);return new Cr({user:P,providerId:W,_tokenResponse:E,operationType:_})})()}static _forOperation(p,_,E){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const x=Ap(E);return new Cr({user:p,providerId:x,_tokenResponse:E,operationType:_})})()}}function Ap(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function xn(){return(xn=(0,f.Z)(function*(v){var p;const _=bn(v);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new Cr({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield aa(_,{returnSecureToken:!0}),x=yield Cr._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class lu extends F.ZR{constructor(p,_,E,x){var P;super(_.code,_.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,lu.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,_,E,x){return new lu(p,_,E,x)}}function Mp(v,p,_,E){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?lu._fromErrorAndOperation(v,P,p,E):P})}function _i(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function uu(){return(uu=(0,f.Z)(function*(v,p){const _=(0,F.m9)(v);yield qt(!0,_,p);const{providerUserInfo:E}=yield ri(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),x=_i(E||[]);return _.providerData=_.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function la(v,p){return ws.apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(v,p,_=!1){const E=yield hr(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return Cr._forOperation(v,"link",E)})).apply(this,arguments)}function qt(v,p,_){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,f.Z)(function*(v,p,_){yield rn(p);const x=!1===v?"provider-already-linked":"no-such-provider";H(_i(p.providerData).has(_)===v,p.auth,x)})).apply(this,arguments)}function Co(v,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,f.Z)(function*(v,p,_=!1){var E;const{auth:x}=v,P="reauthenticate";try{const W=yield hr(v,Mp(x,P,p,v),_);H(W.idToken,x,"internal-error");const he=at(W.idToken);H(he,x,"internal-error");const{sub:Ve}=he;return H(v.uid===Ve,x,"user-mismatch"),Cr._forOperation(v,P,W)}catch(W){throw"auth/user-not-found"===(null===(E=W)||void 0===E?void 0:E.code)&&Me(x,"user-mismatch"),W}})).apply(this,arguments)}function ki(v,p){return du.apply(this,arguments)}function du(){return(du=(0,f.Z)(function*(v,p,_=!1){const E="signIn",x=yield Mp(v,E,p),P=yield Cr._fromIdTokenResponse(v,E,x);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Dn(v,p){return At.apply(this,arguments)}function At(){return(At=(0,f.Z)(function*(v,p){return ki(bn(v),p)})).apply(this,arguments)}function hu(v,p){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,f.Z)(function*(v,p){const _=(0,F.m9)(v);return yield qt(!1,_,p.providerId),la(_,p)})).apply(this,arguments)}function fu(v,p){return pu.apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(v,p){return Co((0,F.m9)(v),p)})).apply(this,arguments)}function $c(v,p){return Es.apply(this,arguments)}function Es(){return(Es=(0,f.Z)(function*(v,p){return ti(v,"POST","/v1/accounts:signInWithCustomToken",Ot(v,p))})).apply(this,arguments)}function Ja(){return(Ja=(0,f.Z)(function*(v,p){const _=bn(v),E=yield $c(_,{token:p,returnSecureToken:!0}),x=yield Cr._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ae{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?$t._fromServerResponse(p,_):Me(p,"internal-error")}}class $t extends Ae{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new $t(_)}}function gu(v,p,_){var E;H((null===(E=_.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),H(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(H(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(H(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Mn(){return(Mn=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v),x={requestType:"PASSWORD_RESET",email:p};_&&gu(E,x,_),yield pr(E,x)})).apply(this,arguments)}function ua(){return(ua=(0,f.Z)(function*(v,p,_){yield Zn((0,F.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Xa(){return(Xa=(0,f.Z)(function*(v,p){yield Fc((0,F.m9)(v),{oobCode:p})})).apply(this,arguments)}function el(v,p){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,f.Z)(function*(v,p){const _=(0,F.m9)(v),E=yield Zn(_,{oobCode:p}),x=E.requestType;switch(H(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(E.mfaInfo,_,"internal-error");default:H(E.email,_,"internal-error")}let P=null;return E.mfaInfo&&(P=Ae._fromServerResponse(bn(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function Eh(){return(Eh=(0,f.Z)(function*(v,p){const{data:_}=yield el((0,F.m9)(v),p);return _.email})).apply(this,arguments)}function Rn(){return(Rn=(0,f.Z)(function*(v,p,_){const E=bn(v),x=yield aa(E,{returnSecureToken:!0,email:p,password:_}),P=yield Cr._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function To(){return(To=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v),x={requestType:"EMAIL_SIGNIN",email:p};H(_.handleCodeInApp,E,"argument-error"),_&&gu(E,x,_),yield su(E,x)})).apply(this,arguments)}function tl(){return(tl=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v),x=zi.credentialWithLink(p,_||Oe());return H(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Dn(E,x)})).apply(this,arguments)}function qm(v,p){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:createAuthUri",Ot(v,p))})).apply(this,arguments)}function nl(){return(nl=(0,f.Z)(function*(v,p){const E={identifier:p,continueUri:dt()?Oe():"http://localhost"},{signinMethods:x}=yield qm((0,F.m9)(v),E);return x||[]})).apply(this,arguments)}function rl(){return(rl=(0,f.Z)(function*(v,p){const _=(0,F.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&gu(_.auth,x,p);const{email:P}=yield Vn(_.auth,x);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function vu(){return(vu=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&gu(E.auth,P,_);const{email:W}=yield Vc(E.auth,P);W!==v.email&&(yield v.reload())})).apply(this,arguments)}function wu(v,p){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,f.Z)(function*(v,p){return un(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Xc(){return(Xc=(0,f.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const E=(0,F.m9)(v),P={idToken:yield E.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},W=yield hr(E,wu(E.auth,P));E.displayName=W.displayName||null,E.photoURL=W.photoUrl||null;const he=E.providerData.find(({providerId:Ve})=>"password"===Ve);he&&(he.displayName=E.displayName,he.photoURL=E.photoURL),yield E._updateTokensIfNecessary(W)})).apply(this,arguments)}function So(v,p,_){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,f.Z)(function*(v,p,_){const{auth:E}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),_&&(P.password=_);const W=yield hr(v,hn(E,P));yield v._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class oi{constructor(p,_,E={}){this.isNewUser=p,this.providerId=_,this.profile=E}}class wn extends oi{constructor(p,_,E,x){super(p,_,E),this.username=x}}class Ch extends oi{constructor(p,_){super(p,"facebook.com",_)}}class ed extends wn{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Np extends oi{constructor(p,_){super(p,"google.com",_)}}class td extends wn{constructor(p,_,E){super(p,"twitter.com",_,E)}}function Iu(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function or(v){var p,_;if(!v)return null;const{providerId:E}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const W=null===(_=null===(p=at(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(W)return new oi(P,"anonymous"!==W&&"custom"!==W?W:null)}if(!E)return null;switch(E){case"facebook.com":return new Ch(P,x);case"github.com":return new ed(P,x);case"google.com":return new Np(P,x);case"twitter.com":return new td(P,x,v.screenName||null);case"custom":case"anonymous":return new oi(P,null);default:return new oi(P,E,x)}}(_)}class Ao{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Ao("enroll",p)}static _fromMfaPendingCredential(p){return new Ao("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,E;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ao._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Ao._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Cu{constructor(p,_,E){this.session=p,this.hints=_,this.signInResolver=E}static _fromError(p,_){const E=bn(p),x=_.customData._serverResponse,P=(x.mfaInfo||[]).map(he=>Ae._fromServerResponse(E,he));H(x.mfaPendingCredential,E,"internal-error");const W=Ao._fromMfaPendingCredential(x.mfaPendingCredential);return new Cu(W,P,function(){var he=(0,f.Z)(function*(Ve){const et=yield Ve._process(E,W);delete x.mfaInfo,delete x.mfaPendingCredential;const vt=Object.assign(Object.assign({},x),{idToken:et.idToken,refreshToken:et.refreshToken});switch(_.operationType){case"signIn":const gt=yield Cr._fromIdTokenResponse(E,_.operationType,vt);return yield E._updateCurrentUser(gt.user),gt;case"reauthenticate":return H(_.user,E,"internal-error"),Cr._forOperation(_.user,_.operationType,vt);default:Me(E,"internal-error")}});return function(Ve){return he.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,f.Z)(function*(){return _.signInResolver(p)})()}}function bu(v,p){return un(v,"POST","/v2/accounts/mfaEnrollment:start",Ot(v,p))}class Pp{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Ae._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Pp(p)}getSession(){var p=this;return(0,f.Z)(function*(){return Ao._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var E=this;return(0,f.Z)(function*(){const x=p,P=yield E.getSession(),W=yield hr(E.user,x._process(E.user.auth,P,_));return yield E.user._updateTokensIfNecessary(W),E.user.reload()})()}unenroll(p){var _=this;return(0,f.Z)(function*(){var E;const x="string"==typeof p?p:p.uid,P=yield _.user.getIdToken(),W=yield hr(_.user,function Sh(v,p){return un(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(v,p))}(_.user.auth,{idToken:P,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:he})=>he!==x),yield _.user._updateTokensIfNecessary(W);try{yield _.user.reload()}catch(he){if("auth/user-token-expired"!==(null===(E=he)||void 0===E?void 0:E.code))throw he}})()}}const xo=new WeakMap,Mo="__sak";class Du{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Mo,"1"),this.storage.removeItem(Mo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const sl=(()=>{class v extends Du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function il(){const v=(0,F.z$)();return zn(v)||an(v)}()&&function Cn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=yo(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),P=this.localCache[E];x!==P&&_(E,P,x)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((he,Ve,et)=>{this.notifyListeners(he,et)});const x=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(x);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!E)return}const P=()=>{const he=this.storage.getItem(x);!E&&this.localCache[x]===he||this.notifyListeners(x,he)},W=this.storage.getItem(x);!function ir(){return(0,F.w1)()&&10===document.documentMode}()||W===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var x=()=>super._set,P=this;return(0,f.Z)(function*(){yield x().call(P,_,E),P.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,x=this;return(0,f.Z)(function*(){const P=yield E().call(x,_);return x.localCache[_]=JSON.stringify(P),P})()}_remove(_){var E=()=>super._remove,x=this;return(0,f.Z)(function*(){yield E().call(x,_),delete x.localCache[_]})()}}return v.type="LOCAL",v})(),Ki=(()=>{class v extends Du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return v.type="SESSION",v})();let Mh=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(P=>P.isListeningto(_));if(E)return E;const x=new v(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,f.Z)(function*(){const x=_,{eventId:P,eventType:W,data:he}=x.data,Ve=E.handlersMap[W];if(!Ve?.size)return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:W});const et=Array.from(Ve).map(function(){var gt=(0,f.Z)(function*(Jn){return Jn(x.origin,he)});return function(Jn){return gt.apply(this,arguments)}}()),vt=yield function al(v){return Promise.all(v.map(function(){var p=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return p.apply(this,arguments)}}()))}(et);x.ports[0].postMessage({status:"done",eventId:P,eventType:W,response:vt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ll(v="",p=10){let _="";for(let E=0;E<p;E++)_+=Math.floor(10*Math.random());return v+_}class rd{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,E=50){var x=this;return(0,f.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let W,he;return new Promise((Ve,et)=>{const vt=ll("",20);P.port1.start();const gt=setTimeout(()=>{et(new Error("unsupported_event"))},E);he={messageChannel:P,onMessage(Jn){const xs=Jn;if(xs.data.eventId===vt)switch(xs.data.status){case"ack":clearTimeout(gt),W=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Ve(xs.data.response);break;default:clearTimeout(gt),clearTimeout(W),et(new Error("invalid_response"))}}},x.handlers.add(he),P.port1.addEventListener("message",he.onMessage),x.target.postMessage({eventType:p,eventId:vt,data:_},[P.port2])}).finally(()=>{he&&x.removeMessageHandler(he)})})()}}function Un(){return window}function Su(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function ul(){return(ul=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const eo="firebaseLocalStorageDb",to="firebaseLocalStorage",Mu="fbase_key";class No{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function cl(v,p){return v.transaction([to],p?"readwrite":"readonly").objectStore(to)}function pa(){const v=indexedDB.open(eo,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(to,{keyPath:Mu})}catch(x){_(x)}}),v.addEventListener("success",(0,f.Z)(function*(){const E=v.result;E.objectStoreNames.contains(to)?p(E):(E.close(),yield function Nh(){const v=indexedDB.deleteDatabase(eo);return new No(v).toPromise()}(),p(yield pa()))}))})}function Cs(v,p,_){return id.apply(this,arguments)}function id(){return(id=(0,f.Z)(function*(v,p,_){const E=cl(v,!0).put({[Mu]:p,value:_});return new No(E).toPromise()})).apply(this,arguments)}function dl(){return(dl=(0,f.Z)(function*(v,p){const _=cl(v,!1).get(p),E=yield new No(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Po(v,p){const _=cl(v,!0).delete(p);return new No(_).toPromise()}const ga=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield pa()),_.db})()}_withRetries(_){var E=this;return(0,f.Z)(function*(){let x=0;for(;;)try{const P=yield E._openDb();return yield _(P)}catch(P){if(x++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return Su()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=Mh._getInstance(function xu(){return Su()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(x,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(x,P){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var E,x;if(_.activeServiceWorker=yield function Ro(){return ul.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new rd(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(E=P[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=P[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Au(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield pa();return yield Cs(_,Mo,"1"),yield Po(_,Mo),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var x=this;return(0,f.Z)(function*(){return x._withPendingWrite((0,f.Z)(function*(){return yield x._withRetries(P=>Cs(P,_,E)),x.localCache[_]=E,x.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,f.Z)(function*(){const x=yield E._withRetries(P=>function Ru(v,p){return dl.apply(this,arguments)}(P,_));return E.localCache[_]=x,x})()}_remove(_){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(x=>Po(x,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const E=yield _._withRetries(W=>{const he=cl(W,!1).getAll();return new No(he).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:W,value:he}of E)P.add(W),JSON.stringify(_.localCache[W])!==JSON.stringify(he)&&(_.notifyListeners(W,he),x.push(W));for(const W of Object.keys(_.localCache))_.localCache[W]&&!P.has(W)&&(_.notifyListeners(W,null),x.push(W));return x})()}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function ma(v,p){return un(v,"POST","/v2/accounts/mfaSignIn:start",Ot(v,p))}function no(){return(no=(0,f.Z)(function*(v){return(yield un(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ya(v){return new Promise((p,_)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=x=>{const P=Ee("internal-error");P.customData=x,_(P)},E.type="text/javascript",E.charset="UTF-8",function _a(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function ku(v){return`__${v}${Math.floor(1e6*Math.random())}`}const hl=1e12;class yn{constructor(p){this.auth=p,this.counter=hl,this._widgets=new Map}render(p,_){const E=this.counter;return this._widgets.set(E,new Km(p,this.auth.name,_||{})),this.counter++,E}reset(p){var _;const E=p||hl;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(p){var _;return(null===(_=this._widgets.get(p||hl))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,f.Z)(function*(){var E;return null===(E=_._widgets.get(p||hl))||void 0===E||E.execute(),""})()}}class Km{constructor(p,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;H(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $v(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zm=ku("rcb"),Gv=new cn(3e4,6e4);class kp{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Un().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return H(function rC(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Un().grecaptcha):new Promise((E,x)=>{const P=Un().setTimeout(()=>{x(Ee(p,"network-request-failed"))},Gv.get());Un()[Zm]=()=>{Un().clearTimeout(P),delete Un()[Zm];const he=Un().grecaptcha;if(!he)return void x(Ee(p,"internal-error"));const Ve=he.render;he.render=(et,vt)=>{const gt=Ve(et,vt);return this.counter++,gt},this.hostLanguage=_,E(he)},ya(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Zm,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),x(Ee(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Un().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fl{load(p){return(0,f.Z)(function*(){return new yn(p)})()}clearedOneInstance(){}}const Ym="recaptcha",Qm={theme:"light",type:"image"};class mr{constructor(p,_=Object.assign({},Qm),E){this.parameters=_,this.type=Ym,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(E),this.isInvisible="invisible"===this.parameters.size,H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;H(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fl:new kp,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(_)||new Promise(P=>{const W=he=>{!he||(p.tokenChangeListeners.delete(W),P(he))};p.tokenChangeListeners.add(W),p.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof p)p(_);else if("string"==typeof p){const E=Un()[p];"function"==typeof E&&E(_)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){H(dt()&&!Su(),p.auth,"internal-error"),yield function Ou(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function ai(v){return no.apply(this,arguments)}(p.auth);H(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wa{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Ys._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Fu(){return(Fu=(0,f.Z)(function*(v,p,_){const E=bn(v),x=yield Qi(E,p,(0,F.m9)(_));return new wa(x,P=>Dn(E,P))})).apply(this,arguments)}function Zi(){return(Zi=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v);yield qt(!1,E,"phone");const x=yield Qi(E.auth,p,(0,F.m9)(_));return new wa(x,P=>hu(E,P))})).apply(this,arguments)}function Yi(){return(Yi=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v),x=yield Qi(E.auth,p,(0,F.m9)(_));return new wa(x,P=>fu(E,P))})).apply(this,arguments)}function Qi(v,p,_){return ad.apply(this,arguments)}function ad(){return(ad=(0,f.Z)(function*(v,p,_){var E;const x=yield _.verify();try{let P;if(H("string"==typeof x,v,"argument-error"),H(_.type===Ym,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const W=P.session;if("phoneNumber"in P)return H("enroll"===W.type,v,"internal-error"),(yield bu(v,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{H("signin"===W.type,v,"internal-error");const he=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return H(he,v,"missing-multi-factor-info"),(yield ma(v,{mfaPendingCredential:W.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Hm(v,{phoneNumber:P.phoneNumber,recaptchaToken:x});return W}}finally{_._reset()}})).apply(this,arguments)}function Ph(){return(Ph=(0,f.Z)(function*(v,p){yield la((0,F.m9)(v),p)})).apply(this,arguments)}let ld=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=bn(_)}verifyPhoneNumber(_,E){return Qi(this.auth,_,(0,F.m9)(E))}static credential(_,E){return Ys._fromVerification(_,E)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:x}=_;return E&&x?Ys._fromTokenResponse(E,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ea(v,p){return p?ae(p):(H(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ud extends Ir{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return sr(p,this._buildIdpRequest())}_linkToIdToken(p,_){return sr(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return sr(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function vi(v){return ki(v.auth,new ud(v),v.bypassAuthState)}function Ia(v){const{auth:p,user:_}=v;return H(_,p,"internal-error"),Co(_,new ud(v),v.bypassAuthState)}function wi(v){return pl.apply(this,arguments)}function pl(){return(pl=(0,f.Z)(function*(v){const{auth:p,user:_}=v;return H(_,p,"internal-error"),la(_,new ud(v),v.bypassAuthState)})).apply(this,arguments)}class Oo{constructor(p,_,E,x,P=!1){this.auth=p,this.resolver=E,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,f.Z)(function*(E,x){p.pendingPromise={resolve:E,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(E,x){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:P,tenantId:W,error:he,type:Ve}=p;if(he)return void _.reject(he);const et={auth:_.auth,requestUri:E,sessionId:x,tenantId:W||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ve)(et))}catch(vt){_.reject(vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return vi;case"linkViaPopup":case"linkViaRedirect":return wi;case"reauthViaPopup":case"reauthViaRedirect":return Ia;default:Me(this.auth,"internal-error")}}resolve(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kh=new cn(2e3,1e4);function gl(){return(gl=(0,f.Z)(function*(v,p,_){const E=bn(v);Be(v,p,_s);const x=Ea(E,_);return new Ca(E,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function Oh(){return(Oh=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v);Be(E.auth,p,_s);const x=Ea(E.auth,_);return new Ca(E.auth,"reauthViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}function ml(){return(ml=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v);Be(E.auth,p,_s);const x=Ea(E.auth,_);return new Ca(E.auth,"linkViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}let Ca=(()=>{class v extends Oo{constructor(_,E,x,P,W){super(_,E,P,W),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const E=yield _.execute();return H(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,f.Z)(function*(){Q(1===_.filter.length,"Popup operations only handle one event");const E=ll();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Ee(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,kh.get())};_()}}return v.currentPopupAction=null,v})();const Ji=new Map;class cd extends Oo{constructor(p,_,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,f.Z)(function*(){let E=Ji.get(_.auth._key());if(!E){try{const P=(yield function Vu(v,p){return ro.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;E=()=>Promise.resolve(P)}catch(x){E=()=>Promise.reject(x)}Ji.set(_.auth._key(),E)}return _.bypassAuthState||Ji.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(E,p);if("unknown"!==p.type){if(p.eventId){const x=yield E.auth._redirectUserForId(p.eventId);if(x)return E.user=x,_().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ro(){return(ro=(0,f.Z)(function*(v,p){const _=Lh(p),E=io(v);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(_));return yield E._remove(_),x})).apply(this,arguments)}function dd(v,p){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,f.Z)(function*(v,p){return io(v)._set(Lh(p),"true")})).apply(this,arguments)}function ba(v,p){Ji.set(v._key(),p)}function io(v){return ae(v._redirectPersistence)}function Lh(v){return rr("pendingRedirect",v.config.apiKey,v.name)}function T(){return(T=(0,f.Z)(function*(v,p,_){const E=bn(v);Be(v,p,_s);const x=Ea(E,_);return yield dd(x,E),x._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function B(){return(B=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v);Be(E.auth,p,_s);const x=Ea(E.auth,_);yield dd(x,E.auth);const P=yield pt(E);return x._openRedirect(E.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function xe(){return(xe=(0,f.Z)(function*(v,p,_){const E=(0,F.m9)(v);Be(E.auth,p,_s);const x=Ea(E.auth,_);yield qt(!1,E,p.providerId),yield dd(x,E.auth);const P=yield pt(E);return x._openRedirect(E.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function ft(){return(ft=(0,f.Z)(function*(v,p){return yield bn(v)._initializationPromise,It(v,p,!1)})).apply(this,arguments)}function It(v,p){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,f.Z)(function*(v,p,_=!1){const E=bn(v),x=Ea(E,p),W=yield new cd(E,x,_).execute();return W&&!_&&(delete W.user._redirectEventId,yield E._persistUserIfCurrent(W.user),yield E._setRedirectUser(null,p)),W})).apply(this,arguments)}function pt(v){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,f.Z)(function*(v){const p=ll(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class yl{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(_=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Da(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fo(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var E;if(p.error&&!Fo(p)){const x=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Ee(this.auth,x))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const E=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ta(p))}saveEventToCache(p){this.cachedEventUids.add(Ta(p)),this.lastProcessedEventTime=Date.now()}}function Ta(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Fo({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Xi(v){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,f.Z)(function*(v,p={}){return un(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Lo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ss=/^https?/;function Vh(){return(Vh=(0,f.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Xi(v);for(const _ of p)try{if(Fi(_))return}catch{}Me(v,"unauthorized-domain")})).apply(this,arguments)}function Fi(v){const p=Oe(),{protocol:_,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const W=new URL(v);return""===W.hostname&&""===E?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&W.hostname===E}if(!Ss.test(_))return!1;if(Lo.test(v))return E===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const e_=new cn(3e4,6e4);function Uh(){const v=Un().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Bu=null;function Lp(v){return Bu=Bu||function hd(v){return new Promise((p,_)=>{var E,x,P;function W(){Uh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Uh(),_(Ee(v,"network-request-failed"))},timeout:e_.get()})}if(null!==(x=null===(E=Un().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)p(gapi.iframes.getContext());else{if(null===(P=Un().gapi)||void 0===P||!P.load){const he=ku("iframefcb");return Un()[he]=()=>{gapi.load?W():_(Ee(v,"network-request-failed"))},ya(`https://apis.google.com/js/api.js?onload=${he}`).catch(Ve=>_(Ve))}W()}}).catch(p=>{throw Bu=null,p})}(v),Bu}const zv=new cn(5e3,15e3),qv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sC(v){const p=v.config;H(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?On(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:v.name,v:ue.SDK_VERSION},x=Vp.get(v.config.apiHost);x&&(E.eid=x);const P=v._getFrameworks();return P.length&&(E.fw=P.join(",")),`${_}?${(0,F.xO)(E).slice(1)}`}function vl(){return vl=(0,f.Z)(function*(v){const p=yield Lp(v),_=Un().gapi;return H(_,v,"internal-error"),p.open({where:document.body,url:sC(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qv,dontclear:!0},E=>new Promise(function(){var x=(0,f.Z)(function*(P,W){yield E.restyle({setHideOnLeave:!1});const he=Ee(v,"network-request-failed"),Ve=Un().setTimeout(()=>{W(he)},zv.get());function et(){Un().clearTimeout(Ve),P(E)}E.ping(et).then(et,()=>{W(he)})});return function(P,W){return x.apply(this,arguments)}}()))}),vl.apply(this,arguments)}const Bh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ju{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function es(v,p,_,E,x,P){H(v.config.authDomain,v,"auth-domain-config-required"),H(v.config.apiKey,v,"invalid-api-key");const W={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:E,v:ue.SDK_VERSION,eventId:x};if(p instanceof _s){p.setDefaultLanguage(v.languageCode),W.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(W.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ve,et]of Object.entries(P||{}))W[Ve]=et}if(p instanceof ys){const Ve=p.getScopes().filter(et=>""!==et);Ve.length>0&&(W.scopes=Ve.join(","))}v.tenantId&&(W.tid=v.tenantId);const he=W;for(const Ve of Object.keys(he))void 0===he[Ve]&&delete he[Ve];return`${function r_({config:v}){return v.emulator?On(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,F.xO)(he).slice(1)}`}const md="webStorageSupport";class As extends class $h{constructor(p){this.factorId=p}_process(p,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,E);case"signin":return this._finalizeSignIn(p,_.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new As(p)}_finalizeEnroll(p,_,E){return function Tu(v,p){return un(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(v,p))}(p,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Pu(v,p){return un(v,"POST","/v2/accounts/mfaSignIn:finalize",Ot(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let so=(()=>{class v{constructor(){}static assertion(_){return As._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var jp="@firebase/auth";class s_{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(E=>{var x;p((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fr(){return window}function Hp(){return(Hp=(0,f.Z)(function*(v,p,_){var E;const{BuildInfo:x}=Fr();Q(p.sessionId,"AuthEvent did not contain a session ID");const P=yield a_(p.sessionId),W={};return an()?W.ibi=x.packageName:qn()?W.apn=x.packageName:Me(v,"operation-not-supported-in-this-environment"),x.displayName&&(W.appDisplayName=x.displayName),W.sessionId=P,es(v,_,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,W)})).apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(v){const{BuildInfo:p}=Fr(),_={};an()?_.iosBundleId=p.packageName:qn()?_.androidPackageName=p.packageName:Me(v,"operation-not-supported-in-this-environment"),yield Xi(v,_)})).apply(this,arguments)}function El(){return(El=(0,f.Z)(function*(v,p,_){const{cordova:E}=Fr();let x=()=>{};try{yield new Promise((P,W)=>{let he=null;function Ve(){var gt;P();const Jn=null===(gt=E.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof Jn&&Jn(),"function"==typeof _?.close&&_.close()}function et(){he||(he=window.setTimeout(()=>{W(Ee(v,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&et()}p.addPassiveListener(Ve),document.addEventListener("resume",et,!1),qn()&&document.addEventListener("visibilitychange",vt,!1),x=()=>{p.removePassiveListener(Ve),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",vt,!1),he&&window.clearTimeout(he)}})}finally{x()}})).apply(this,arguments)}function a_(v){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,f.Z)(function*(v){const p=aC(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function aC(v){if(Q(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let E=0;E<v.length;E++)_[E]=v.charCodeAt(E);return _}!function o_(v){(0,ue._registerComponent)(new ce.wA("auth",(p,{options:_})=>{const E=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:P,authDomain:W}=E.options;return((he,Ve)=>{H(P&&!P.includes(":"),"invalid-api-key",{appName:he.name}),H(!W?.includes(":"),"argument-error",{appName:he.name});const et={apiKey:P,authDomain:W,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ws(v)},vt=new Lt(he,Ve,et);return function Le(v,p){const _=p?.persistence||[],E=(Array.isArray(_)?_:[_]).map(ae);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(vt,_),vt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,E)=>{p.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new ce.wA("auth-internal",p=>{const _=bn(p.getProvider("auth").getImmediate());return new s_(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(jp,"0.20.6",function xa(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ue.registerVersion)(jp,"0.20.6","esm2017")}("Browser");class Zv extends yl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,f.Z)(function*(){yield p.initPromise})()}}function zh(v){return l_.apply(this,arguments)}function l_(){return(l_=(0,f.Z)(function*(v){const p=yield u_()._get(Gu(v));return p&&(yield u_()._remove(Gu(v))),p})).apply(this,arguments)}function Yv(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const E=Math.floor(Math.random()*p.length);v.push(p.charAt(E))}return v.join("")}function u_(){return ae(sl)}function Gu(v){return rr("authEvent",v.config.apiKey,v.name)}function vd(v){if(!v?.includes("?"))return{};const[p,..._]=v.split("?");return(0,F.zd)(_.join("?"))}function Gp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Wu(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function d_(v=(0,F.z$)()){return!("file:"!==Wu()&&"ionic:"!==Wu()&&"capacitor:"!==Wu()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function zp(){try{const v=self.localStorage,p=ll();if(v)return v.setItem(p,"1"),v.removeItem(p),!function h_(v=(0,F.z$)()){return function tw(){return(0,F.w1)()&&11===document?.documentMode}()||function Cl(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch{return oo()&&(0,F.hl)()}return!1}function oo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ed(){return(function Xv(){return"http:"===Wu()||"https:"===Wu()}()||(0,F.ru)()||d_())&&!function ew(){return(0,F.b$)()||(0,F.UG)()}()&&zp()&&!oo()}function qp(){return d_()&&typeof document<"u"}function Zh(){return(Zh=(0,f.Z)(function*(){return!!qp()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Wr={LOCAL:"local",NONE:"none",SESSION:"session"},zu=H,bl="persistence";function qu(v){return Id.apply(this,arguments)}function Id(){return(Id=(0,f.Z)(function*(v){yield v._initializationPromise;const p=Zp(),_=rr(bl,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function Zp(){var v;try{return(null===(v=function nw(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Ku=H;class ao{constructor(){this.browserResolver=ae(class Aa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ki,this._completeRedirectFn=It,this._overrideRedirectResult=ba}_openPopup(p,_,E,x){var P=this;return(0,f.Z)(function*(){var W;Q(null===(W=P.eventManagers[p._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const he=es(p,_,E,Oe(),x);return function Bp(v,p,_,E=500,x=600){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),W=Math.max((window.screen.availWidth-E)/2,0).toString();let he="";const Ve=Object.assign(Object.assign({},Bh),{width:E.toString(),height:x.toString(),top:P,left:W}),et=(0,F.z$)().toLowerCase();_&&(he=Gi(et)?"_blank":_),In(et)&&(p=p||"http://localhost",Ve.scrollbars="yes");const vt=Object.entries(Ve).reduce((Jn,[xs,bd])=>`${Jn}${xs}=${bd},`,"");if(function Ni(v=(0,F.z$)()){var p;return an(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(et)&&"_self"!==he)return function jh(v,p){const _=document.createElement("a");_.href=v,_.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(p||"",he),new ju(null);const gt=window.open(p||"",he,vt);H(gt,v,"popup-blocked");try{gt.focus()}catch{}return new ju(gt)}(p,he,ll())})()}_openRedirect(p,_,E,x){var P=this;return(0,f.Z)(function*(){return yield P._originValidation(p),function Oi(v){Un().location.href=v}(es(p,_,E,Oe(),x)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:x,promise:P}=this.eventManagers[_];return x?Promise.resolve(x):(Q(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(p);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(p){var _=this;return(0,f.Z)(function*(){const E=yield function t_(v){return vl.apply(this,arguments)}(p),x=new yl(p);return E.register("authEvent",P=>(H(P?.authEvent,p,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:x},_.iframes[p._key()]=E,x})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(md,{type:md},x=>{var P;const W=null===(P=x?.[0])||void 0===P?void 0:P[md];void 0!==W&&_(!!W),Me(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Uu(v){return Vh.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return yo()||zn()||an()}}),this.cordovaResolver=ae(class wd{constructor(){this._redirectPersistence=Ki,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=It,this._overrideRedirectResult=ba}_initialize(p){var _=this;return(0,f.Z)(function*(){const E=p._key();let x=_.eventManagers.get(E);return x||(x=new Zv(p),_.eventManagers.set(E,x),_.attachCallbackListeners(p,x)),x})()}_openPopup(p){Me(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,E,x){var P=this;return(0,f.Z)(function*(){!function Gh(v){var p,_,E,x,P,W,he,Ve,et,vt;const gt=Fr();H("function"==typeof(null===(p=gt?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof(null===(_=gt?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H("function"==typeof(null===(P=null===(x=null===(E=gt?.cordova)||void 0===E?void 0:E.plugins)||void 0===x?void 0:x.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Ve=null===(he=null===(W=gt?.cordova)||void 0===W?void 0:W.plugins)||void 0===he?void 0:he.browsertab)||void 0===Ve?void 0:Ve.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(vt=null===(et=gt?.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===vt?void 0:vt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const W=yield P._initialize(p);yield W.initialized(),W.resetRedirect(),function Fh(){Ji.clear()}(),yield P._originValidation(p);const he=function Hu(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:Yv(),postBody:null,tenantId:v.tenantId,error:Ee(v,"no-auth-event")}}(p,E,x);yield function $u(v,p){return u_()._set(Gu(v),p)}(p,he);const Ve=yield function _d(v,p,_){return Hp.apply(this,arguments)}(p,he,_),et=yield function yd(v){const{cordova:p}=Fr();return new Promise(_=>{p.plugins.browsertab.isAvailable(E=>{let x=null;E?p.plugins.browsertab.openUrl(v):x=p.InAppBrowser.open(v,function gi(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(x)})})}(Ve);return function Li(v,p,_){return El.apply(this,arguments)}(p,W,et)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function $p(v){return Ma.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:E,handleOpenURL:x,BuildInfo:P}=Fr(),W=setTimeout((0,f.Z)(function*(){yield zh(p),_.onEvent(Gp())}),500),he=function(){var vt=(0,f.Z)(function*(gt){clearTimeout(W);const Jn=yield zh(p);let xs=null;Jn&&gt?.url&&(xs=function lC(v,p){var _,E;const x=function Jv(v){const p=vd(v),_=p.link?decodeURIComponent(p.link):void 0,E=vd(_).link,x=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return vd(x).link||x||E||_||v}(p);if(x.includes("/__/auth/callback")){const P=vd(x),W=P.firebaseError?function Qv(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,he=null===(E=null===(_=W?.code)||void 0===_?void 0:_.split("auth/"))||void 0===E?void 0:E[1],Ve=he?Ee(he):null;return Ve?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(Jn,gt.url)),_.onEvent(xs||Gp())});return function(Jn){return vt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,he);const Ve=x,et=`${P.packageName.toLowerCase()}://`;Fr().handleOpenURL=function(){var vt=(0,f.Z)(function*(gt){if(gt.toLowerCase().startsWith(et)&&he({url:gt}),"function"==typeof Ve)try{Ve(gt)}catch(Jn){console.error(Jn)}});return function(gt){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ki,this._completeRedirectFn=It,this._overrideRedirectResult=ba}_initialize(p){var _=this;return(0,f.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,E,x){var P=this;return(0,f.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(p,_,E,x)})()}_openRedirect(p,_,E,x){var P=this;return(0,f.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(p,_,E,x)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return qp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ku(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,f.Z)(function*(){if(p.underlyingResolver)return;const _=yield function f_(){return Zh.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function Yp(v){return v.unwrap()}function rw(v){return Tl(v)}function Tl(v){const{_tokenResponse:p}=v instanceof F.ZR?v.customData:v;if(!p)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ld.credentialFromResult(v);const _=p.providerId;if(!_||"password"===_)return null;let E;switch(_){case"google.com":E=au;break;case"facebook.com":E=Ya;break;case"github.com":E=Hc;break;case"twitter.com":E=si;break;default:const{oauthIdToken:x,oauthAccessToken:P,oauthTokenSecret:W,pendingToken:he,nonce:Ve}=p;return P||W||x||he?he?_.startsWith("saml.")?oa._create(_,he):ms._fromParams({providerId:_,signInMethod:_,pendingToken:he,idToken:x,accessToken:P}):new Qs(_).credential({idToken:x,accessToken:P,rawNonce:Ve}):null}return v instanceof F.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Qn(v,p){return p.catch(_=>{throw _ instanceof F.ZR&&function Qh(v,p){var _,E;const x=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=p)||void 0===E?void 0:E.code))p.resolver=new iw(v,function Nn(v,p){var _;const E=(0,F.m9)(v),x=p;return H(p.customData.operationType,E,"argument-error"),H(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Cu._fromError(E,x)}(v,p));else if(x){const P=Tl(p),W=p;P&&(W.credential=P,W.tenantId=x.tenantId||void 0,W.email=x.email||void 0,W.phoneNumber=x.phoneNumber||void 0)}}(v,_),_}).then(_=>{const x=_.user;return{operationType:_.operationType,credential:rw(_),additionalUserInfo:Iu(_),user:Vo.getOrCreate(x)}})}function Qp(v,p){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,f.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:E=>Qn(v,_.confirm(E))}})).apply(this,arguments)}class iw{constructor(p,_){this.resolver=_,this.auth=function Yh(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Qn(Yp(this.auth),this.resolver.resolveSignIn(p))}}class Vo{constructor(p){this._delegate=p,this.multiFactor=function fa(v){const p=(0,F.m9)(v);return xo.has(p)||xo.set(p,Pp._fromUser(p)),xo.get(p)}(p)}static getOrCreate(p){return Vo.USER_MAP.has(p)||Vo.USER_MAP.set(p,new Vo(p)),Vo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,f.Z)(function*(){return Qn(_.auth,hu(_._delegate,p))})()}linkWithPhoneNumber(p,_){var E=this;return(0,f.Z)(function*(){return Qp(E.auth,function $r(v,p,_){return Zi.apply(this,arguments)}(E._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,f.Z)(function*(){return Qn(_.auth,function Xm(v,p,_){return ml.apply(this,arguments)}(_._delegate,p,ao))})()}linkWithRedirect(p){var _=this;return(0,f.Z)(function*(){return yield qu(bn(_.auth)),function ee(v,p,_){return function de(v,p,_){return xe.apply(this,arguments)}(v,p,_)}(_._delegate,p,ao)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,f.Z)(function*(){return Qn(_.auth,fu(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return Qp(this.auth,function od(v,p,_){return Yi.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Qn(this.auth,function Jm(v,p,_){return Oh.apply(this,arguments)}(this._delegate,p,ao))}reauthenticateWithRedirect(p){var _=this;return(0,f.Z)(function*(){return yield qu(bn(_.auth)),function S(v,p,_){return function R(v,p,_){return B.apply(this,arguments)}(v,p,_)}(_._delegate,p,ao)})()}sendEmailVerification(p){return function Zc(v,p){return rl.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,f.Z)(function*(){return yield function Hr(v,p){return uu.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function Ih(v,p){return So((0,F.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Do(v,p){return So((0,F.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Op(v,p){return Ph.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Jc(v,p){return Xc.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Yc(v,p,_){return vu.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vo.USER_MAP=new WeakMap;const Zu=H;let Dl=(()=>{class v{constructor(_,E){if(this.app=_,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=_.options;Zu(x,"invalid-api-key",{appName:_.name}),Zu(x,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?ao:void 0;this._delegate=E.initialize({options:{persistence:m_(x,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,E){!function kc(v,p,_){const E=bn(v);H(E._canInitEmulator,E,"emulator-config-failed"),H(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const x=!!_?.disableWarnings,P=Wi(p),{host:W,port:he}=function Kn(v){const p=Wi(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const P=x[1];return{host:P,port:zs(E.substr(P.length+1))}}{const[P,W]=E.split(":");return{host:P,port:zs(W)}}}(p);E.config.emulator={url:`${P}//${W}${null===he?"":`:${he}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:W,port:he,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function qs(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,E)}applyActionCode(_){return function yi(v,p){return Xa.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return el(this._delegate,_)}confirmPasswordReset(_,E){return function _u(v,p,_){return ua.apply(this,arguments)}(this._delegate,_,E)}createUserWithEmailAndPassword(_,E){var x=this;return(0,f.Z)(function*(){return Qn(x._delegate,function bo(v,p,_){return Rn.apply(this,arguments)}(x._delegate,_,E))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function yu(v,p){return nl.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Is(v,p){return"EMAIL_SIGNIN"===ou.parseLink(p)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,f.Z)(function*(){Zu(Ed(),_._delegate,"operation-not-supported-in-this-environment");const E=yield function $e(v,p){return ft.apply(this,arguments)}(_._delegate,ao);return E?Qn(_._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Yn(v,p){bn(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,E,x){const{next:P,error:W,complete:he}=g_(_,E,x);return this._delegate.onAuthStateChanged(P,W,he)}onIdTokenChanged(_,E,x){const{next:P,error:W,complete:he}=g_(_,E,x);return this._delegate.onIdTokenChanged(P,W,he)}sendSignInLinkToEmail(_,E){return function qc(v,p,_){return To.apply(this,arguments)}(this._delegate,_,E)}sendPasswordResetEmail(_,E){return function mu(v,p,_){return Mn.apply(this,arguments)}(this._delegate,_,E||void 0)}setPersistence(_){var E=this;return(0,f.Z)(function*(){let x;switch(function p_(v,p){zu(Object.values(Wr).includes(p),v,"invalid-persistence-type"),(0,F.b$)()?zu(p!==Wr.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?zu(p===Wr.NONE,v,"unsupported-persistence-type"):oo()?zu(p===Wr.NONE||p===Wr.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):zu(p===Wr.NONE||zp(),v,"unsupported-persistence-type")}(E._delegate,_),_){case Wr.SESSION:x=Ki;break;case Wr.LOCAL:x=(yield ae(ga)._isAvailable())?ga:sl;break;case Wr.NONE:x=sn;break;default:return Me("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Qn(this._delegate,function xp(v){return xn.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Qn(this._delegate,Dn(this._delegate,_))}signInWithCustomToken(_){return Qn(this._delegate,function Gc(v,p){return Ja.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,E){return Qn(this._delegate,function qi(v,p,_){return Dn((0,F.m9)(v),zi.credential(p,_))}(this._delegate,_,E))}signInWithEmailLink(_,E){return Qn(this._delegate,function zm(v,p,_){return tl.apply(this,arguments)}(this._delegate,_,E))}signInWithPhoneNumber(_,E){return Qp(this._delegate,function Ts(v,p,_){return Fu.apply(this,arguments)}(this._delegate,_,E))}signInWithPopup(_){var E=this;return(0,f.Z)(function*(){return Zu(Ed(),E._delegate,"operation-not-supported-in-this-environment"),Qn(E._delegate,function Lu(v,p,_){return gl.apply(this,arguments)}(E._delegate,_,ao))})()}signInWithRedirect(_){var E=this;return(0,f.Z)(function*(){return Zu(Ed(),E._delegate,"operation-not-supported-in-this-environment"),yield qu(E._delegate),function Bn(v,p,_){return function Fp(v,p,_){return T.apply(this,arguments)}(v,p,_)}(E._delegate,_,ao)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function zc(v,p){return Eh.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Wr,v})();function g_(v,p,_){let E=v;"function"!=typeof v&&({next:E,error:p,complete:_}=v);const x=E;return{next:W=>x(W&&Vo.getOrCreate(W)),error:p,complete:_}}function m_(v,p){const _=function Kp(v,p){const _=Zp();if(!_)return[];const E=rr(bl,v,p);switch(_.getItem(E)){case Wr.NONE:return[sn];case Wr.LOCAL:return[ga,Ki];case Wr.SESSION:return[Ki];default:return[]}}(v,p);if(typeof self<"u"&&!_.includes(ga)&&_.push(ga),typeof window<"u")for(const E of[sl,Ki])_.includes(E)||_.push(E);return _.includes(sn)||_.push(sn),_}class Jp{constructor(){this.providerId="phone",this._delegate=new ld(Yp(ne.Z.auth()))}static credential(p,_){return ld.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Jp.PHONE_SIGN_IN_METHOD=ld.PHONE_SIGN_IN_METHOD,Jp.PROVIDER_ID=ld.PROVIDER_ID;const sw=H;class Jh{constructor(p,_,E=ne.Z.app()){var x;sw(null===(x=E.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new mr(p,_,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Xh(v){v.INTERNAL.registerComponent(new ce.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Dl(_,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zi,FacebookAuthProvider:Ya,GithubAuthProvider:Hc,GoogleAuthProvider:au,OAuthProvider:Qs,SAMLAuthProvider:mi,PhoneAuthProvider:Jp,PhoneMultiFactorGenerator:so,RecaptchaVerifier:Jh,TwitterAuthProvider:si,Auth:Dl,AuthCredential:Ir,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.19")}(ne.Z)},9751:(ut,Se,V)=>{V.d(Se,{y:()=>ge});var f=V(930),ne=V(727),F=V(8822),ue=V(9635),oe=V(2416),pe=V(576),ce=V(2806);let ge=(()=>{class X{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ie=new X;return Ie.source=this,Ie.operator=Re,Ie}subscribe(Re,Ie,nt){const ve=function z(X){return X&&X instanceof f.Lv||function $(X){return X&&(0,pe.m)(X.next)&&(0,pe.m)(X.error)&&(0,pe.m)(X.complete)}(X)&&(0,ne.Nn)(X)}(Re)?Re:new f.Hp(Re,Ie,nt);return(0,ce.x)(()=>{const{operator:me,source:tt}=this;ve.add(me?me.call(ve,tt):tt?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ie){Re.error(Ie)}}forEach(Re,Ie){return new(Ie=_e(Ie))((nt,ve)=>{const me=new f.Hp({next:tt=>{try{Re(tt)}catch(ot){ve(ot),me.unsubscribe()}},error:ve,complete:nt});this.subscribe(me)})}_subscribe(Re){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Re)}[F.L](){return this}pipe(...Re){return(0,ue.U)(Re)(this)}toPromise(Re){return new(Re=_e(Re))((Ie,nt)=>{let ve;this.subscribe(me=>ve=me,me=>nt(me),()=>Ie(ve))})}}return X.create=Ue=>new X(Ue),X})();function _e(X){var Ue;return null!==(Ue=X??oe.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(ut,Se,V)=>{V.d(Se,{x:()=>ce});var f=V(9751),ne=V(727);const ue=(0,V(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=V(8737),pe=V(2806);let ce=(()=>{class _e extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const X=new ge(this,this);return X.operator=z,X}_throwIfClosed(){if(this.closed)throw new ue}next(z){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(z)}})}error(z){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:X}=this;for(;X.length;)X.shift().error(z)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:X,isStopped:Ue,observers:Re}=this;return X||Ue?ne.Lc:(this.currentObservers=null,Re.push(z),new ne.w0(()=>{this.currentObservers=null,(0,oe.P)(Re,z)}))}_checkFinalizedStatuses(z){const{hasError:X,thrownError:Ue,isStopped:Re}=this;X?z.error(Ue):Re&&z.complete()}asObservable(){const z=new f.y;return z.source=this,z}}return _e.create=($,z)=>new ge($,z),_e})();class ge extends ce{constructor($,z){super(),this.destination=$,this.source=z}next($){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===X||X.call(z,$)}error($){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===X||X.call(z,$)}complete(){var $,z;null===(z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===z||z.call($)}_subscribe($){var z,X;return null!==(X=null===(z=this.source)||void 0===z?void 0:z.subscribe($))&&void 0!==X?X:ne.Lc}}},930:(ut,Se,V)=>{V.d(Se,{Hp:()=>nt,Lv:()=>X});var f=V(576),ne=V(727),F=V(2416),ue=V(7849),oe=V(5032);const pe=_e("C",void 0,void 0);function _e(Me,Ee,Te){return{kind:Me,value:Ee,error:Te}}var $=V(3410),z=V(2806);class X extends ne.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,ne.Nn)(Ee)&&Ee.add(this)):this.destination=ot}static create(Ee,Te,Be){return new nt(Ee,Te,Be)}next(Ee){this.isStopped?tt(function ge(Me){return _e("N",Me,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?tt(function ce(Me){return _e("E",void 0,Me)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?tt(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Re(Me,Ee){return Ue.call(Me,Ee)}class Ie{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ee)}catch(Be){ve(Be)}}error(Ee){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ee)}catch(Be){ve(Be)}else ve(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Te){ve(Te)}}}class nt extends X{constructor(Ee,Te,Be){let He;if(super(),(0,f.m)(Ee)||!Ee)He={next:Ee??void 0,error:Te??void 0,complete:Be??void 0};else{let H;this&&F.v.useDeprecatedNextContext?(H=Object.create(Ee),H.unsubscribe=()=>this.unsubscribe(),He={next:Ee.next&&Re(Ee.next,H),error:Ee.error&&Re(Ee.error,H),complete:Ee.complete&&Re(Ee.complete,H)}):He=Ee}this.destination=new Ie(He)}}function ve(Me){F.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Me):(0,ue.h)(Me)}function tt(Me,Ee){const{onStoppedNotification:Te}=F.v;Te&&$.z.setTimeout(()=>Te(Me,Ee))}const ot={closed:!0,next:oe.Z,error:function me(Me){throw Me},complete:oe.Z}},727:(ut,Se,V)=>{V.d(Se,{Lc:()=>pe,w0:()=>oe,Nn:()=>ce});var f=V(576);const F=(0,V(3888).d)(_e=>function(z){_e(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((X,Ue)=>`${Ue+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ue=V(8737);class oe{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Re of z)Re.remove(this);else z.remove(this);const{initialTeardown:X}=this;if((0,f.m)(X))try{X()}catch(Re){$=Re instanceof F?Re.errors:[Re]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Re of Ue)try{ge(Re)}catch(Ie){$=$??[],Ie instanceof F?$=[...$,...Ie.errors]:$.push(Ie)}}if($)throw new F($)}}add($){var z;if($&&$!==this)if(this.closed)ge($);else{if($ instanceof oe){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push($)}}_hasParent($){const{_parentage:z}=this;return z===$||Array.isArray(z)&&z.includes($)}_addParent($){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push($),z):z?[z,$]:$}_removeParent($){const{_parentage:z}=this;z===$?this._parentage=null:Array.isArray(z)&&(0,ue.P)(z,$)}remove($){const{_finalizers:z}=this;z&&(0,ue.P)(z,$),$ instanceof oe&&$._removeParent(this)}}oe.EMPTY=(()=>{const _e=new oe;return _e.closed=!0,_e})();const pe=oe.EMPTY;function ce(_e){return _e instanceof oe||_e&&"closed"in _e&&(0,f.m)(_e.remove)&&(0,f.m)(_e.add)&&(0,f.m)(_e.unsubscribe)}function ge(_e){(0,f.m)(_e)?_e():_e.unsubscribe()}},2416:(ut,Se,V)=>{V.d(Se,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Se,V)=>{V.d(Se,{E:()=>ne});const ne=new(V(9751).y)(oe=>oe.complete())},8996:(ut,Se,V)=>{V.d(Se,{D:()=>Ee});var f=V(8421),ne=V(5363),F=V(9468),pe=V(9751),ge=V(2202),_e=V(576),$=V(9672);function X(Te,Be){if(!Te)throw new Error("Iterable cannot be null");return new pe.y(He=>{(0,$.f)(He,Be,()=>{const H=Te[Symbol.asyncIterator]();(0,$.f)(He,Be,()=>{H.next().then(ye=>{ye.done?He.complete():He.next(ye.value)})},0,!0)})})}var Ue=V(3670),Re=V(8239),Ie=V(1144),nt=V(6495),ve=V(2206),me=V(4532),tt=V(3260);function Ee(Te,Be){return Be?function Me(Te,Be){if(null!=Te){if((0,Ue.c)(Te))return function ue(Te,Be){return(0,f.Xf)(Te).pipe((0,F.R)(Be),(0,ne.Q)(Be))}(Te,Be);if((0,Ie.z)(Te))return function ce(Te,Be){return new pe.y(He=>{let H=0;return Be.schedule(function(){H===Te.length?He.complete():(He.next(Te[H++]),He.closed||this.schedule())})})}(Te,Be);if((0,Re.t)(Te))return function oe(Te,Be){return(0,f.Xf)(Te).pipe((0,F.R)(Be),(0,ne.Q)(Be))}(Te,Be);if((0,ve.D)(Te))return X(Te,Be);if((0,nt.T)(Te))return function z(Te,Be){return new pe.y(He=>{let H;return(0,$.f)(He,Be,()=>{H=Te[ge.h](),(0,$.f)(He,Be,()=>{let ye,Q;try{({value:ye,done:Q}=H.next())}catch(te){return void He.error(te)}Q?He.complete():He.next(ye)},0,!0)}),()=>(0,_e.m)(H?.return)&&H.return()})}(Te,Be);if((0,tt.L)(Te))return function ot(Te,Be){return X((0,tt.Q)(Te),Be)}(Te,Be)}throw(0,me.z)(Te)}(Te,Be):(0,f.Xf)(Te)}},8421:(ut,Se,V)=>{V.d(Se,{Xf:()=>Ue});var f=V(655),ne=V(1144),F=V(8239),ue=V(9751),oe=V(3670),pe=V(2206),ce=V(4532),ge=V(6495),_e=V(3260),$=V(576),z=V(7849),X=V(8822);function Ue(Me){if(Me instanceof ue.y)return Me;if(null!=Me){if((0,oe.c)(Me))return function Re(Me){return new ue.y(Ee=>{const Te=Me[X.L]();if((0,$.m)(Te.subscribe))return Te.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,ne.z)(Me))return function Ie(Me){return new ue.y(Ee=>{for(let Te=0;Te<Me.length&&!Ee.closed;Te++)Ee.next(Me[Te]);Ee.complete()})}(Me);if((0,F.t)(Me))return function nt(Me){return new ue.y(Ee=>{Me.then(Te=>{Ee.closed||(Ee.next(Te),Ee.complete())},Te=>Ee.error(Te)).then(null,z.h)})}(Me);if((0,pe.D)(Me))return me(Me);if((0,ge.T)(Me))return function ve(Me){return new ue.y(Ee=>{for(const Te of Me)if(Ee.next(Te),Ee.closed)return;Ee.complete()})}(Me);if((0,_e.L)(Me))return function tt(Me){return me((0,_e.Q)(Me))}(Me)}throw(0,ce.z)(Me)}function me(Me){return new ue.y(Ee=>{(function ot(Me,Ee){var Te,Be,He,H;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Te=(0,f.KL)(Me);!(Be=yield Te.next()).done;)if(Ee.next(Be.value),Ee.closed)return}catch(ye){He={error:ye}}finally{try{Be&&!Be.done&&(H=Te.return)&&(yield H.call(Te))}finally{if(He)throw He.error}}Ee.complete()})})(Me,Ee).catch(Te=>Ee.error(Te))})}},6451:(ut,Se,V)=>{V.d(Se,{T:()=>pe});var f=V(8189),ne=V(8421),F=V(515),ue=V(7669),oe=V(8996);function pe(...ce){const ge=(0,ue.yG)(ce),_e=(0,ue._6)(ce,1/0),$=ce;return $.length?1===$.length?(0,ne.Xf)($[0]):(0,f.J)(_e)((0,oe.D)($,ge)):F.E}},5403:(ut,Se,V)=>{V.d(Se,{x:()=>ne});var f=V(930);function ne(ue,oe,pe,ce,ge){return new F(ue,oe,pe,ce,ge)}class F extends f.Lv{constructor(oe,pe,ce,ge,_e,$){super(oe),this.onFinalize=_e,this.shouldUnsubscribe=$,this._next=pe?function(z){try{pe(z)}catch(X){oe.error(X)}}:super._next,this._error=ge?function(z){try{ge(z)}catch(X){oe.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(z){oe.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(ut,Se,V)=>{V.d(Se,{U:()=>F});var f=V(4482),ne=V(5403);function F(ue,oe){return(0,f.e)((pe,ce)=>{let ge=0;pe.subscribe((0,ne.x)(ce,_e=>{ce.next(ue.call(oe,_e,ge++))}))})}},8189:(ut,Se,V)=>{V.d(Se,{J:()=>F});var f=V(5577),ne=V(4671);function F(ue=1/0){return(0,f.z)(ne.y,ue)}},5577:(ut,Se,V)=>{V.d(Se,{z:()=>ge});var f=V(4004),ne=V(8421),F=V(4482),ue=V(9672),oe=V(5403),ce=V(576);function ge(_e,$,z=1/0){return(0,ce.m)($)?ge((X,Ue)=>(0,f.U)((Re,Ie)=>$(X,Re,Ue,Ie))((0,ne.Xf)(_e(X,Ue))),z):("number"==typeof $&&(z=$),(0,F.e)((X,Ue)=>function pe(_e,$,z,X,Ue,Re,Ie,nt){const ve=[];let me=0,tt=0,ot=!1;const Me=()=>{ot&&!ve.length&&!me&&$.complete()},Ee=Be=>me<X?Te(Be):ve.push(Be),Te=Be=>{Re&&$.next(Be),me++;let He=!1;(0,ne.Xf)(z(Be,tt++)).subscribe((0,oe.x)($,H=>{Ue?.(H),Re?Ee(H):$.next(H)},()=>{He=!0},void 0,()=>{if(He)try{for(me--;ve.length&&me<X;){const H=ve.shift();Ie?(0,ue.f)($,Ie,()=>Te(H)):Te(H)}Me()}catch(H){$.error(H)}}))};return _e.subscribe((0,oe.x)($,Ee,()=>{ot=!0,Me()})),()=>{nt?.()}}(X,Ue,_e,z)))}},5363:(ut,Se,V)=>{V.d(Se,{Q:()=>ue});var f=V(9672),ne=V(4482),F=V(5403);function ue(oe,pe=0){return(0,ne.e)((ce,ge)=>{ce.subscribe((0,F.x)(ge,_e=>(0,f.f)(ge,oe,()=>ge.next(_e),pe),()=>(0,f.f)(ge,oe,()=>ge.complete(),pe),_e=>(0,f.f)(ge,oe,()=>ge.error(_e),pe)))})}},3099:(ut,Se,V)=>{V.d(Se,{B:()=>oe});var f=V(8421),ne=V(7579),F=V(930),ue=V(4482);function oe(ce={}){const{connector:ge=(()=>new ne.x),resetOnError:_e=!0,resetOnComplete:$=!0,resetOnRefCountZero:z=!0}=ce;return X=>{let Ue,Re,Ie,nt=0,ve=!1,me=!1;const tt=()=>{Re?.unsubscribe(),Re=void 0},ot=()=>{tt(),Ue=Ie=void 0,ve=me=!1},Me=()=>{const Ee=Ue;ot(),Ee?.unsubscribe()};return(0,ue.e)((Ee,Te)=>{nt++,!me&&!ve&&tt();const Be=Ie=Ie??ge();Te.add(()=>{nt--,0===nt&&!me&&!ve&&(Re=pe(Me,z))}),Be.subscribe(Te),!Ue&&nt>0&&(Ue=new F.Hp({next:He=>Be.next(He),error:He=>{me=!0,tt(),Re=pe(ot,_e,He),Be.error(He)},complete:()=>{ve=!0,tt(),Re=pe(ot,$),Be.complete()}}),(0,f.Xf)(Ee).subscribe(Ue))})(X)}}function pe(ce,ge,..._e){if(!0===ge)return void ce();if(!1===ge)return;const $=new F.Hp({next:()=>{$.unsubscribe(),ce()}});return ge(..._e).subscribe($)}},9468:(ut,Se,V)=>{V.d(Se,{R:()=>ne});var f=V(4482);function ne(F,ue=0){return(0,f.e)((oe,pe)=>{pe.add(F.schedule(()=>oe.subscribe(pe),ue))})}},8505:(ut,Se,V)=>{V.d(Se,{b:()=>oe});var f=V(576),ne=V(4482),F=V(5403),ue=V(4671);function oe(pe,ce,ge){const _e=(0,f.m)(pe)||ce||ge?{next:pe,error:ce,complete:ge}:pe;return _e?(0,ne.e)(($,z)=>{var X;null===(X=_e.subscribe)||void 0===X||X.call(_e);let Ue=!0;$.subscribe((0,F.x)(z,Re=>{var Ie;null===(Ie=_e.next)||void 0===Ie||Ie.call(_e,Re),z.next(Re)},()=>{var Re;Ue=!1,null===(Re=_e.complete)||void 0===Re||Re.call(_e),z.complete()},Re=>{var Ie;Ue=!1,null===(Ie=_e.error)||void 0===Ie||Ie.call(_e,Re),z.error(Re)},()=>{var Re,Ie;Ue&&(null===(Re=_e.unsubscribe)||void 0===Re||Re.call(_e)),null===(Ie=_e.finalize)||void 0===Ie||Ie.call(_e)}))}):ue.y}},4408:(ut,Se,V)=>{V.d(Se,{o:()=>oe});var f=V(727);class ne extends f.w0{constructor(ce,ge){super()}schedule(ce,ge=0){return this}}const F={setInterval(pe,ce,...ge){const{delegate:_e}=F;return _e?.setInterval?_e.setInterval(pe,ce,...ge):setInterval(pe,ce,...ge)},clearInterval(pe){const{delegate:ce}=F;return(ce?.clearInterval||clearInterval)(pe)},delegate:void 0};var ue=V(8737);class oe extends ne{constructor(ce,ge){super(ce,ge),this.scheduler=ce,this.work=ge,this.pending=!1}schedule(ce,ge=0){if(this.closed)return this;this.state=ce;const _e=this.id,$=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId($,_e,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId($,this.id,ge),this}requestAsyncId(ce,ge,_e=0){return F.setInterval(ce.flush.bind(ce,this),_e)}recycleAsyncId(ce,ge,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ge;F.clearInterval(ge)}execute(ce,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ce,ge);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ge){let $,_e=!1;try{this.work(ce)}catch(z){_e=!0,$=z||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ce,scheduler:ge}=this,{actions:_e}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(_e,this),null!=ce&&(this.id=this.recycleAsyncId(ge,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Se,V)=>{V.d(Se,{v:()=>F});var f=V(6063);class ne{constructor(oe,pe=ne.now){this.schedulerActionCtor=oe,this.now=pe}schedule(oe,pe=0,ce){return new this.schedulerActionCtor(this,oe).schedule(ce,pe)}}ne.now=f.l.now;class F extends ne{constructor(oe,pe=ne.now){super(oe,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:pe}=this;if(this._active)return void pe.push(oe);let ce;this._active=!0;do{if(ce=oe.execute(oe.state,oe.delay))break}while(oe=pe.shift());if(this._active=!1,ce){for(;oe=pe.shift();)oe.unsubscribe();throw ce}}}},4986:(ut,Se,V)=>{V.d(Se,{z:()=>F});var f=V(4408);const F=new(V(7565).v)(f.o)},6063:(ut,Se,V)=>{V.d(Se,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(ut,Se,V)=>{V.d(Se,{z:()=>f});const f={setTimeout(ne,F,...ue){const{delegate:oe}=f;return oe?.setTimeout?oe.setTimeout(ne,F,...ue):setTimeout(ne,F,...ue)},clearTimeout(ne){const{delegate:F}=f;return(F?.clearTimeout||clearTimeout)(ne)},delegate:void 0}},2202:(ut,Se,V)=>{V.d(Se,{h:()=>ne});const ne=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Se,V)=>{V.d(Se,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Se,V)=>{V.d(Se,{_6:()=>pe,jO:()=>ue,yG:()=>oe});var f=V(576);function F(ce){return ce[ce.length-1]}function ue(ce){return(0,f.m)(F(ce))?ce.pop():void 0}function oe(ce){return function ne(ce){return ce&&(0,f.m)(ce.schedule)}(F(ce))?ce.pop():void 0}function pe(ce,ge){return"number"==typeof F(ce)?ce.pop():ge}},8737:(ut,Se,V)=>{function f(ne,F){if(ne){const ue=ne.indexOf(F);0<=ue&&ne.splice(ue,1)}}V.d(Se,{P:()=>f})},3888:(ut,Se,V)=>{function f(ne){const ue=ne(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}V.d(Se,{d:()=>f})},2806:(ut,Se,V)=>{V.d(Se,{O:()=>ue,x:()=>F});var f=V(2416);let ne=null;function F(oe){if(f.v.useDeprecatedSynchronousErrorHandling){const pe=!ne;if(pe&&(ne={errorThrown:!1,error:null}),oe(),pe){const{errorThrown:ce,error:ge}=ne;if(ne=null,ce)throw ge}}else oe()}function ue(oe){f.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=oe)}},9672:(ut,Se,V)=>{function f(ne,F,ue,oe=0,pe=!1){const ce=F.schedule(function(){ue(),pe?ne.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(ne.add(ce),!pe)return ce}V.d(Se,{f:()=>f})},4671:(ut,Se,V)=>{function f(ne){return ne}V.d(Se,{y:()=>f})},1144:(ut,Se,V)=>{V.d(Se,{z:()=>f});const f=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(ut,Se,V)=>{V.d(Se,{D:()=>ne});var f=V(576);function ne(F){return Symbol.asyncIterator&&(0,f.m)(F?.[Symbol.asyncIterator])}},576:(ut,Se,V)=>{function f(ne){return"function"==typeof ne}V.d(Se,{m:()=>f})},3670:(ut,Se,V)=>{V.d(Se,{c:()=>F});var f=V(8822),ne=V(576);function F(ue){return(0,ne.m)(ue[f.L])}},6495:(ut,Se,V)=>{V.d(Se,{T:()=>F});var f=V(2202),ne=V(576);function F(ue){return(0,ne.m)(ue?.[f.h])}},8239:(ut,Se,V)=>{V.d(Se,{t:()=>ne});var f=V(576);function ne(F){return(0,f.m)(F?.then)}},3260:(ut,Se,V)=>{V.d(Se,{L:()=>ue,Q:()=>F});var f=V(655),ne=V(576);function F(oe){return(0,f.FC)(this,arguments,function*(){const ce=oe.getReader();try{for(;;){const{value:ge,done:_e}=yield(0,f.qq)(ce.read());if(_e)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ge)}}finally{ce.releaseLock()}})}function ue(oe){return(0,ne.m)(oe?.getReader)}},4482:(ut,Se,V)=>{V.d(Se,{A:()=>ne,e:()=>F});var f=V(576);function ne(ue){return(0,f.m)(ue?.lift)}function F(ue){return oe=>{if(ne(oe))return oe.lift(function(pe){try{return ue(pe,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,Se,V)=>{function f(){}V.d(Se,{Z:()=>f})},9635:(ut,Se,V)=>{V.d(Se,{U:()=>F,z:()=>ne});var f=V(4671);function ne(...ue){return F(ue)}function F(ue){return 0===ue.length?f.y:1===ue.length?ue[0]:function(pe){return ue.reduce((ce,ge)=>ge(ce),pe)}}},7849:(ut,Se,V)=>{V.d(Se,{h:()=>F});var f=V(2416),ne=V(3410);function F(ue){ne.z.setTimeout(()=>{const{onUnhandledError:oe}=f.v;if(!oe)throw ue;oe(ue)})}},4532:(ut,Se,V)=>{function f(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Se,{z:()=>f})},655:(ut,Se,V)=>{function ue(Q,te){var ae={};for(var ie in Q)Object.prototype.hasOwnProperty.call(Q,ie)&&te.indexOf(ie)<0&&(ae[ie]=Q[ie]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(ie=Object.getOwnPropertySymbols(Q);Le<ie.length;Le++)te.indexOf(ie[Le])<0&&Object.prototype.propertyIsEnumerable.call(Q,ie[Le])&&(ae[ie[Le]]=Q[ie[Le]])}return ae}function ge(Q,te,ae,ie){return new(ae||(ae=Promise))(function(Oe,dt){function zt(cn){try{Ye(ie.next(cn))}catch(On){dt(On)}}function jt(cn){try{Ye(ie.throw(cn))}catch(On){dt(On)}}function Ye(cn){cn.done?Oe(cn.value):function Le(Oe){return Oe instanceof ae?Oe:new ae(function(dt){dt(Oe)})}(cn.value).then(zt,jt)}Ye((ie=ie.apply(Q,te||[])).next())})}function ve(Q){return this instanceof ve?(this.v=Q,this):new ve(Q)}function me(Q,te,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,ie=ae.apply(Q,te||[]),Oe=[];return Le={},dt("next"),dt("throw"),dt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function dt(en){ie[en]&&(Le[en]=function(tn){return new Promise(function(Vr,Ot){Oe.push([en,tn,Vr,Ot])>1||zt(en,tn)})})}function zt(en,tn){try{!function jt(en){en.value instanceof ve?Promise.resolve(en.value.v).then(Ye,cn):On(Oe[0][2],en)}(ie[en](tn))}catch(Vr){On(Oe[0][3],Vr)}}function Ye(en){zt("next",en)}function cn(en){zt("throw",en)}function On(en,tn){en(tn),Oe.shift(),Oe.length&&zt(Oe[0][0],Oe[0][1])}}function ot(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,te=Q[Symbol.asyncIterator];return te?te.call(Q):(Q=function X(Q){var te="function"==typeof Symbol&&Symbol.iterator,ae=te&&Q[te],ie=0;if(ae)return ae.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ie>=Q.length&&(Q=void 0),{value:Q&&Q[ie++],done:!Q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ae={},ie("next"),ie("throw"),ie("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function ie(Oe){ae[Oe]=Q[Oe]&&function(dt){return new Promise(function(zt,jt){!function Le(Oe,dt,zt,jt){Promise.resolve(jt).then(function(Ye){Oe({value:Ye,done:zt})},dt)}(zt,jt,(dt=Q[Oe](dt)).done,dt.value)})}}}V.d(Se,{FC:()=>me,KL:()=>ot,_T:()=>ue,mG:()=>ge,qq:()=>ve})},4650:(ut,Se,V)=>{V.d(Se,{$8M:()=>Pu,$Z:()=>$C,AFp:()=>AT,ALo:()=>st,AaK:()=>ge,BQk:()=>ry,CHM:()=>gu,CRH:()=>le,CZH:()=>Nr,CqO:()=>Ci,D6c:()=>yM,EJc:()=>NT,EiD:()=>wd,EpF:()=>ux,F4k:()=>we,FYo:()=>vt,FiY:()=>$e,G48:()=>am,GfV:()=>bd,Gpc:()=>z,JOm:()=>is,JVY:()=>i_,KtG:()=>mu,L6k:()=>s_,LAX:()=>o_,LFG:()=>Bn,LSH:()=>Wp,Lbi:()=>rM,Lck:()=>u0,MMx:()=>Fy,NdJ:()=>Ns,OlP:()=>yn,Oqu:()=>Mg,PXZ:()=>Jy,Q6J:()=>pE,QGY:()=>bg,QP$:()=>Gi,QbO:()=>mc,Qsj:()=>gt,R0b:()=>Fs,RDi:()=>sC,Rgc:()=>Zg,SBq:()=>he,Sil:()=>R0,Suo:()=>$y,TTD:()=>ys,TgZ:()=>gE,Tol:()=>DE,Udp:()=>bE,VKq:()=>cT,X6Q:()=>zT,XFs:()=>Xe,Xpm:()=>q,Xts:()=>Ed,Y36:()=>cf,YKP:()=>l0,YNc:()=>Ib,Yjl:()=>Ht,Yz7:()=>tn,Z0I:()=>ia,ZZ4:()=>z0,_Bn:()=>ky,_UZ:()=>on,_Vd:()=>x,_c5:()=>Xf,_uU:()=>xg,aQg:()=>lv,c2e:()=>Kf,cJS:()=>Ot,cg1:()=>GE,d8E:()=>wy,dDg:()=>jT,dqk:()=>dn,eBb:()=>xa,eFA:()=>O0,ekj:()=>sc,eoX:()=>vc,f3M:()=>T,g9A:()=>MT,h0i:()=>Bl,hGG:()=>ep,hij:()=>bf,iGM:()=>w0,ifc:()=>at,ip1:()=>M0,jDz:()=>Ly,kL8:()=>WE,lG2:()=>rr,lcZ:()=>Qe,lqb:()=>Qn,lri:()=>eh,mCW:()=>Ma,n5z:()=>bs,oAB:()=>lt,oJD:()=>Kh,oxw:()=>iy,pB0:()=>Kv,q3G:()=>Yn,q4F:()=>Yu,qLn:()=>ef,qOj:()=>uE,qZA:()=>Ef,qzn:()=>so,rWj:()=>yc,sBO:()=>lm,sIi:()=>Ol,s_b:()=>jl,soG:()=>nm,tb:()=>RT,tp0:()=>It,uIk:()=>mb,vHH:()=>Ie,vpe:()=>Ua,wAp:()=>yt,xp6:()=>FC,ynx:()=>Cg,z2F:()=>Kt,z3N:()=>As,zSh:()=>Yp,zs3:()=>Nd});var f=V(7579),ne=V(727),F=V(9751),ue=V(6451),oe=V(3099);function pe(s){for(let a in s)if(s[a]===pe)return a;throw Error("Could not find renamed property on target object.")}function ce(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function ge(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ge).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function _e(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const $=pe({__forward_ref__:pe});function z(s){return s.__forward_ref__=z,s.toString=function(){return ge(this())},s}function X(s){return Ue(s)?s():s}function Ue(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===z}class Ie extends Error{constructor(a,l){super(function nt(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function Ee(s,a){throw new Ie(-201,!1)}function jt(s,a){null==s&&function Ye(s,a,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${a} <=Actual]`))}(a,s,null,"!=")}function tn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ot(s){return{providers:s.providers||[],imports:s.imports||[]}}function un(s){return ei(s,$i)||ei(s,fi)}function ia(s){return null!==un(s)}function ei(s,a){return s.hasOwnProperty(a)?s[a]:null}function Gs(s){return s&&(s.hasOwnProperty(ni)||s.hasOwnProperty(sa))?s[ni]:null}const $i=pe({\u0275prov:pe}),ni=pe({\u0275inj:pe}),fi=pe({ngInjectableDef:pe}),sa=pe({ngInjectorDef:pe});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let ri;function Fn(s){const a=ri;return ri=s,a}function pi(s,a,l){const c=un(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&Xe.Optional?null:void 0!==a?a:void Ee(ge(s))}function Ln(s){return{toString:s}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),at=(()=>{return(s=at||(at={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",at;var s})();const dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ur={},St=[],gs=pe({\u0275cmp:pe}),rn=pe({\u0275dir:pe}),Ri=pe({\u0275pipe:pe}),nn=pe({\u0275mod:pe}),Y=pe({\u0275fac:pe}),G=pe({__NG_ELEMENT_ID__:pe});let j=0;function q(s){return Ln(()=>{const l=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||at.Emulated,id:"c"+j++,styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.dependencies,w=s.features;return h.inputs=sn(s.inputs,c),h.outputs=sn(s.outputs),w&&w.forEach(I=>I(h)),h.directiveDefs=m?()=>("function"==typeof m?m():m).map(De).filter(je):null,h.pipeDefs=m?()=>("function"==typeof m?m():m).map(zn).filter(je):null,h})}function De(s){return Ft(s)||In(s)}function je(s){return null!==s}function lt(s){return Ln(()=>({type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function sn(s,a){if(null==s)return Ur;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=c,a&&(a[h]=m)}return l}const rr=q;function Ht(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ft(s){return s[gs]||null}function In(s){return s[rn]||null}function zn(s){return s[Ri]||null}function Gi(s){const a=Ft(s)||In(s)||zn(s);return null!==a&&a.standalone}function Br(s,a){const l=s[nn]||null;if(!l&&!0===a)throw new Error(`Type ${ge(s)} does not have '\u0275mod' property.`);return l}function pr(s){return Array.isArray(s)&&"object"==typeof s[1]}function jr(s){return Array.isArray(s)&&!0===s[1]}function su(s){return 0!=(8&s.flags)}function Za(s){return 2==(2&s.flags)}function Vc(s){return 1==(1&s.flags)}function Or(s){return null!==s.template}function bp(s){return 0!=(256&s[2])}function zi(s,a){return s.hasOwnProperty(Y)?s[Y]:null}class _s{constructor(a,l,c){this.previousValue=a,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function ys(){return Qs}function Qs(s){return s.type.prototype.ngOnChanges&&(s.setInput=au),Ya}function Ya(){const s=Sp(this),a=s?.current;if(a){const l=s.previous;if(l===Ur)s.previous=a;else for(let c in a)l[c]=a[c];s.current=null,this.ngOnChanges(a)}}function au(s,a,l,c){const h=Sp(s)||function oa(s,a){return s[Hc]=a}(s,{previous:Ur,current:null}),m=h.current||(h.current={}),w=h.previous,I=this.declaredInputs[l],b=w[I];m[I]=new _s(b&&b.currentValue,a,w===Ur),s[c]=a}ys.ngInherit=!0;const Hc="__ngSimpleChanges__";function Sp(s){return s[Hc]||null}function xn(s){for(;Array.isArray(s);)s=s[0];return s}function _i(s,a){return xn(a[s])}function Hr(s,a){return xn(a[s.index])}function la(s,a){return s.data[a]}function qt(s,a){const l=a[s];return pr(l)?l:l[0]}function Qa(s){return 4==(4&s[2])}function Co(s){return 64==(64&s[2])}function ki(s,a){return null==a?null:s[a]}function du(s){s[18]=0}function Dn(s,a){s[5]+=a;let l=s,c=s[3];for(;null!==c&&(1===a&&1===l[5]||-1===a&&0===l[5]);)c[5]+=a,l=c,c=c[3]}const At={lFrame:Jc(null),bindingsEnabled:!0};function Es(){return At.bindingsEnabled}function Ae(){return At.lFrame.lView}function $t(){return At.lFrame.tView}function gu(s){return At.lFrame.contextLView=s,s[8]}function mu(s){return At.lFrame.contextLView=null,s}function Mn(){let s=_u();for(;null!==s&&64===s.type;)s=s.parent;return s}function _u(){return At.lFrame.currentTNode}function yi(s,a){const l=At.lFrame;l.currentTNode=s,l.isParent=a}function Xa(){return At.lFrame.isParent}function el(){At.lFrame.isParent=!1}function Rn(){const s=At.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function To(){return At.lFrame.bindingIndex++}function Is(s){const a=At.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}function qm(s,a){const l=At.lFrame;l.bindingIndex=l.bindingRootIndex=s,yu(a)}function yu(s){At.lFrame.currentDirectiveIndex=s}function nl(s){const a=At.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function Zc(){return At.lFrame.currentQueryIndex}function rl(s){At.lFrame.currentQueryIndex=s}function Yc(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function vu(s,a,l){if(l&Xe.SkipSelf){let h=a,m=s;for(;!(h=h.parent,null!==h||l&Xe.Host||(h=Yc(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;a=h,s=m}const c=At.lFrame=Qc();return c.currentTNode=a,c.lView=s,!0}function wu(s){const a=Qc(),l=s[1];At.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Qc(){const s=At.lFrame,a=null===s?null:s.child;return null===a?Jc(s):a}function Jc(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Xc(){const s=At.lFrame;return At.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ih=Xc;function Do(){const s=Xc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function or(){return At.lFrame.selectedIndex}function oi(s){At.lFrame.selectedIndex=s}function wn(){const s=At.lFrame;return la(s.tView,s.selectedIndex)}function nd(s,a){for(let l=a.directiveStart,c=a.directiveEnd;l<c;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:N}=m;w&&(s.contentHooks||(s.contentHooks=[])).push(-l,w),I&&((s.contentHooks||(s.contentHooks=[])).push(l,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-l,b),A&&((s.viewHooks||(s.viewHooks=[])).push(l,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function ca(s,a,l){ha(s,a,3,l)}function da(s,a,l,c){(3&s[2])===l&&ha(s,a,l,c)}function Th(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function ha(s,a,l,c){const m=c??-1,w=a.length-1;let I=0;for(let b=void 0!==c?65535&s[18]:0;b<w;b++)if("number"==typeof a[b+1]){if(I=a[b],null!=c&&I>=c)break}else a[b]<0&&(s[18]+=65536),(I<m||-1==m)&&(Dh(s,l,a,b),s[18]=(4294901760&s[18])+b+2),b++}function Dh(s,a,l,c){const h=l[c]<0,m=l[c+1],I=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{m.call(I)}finally{}}}else try{m.call(I)}finally{}}class Xs{constructor(a,l,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function fa(s,a,l){let c=0;for(;c<l.length;){const h=l[c];if("number"==typeof h){if(0!==h)break;c++;const m=l[c++],w=l[c++],I=l[c++];s.setAttribute(a,w,I,m)}else{const m=h,w=l[++c];Du(m)?s.setProperty(a,m,w):s.setAttribute(a,m,w),c++}}return c}function Mo(s){return 3===s||4===s||6===s}function Du(s){return 64===s.charCodeAt(0)}function il(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let c=0;c<a.length;c++){const h=a[c];"number"==typeof h?l=h:0===l||Ah(s,l,h,null,-1===l||2===l?a[++c]:null)}}return s}function Ah(s,a,l,c,h){let m=0,w=s.length;if(-1===a)w=-1;else for(;m<s.length;){const I=s[m++];if("number"==typeof I){if(I===a){w=-1;break}if(I>a){w=m-1;break}}}for(;m<s.length;){const I=s[m];if("number"==typeof I)break;if(I===l){if(null===c)return void(null!==h&&(s[m+1]=h));if(c===s[m+1])return void(s[m+2]=h)}m++,null!==c&&m++,null!==h&&m++}-1!==w&&(s.splice(w,0,a),m=w+1),s.splice(m++,0,l),null!==c&&s.splice(m++,0,c),null!==h&&s.splice(m++,0,h)}function xh(s){return-1!==s}function gr(s){return 32767&s}function ol(s,a){let l=function sl(s){return s>>16}(s),c=a;for(;l>0;)c=c[15],l--;return c}let Ki=!0;function al(s){const a=Ki;return Ki=s,a}let Un=0;const Oi={};function Ro(s,a){const l=Au(s,a);if(-1!==l)return l;const c=a[1];c.firstCreatePass&&(s.injectorIndex=a.length,ul(c.data,s),ul(a,null),ul(c.blueprint,null));const h=xu(s,a),m=s.injectorIndex;if(xh(h)){const w=gr(h),I=ol(h,a),b=I[1].data;for(let A=0;A<8;A++)a[m+A]=I[w+A]|b[w+A]}return a[m+8]=h,m}function ul(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Au(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function xu(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=a;for(;null!==h;){if(c=ma(h),null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function eo(s,a,l){!function Su(s,a,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(G)&&(c=l[G]),null==c&&(c=l[G]=Un++);const h=255&c;a.data[s+(h>>5)]|=1<<h}(s,a,l)}function to(s,a,l){if(l&Xe.Optional)return s;Ee()}function Mu(s,a,l,c){if(l&Xe.Optional&&void 0===c&&(c=null),0==(l&(Xe.Self|Xe.Host))){const h=s[9],m=Fn(void 0);try{return h?h.get(a,c,l&Xe.Optional):pi(a,c,l&Xe.Optional)}finally{Fn(m)}}return to(c,0,l)}function No(s,a,l,c=Xe.Default,h){if(null!==s){if(1024&a[2]){const w=function ga(s,a,l,c,h){let m=s,w=a;for(;null!==m&&null!==w&&1024&w[2]&&!(256&w[2]);){const I=cl(m,w,l,c|Xe.Self,Oi);if(I!==Oi)return I;let b=m.parent;if(!b){const A=w[21];if(A){const N=A.get(l,Oi,c);if(N!==Oi)return N}b=ma(w),w=w[15]}m=b}return h}(s,a,l,c,Oi);if(w!==Oi)return w}const m=cl(s,a,l,c,Oi);if(m!==Oi)return m}return Mu(a,l,c,h)}function cl(s,a,l,c,h){const m=function id(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(G)?s[G]:void 0;return"number"==typeof a?a>=0?255&a:sd:a}(l);if("function"==typeof m){if(!vu(a,s,c))return c&Xe.Host?to(h,0,c):Mu(a,l,c,h);try{const w=m(c);if(null!=w||c&Xe.Optional)return w;Ee()}finally{Ih()}}else if("number"==typeof m){let w=null,I=Au(s,a),b=-1,A=c&Xe.Host?a[16][6]:null;for((-1===I||c&Xe.SkipSelf)&&(b=-1===I?xu(s,a):a[I+8],-1!==b&&dl(c,!1)?(w=a[1],I=gr(b),a=ol(b,a)):I=-1);-1!==I;){const N=a[1];if(Ru(m,I,N.data)){const L=Nh(I,a,l,w,c,A);if(L!==Oi)return L}b=a[I+8],-1!==b&&dl(c,a[1].data[I+8]===A)&&Ru(m,I,a)?(w=N,I=gr(b),a=ol(b,a)):I=-1}}return h}function Nh(s,a,l,c,h,m){const w=a[1],I=w.data[s+8],N=pa(I,w,l,null==c?Za(I)&&Ki:c!=w&&0!=(3&I.type),h&Xe.Host&&m===I);return null!==N?Cs(a,w,N,I):Oi}function pa(s,a,l,c,h){const m=s.providerIndexes,w=a.data,I=1048575&m,b=s.directiveStart,N=m>>20,K=h?I+N:s.directiveEnd;for(let re=c?I:I+N;re<K;re++){const be=w[re];if(re<b&&l===be||re>=b&&be.type===l)return re}if(h){const re=w[b];if(re&&Or(re)&&re.type===l)return b}return null}function Cs(s,a,l,c){let h=s[l];const m=a.data;if(function Ao(s){return s instanceof Xs}(h)){const w=h;w.resolving&&function tt(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${l}`)}(function me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}(m[l]));const I=al(w.canSeeViewProviders);w.resolving=!0;const b=w.injectImpl?Fn(w.injectImpl):null;vu(s,c,Xe.Default);try{h=s[l]=w.factory(void 0,m,s,c),a.firstCreatePass&&l>=c.directiveStart&&function bh(s,a,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:m}=a.type.prototype;if(c){const w=Qs(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,w),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,w)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],a)}finally{null!==b&&Fn(b),al(I),w.resolving=!1,Ih()}}return h}function Ru(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function dl(s,a){return!(s&Xe.Self||s&Xe.Host&&a)}class Po{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,c){return No(this._tNode,this._lView,a,c,l)}}function sd(){return new Po(Mn(),Ae())}function bs(s){return Ln(()=>{const a=s.prototype.constructor,l=a[Y]||Nu(a),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const m=h[Y]||Nu(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Nu(s){return Ue(s)?()=>{const a=Nu(X(s));return a&&a()}:zi(s)}function ma(s){const a=s[1],l=a.type;return 2===l?a.declTNode:1===l?s[6]:null}function Pu(s){return function Rh(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const m=l[h];if(Mo(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(m===a)return l[h+1];h+=2}}}return null}(Mn(),s)}const no="__parameters__";function va(s,a,l){return Ln(()=>{const c=function ku(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(a);function h(...m){if(this instanceof h)return c.apply(this,m),this;const w=new h(...m);return I.annotation=w,I;function I(b,A,N){const L=b.hasOwnProperty(no)?b[no]:Object.defineProperty(b,no,{value:[]})[no];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(w),b}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class yn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=tn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $r(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(a===s&&(a=s.slice(0,l)),$r(c,a)):a!==s&&a.push(c)}return a}function Zi(s,a){s.forEach(l=>Array.isArray(l)?Zi(l,a):a(l))}function od(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function Yi(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function vi(s,a,l){let c=wi(s,a);return c>=0?s[1|c]=l:(c=~c,function Ph(s,a,l,c){let h=s.length;if(h==a)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=l,s[a+1]=c}}(s,c,a,l)),c}function Ia(s,a){const l=wi(s,a);if(l>=0)return s[1|l]}function wi(s,a){return function Oo(s,a,l){let c=0,h=s.length>>l;for(;h!==c;){const m=c+(h-c>>1),w=s[m<<l];if(a===w)return m<<l;w>a?h=m:c=m+1}return~(h<<l)}(s,a,1)}const Ji={},cd="__NG_DI_FLAG__",Vu="ngTempTokenPath",dd=/\n/gm,Fh="__source";let ba;function io(s){const a=ba;return ba=s,a}function Lh(s,a=Xe.Default){if(void 0===ba)throw new Ie(-203,!1);return null===ba?pi(s,void 0,a):ba.get(s,a&Xe.Optional?null:void 0,a)}function Bn(s,a=Xe.Default){return(function ps(){return ri}()||Lh)(X(s),a)}function T(s,a=Xe.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Bn(s,a)}function S(s){const a=[];for(let l=0;l<s.length;l++){const c=X(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Ie(900,!1);let h,m=Xe.Default;for(let w=0;w<c.length;w++){const I=c[w],b=B(I);"number"==typeof b?-1===b?h=I.token:m|=b:h=I}a.push(Bn(h,m))}else a.push(Bn(c))}return a}function R(s,a){return s[cd]=a,s.prototype[cd]=a,s}function B(s){return s[cd]}const $e=R(va("Optional"),8),It=R(va("SkipSelf"),4);let Vp,vl,ju;function sC(s){Vp=s}function fd(s){return function Bh(){if(void 0===vl&&(vl=null,dn.trustedTypes))try{vl=dn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return vl}()?.createHTML(s)||s}function jh(s){return function Bp(){if(void 0===ju&&(ju=null,dn.trustedTypes))try{ju=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ju}()?.createHTML(s)||s}class es{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class r_ extends es{getTypeName(){return"HTML"}}class md extends es{getTypeName(){return"Style"}}class Aa extends es{getTypeName(){return"Script"}}class Hh extends es{getTypeName(){return"URL"}}class $h extends es{getTypeName(){return"ResourceURL"}}function As(s){return s instanceof es?s.changingThisBreaksApplicationSecurity:s}function so(s,a){const l=function jp(s){return s instanceof es&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function i_(s){return new r_(s)}function s_(s){return new md(s)}function xa(s){return new Aa(s)}function o_(s){return new Hh(s)}function Kv(s){return new $h(s)}class wl{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(fd(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class _d{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=fd(a),l;const c=this.inertDocument.createElement("body");return c.innerHTML=fd(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(a){const l=a.attributes;for(let h=l.length-1;0<h;h--){const w=l.item(h).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&a.removeAttribute(w)}let c=a.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const $p=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Ma(s){return(s=String(s)).match($p)?s:"unsafe:"+s}function Li(s){const a={};for(const l of s.split(","))a[l]=!0;return a}function El(...s){const a={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(a[c]=!0);return a}const Gh=Li("area,br,col,hr,img,wbr"),a_=Li("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wh=Li("rp,rt"),Hu=El(Gh,El(a_,Li("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),El(Wh,Li("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),El(Wh,a_)),$u=Li("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zh=Li("srcset"),Yv=El($u,zh,Li("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Li("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),u_=Li("script,style,template");class Gu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!Hu.hasOwnProperty(l))return this.sanitizedSomething=!0,!u_.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=a.attributes;for(let h=0;h<c.length;h++){const m=c.item(h),w=m.name,I=w.toLowerCase();if(!Yv.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let b=m.value;$u[I]&&(b=Ma(b)),zh[I]&&(s=b,b=(s=String(s)).split(",").map(a=>Ma(a.trim())).join(", ")),this.buf.push(" ",w,'="',vd(b),'"')}var s;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();Hu.hasOwnProperty(l)&&!Gh.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(vd(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const Qv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jv=/([^\#-~ |!])/g;function vd(s){return s.replace(/&/g,"&amp;").replace(Qv,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Jv,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Il;function wd(s,a){let l=null;try{Il=Il||function Fr(s){const a=new _d(s);return function Hp(){try{return!!(new window.DOMParser).parseFromString(fd(""),"text/html")}catch{return!1}}()?new wl(a):a}(s);let c=a?String(a):"";l=Il.getInertBodyElement(c);let h=5,m=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=m,m=l.innerHTML,l=Il.getInertBodyElement(c)}while(c!==m);return fd((new Gu).sanitizeChildren(qh(l)||l))}finally{if(l){const c=qh(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function qh(s){return"content"in s&&function Gp(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Yn=(()=>((Yn=Yn||{})[Yn.NONE=0]="NONE",Yn[Yn.HTML=1]="HTML",Yn[Yn.STYLE=2]="STYLE",Yn[Yn.SCRIPT=3]="SCRIPT",Yn[Yn.URL=4]="URL",Yn[Yn.RESOURCE_URL=5]="RESOURCE_URL",Yn))();function Kh(s){const a=oo();return a?jh(a.sanitize(Yn.HTML,s)||""):so(s,"HTML")?jh(As(s)):wd(function t_(){return void 0!==Vp?Vp:typeof document<"u"?document:void 0}(),ve(s))}function Wp(s){const a=oo();return a?a.sanitize(Yn.URL,s)||"":so(s,"URL")?As(s):Ma(ve(s))}function oo(){const s=Ae();return s&&s[12]}const Ed=new yn("ENVIRONMENT_INITIALIZER"),qp=new yn("INJECTOR",-1),f_=new yn("INJECTOR_DEF_TYPES");class Zh{get(a,l=Ji){if(l===Ji){const c=new Error(`NullInjectorError: No provider for ${ge(a)}!`);throw c.name="NullInjectorError",c}return l}}function nw(...s){return{\u0275providers:Wr(0,s)}}function Wr(s,...a){const l=[],c=new Set;let h;return Zi(a,m=>{const w=m;bl(w,l,[],c)&&(h||(h=[]),h.push(w))}),void 0!==h&&zu(h,l),l}function zu(s,a){for(let l=0;l<s.length;l++){const{providers:h}=s[l];Zi(h,m=>{a.push(m)})}}function bl(s,a,l,c){if(!(s=X(s)))return!1;let h=null,m=Gs(s);const w=!m&&Ft(s);if(m||w){if(w&&!w.standalone)return!1;h=s}else{const b=s.ngModule;if(m=Gs(b),!m)return!1;h=b}const I=c.has(h);if(w){if(I)return!1;if(c.add(h),w.dependencies){const b="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const A of b)bl(A,a,l,c)}}else{if(!m)return!1;{if(null!=m.imports&&!I){let A;c.add(h);try{Zi(m.imports,N=>{bl(N,a,l,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&zu(A,a)}if(!I){const A=zi(h)||(()=>new h);a.push({provide:h,useFactory:A,deps:St},{provide:f_,useValue:h,multi:!0},{provide:Ed,useValue:()=>Bn(h),multi:!0})}const b=m.providers;null==b||I||Zi(b,N=>{a.push(N)})}}return h!==s&&void 0!==s.providers}const qu=pe({provide:String,useValue:pe});function Id(s){return null!==s&&"object"==typeof s&&qu in s}function Ku(s){return"function"==typeof s}const Yp=new yn("Set Injector scope."),Yh={},rw={};let Qh;function Tl(){return void 0===Qh&&(Qh=new Zh),Qh}class Qn{}class Qp extends Qn{constructor(a,l,c,h){super(),this.parent=l,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jh(a,w=>this.processProvider(w)),this.records.set(qp,Dl(void 0,this)),h.has("environment")&&this.records.set(Qn,Dl(void 0,this));const m=this.records.get(Yp);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(f_.multi,St,Xe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=io(this),c=Fn(void 0);try{return a()}finally{io(l),Fn(c)}}get(a,l=Ji,c=Xe.Default){this.assertNotDestroyed();const h=io(this),m=Fn(void 0);try{if(!(c&Xe.SkipSelf)){let I=this.records.get(a);if(void 0===I){const b=function Jp(s){return"function"==typeof s||"object"==typeof s&&s instanceof yn}(a)&&un(a);I=b&&this.injectableDefInScope(b)?Dl(Cd(a),Yh):null,this.records.set(a,I)}if(null!=I)return this.hydrate(a,I)}return(c&Xe.Self?Tl():this.parent).get(a,l=c&Xe.Optional&&l===Ji?null:l)}catch(w){if("NullInjectorError"===w.name){if((w[Vu]=w[Vu]||[]).unshift(ge(a)),h)throw w;return function ee(s,a,l,c){const h=s[Vu];throw a[Fh]&&h.unshift(a[Fh]),s.message=function de(s,a,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=ge(a);if(Array.isArray(a))h=a.map(ge).join(" -> ");else if("object"==typeof a){let m=[];for(let w in a)if(a.hasOwnProperty(w)){let I=a[w];m.push(w+":"+("string"==typeof I?JSON.stringify(I):ge(I)))}h=`{${m.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(dd,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[Vu]=null,s}(w,a,"R3InjectorError",this.source)}throw w}finally{Fn(m),io(h)}}resolveInjectorInitializers(){const a=io(this),l=Fn(void 0);try{const c=this.get(Ed.multi,St,Xe.Self);for(const h of c)h()}finally{io(a),Fn(l)}}toString(){const a=[],l=this.records;for(const c of l.keys())a.push(ge(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(a){let l=Ku(a=X(a))?a:X(a&&a.provide);const c=function Vo(s){return Id(s)?Dl(void 0,s.useValue):Dl(Zu(s),Yh)}(a);if(Ku(a)||!0!==a.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Dl(void 0,Yh,!0),h.factory=()=>S(h.multi),this.records.set(l,h)),l=a,h.multi.push(a)}this.records.set(l,c)}hydrate(a,l){return l.value===Yh&&(l.value=rw,l.value=l.factory()),"object"==typeof l.value&&l.value&&function m_(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=X(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Cd(s){const a=un(s),l=null!==a?a.factory:zi(s);if(null!==l)return l;if(s instanceof yn)throw new Ie(204,!1);if(s instanceof Function)return function iw(s){const a=s.length;if(a>0)throw function Qi(s,a){const l=[];for(let c=0;c<s;c++)l.push(a);return l}(a,"?"),new Ie(204,!1);const l=function kr(s){const a=s&&(s[$i]||s[fi]);if(a){const l=function ti(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ie(204,!1)}function Zu(s,a,l){let c;if(Ku(s)){const h=X(s);return zi(h)||Cd(h)}if(Id(s))c=()=>X(s.useValue);else if(function Zp(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...S(s.deps||[]));else if(function Kp(s){return!(!s||!s.useExisting)}(s))c=()=>Bn(X(s.useExisting));else{const h=X(s&&(s.useClass||s.provide));if(!function g_(s){return!!s.deps}(s))return zi(h)||Cd(h);c=()=>new h(...S(s.deps))}return c}function Dl(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function sw(s){return!!s.\u0275providers}function Jh(s,a){for(const l of s)Array.isArray(l)?Jh(l,a):sw(l)?Jh(l.\u0275providers,a):a(l)}class Xh{}class E{resolveComponentFactory(a){throw function v(s){const a=Error(`No component factory found for ${ge(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let x=(()=>{class s{}return s.NULL=new E,s})();function P(){return W(Mn(),Ae())}function W(s,a){return new he(Hr(s,a))}let he=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=P,s})();function Ve(s){return s instanceof he?s.nativeElement:s}class vt{}let gt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Jn(){const s=Ae(),l=qt(Mn().index,s);return(pr(l)?l:s)[11]}(),s})(),xs=(()=>{class s{}return s.\u0275prov=tn({token:s,providedIn:"root",factory:()=>null}),s})();class bd{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Yu=new bd("14.2.1"),Td={};function fw(s){return s.ngOriginalError}class ef{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&fw(a);for(;l&&fw(l);)l=fw(l);return l||null}}const gw=new Map;let XS=0;const Sl="__ngContext__";function Je(s,a){pr(a)?(s[Sl]=a[20],function mw(s){gw.set(s[20],s)}(a)):s[Sl]=a}function Tr(s){const a=s[Sl];return"number"==typeof a?function _w(s){return gw.get(s)||null}(a):a||null}function Ms(s){const a=Tr(s);return a?pr(a)?a:a.lView:null}function Ra(s){return s instanceof Function?s():s}var is=(()=>((is=is||{})[is.Important=1]="Important",is[is.DashCase=2]="DashCase",is))();function ng(s,a){return undefined(s,a)}function Sd(s){const a=s[3];return jr(a)?a[3]:a}function w_(s){return E_(s[13])}function Sr(s){return E_(s[4])}function E_(s){for(;null!==s&&!jr(s);)s=s[4];return s}function An(s,a,l,c,h){if(null!=c){let m,w=!1;jr(c)?m=c:pr(c)&&(w=!0,c=c[0]);const I=xn(c);0===s&&null!==l?null==h?rf(a,l,I):Pt(a,l,I,h||null,!0):1===s&&null!==l?Pt(a,l,I,h||null,!0):2===s?function Tw(s,a,l){const c=b_(s,a);c&&function sf(s,a,l,c){s.removeChild(a,l,c)}(s,c,a,l)}(a,I,w):3===s&&a.destroyNode(I),null!=m&&function AC(s,a,l,c,h){const m=l[7];m!==xn(l)&&An(a,s,c,m,h);for(let I=10;I<l.length;I++){const b=l[I];ag(b[1],b,s,a,c,m)}}(a,s,m,l,h)}}function li(s,a,l){return s.createElement(a,l)}function xl(s,a){const l=s[9],c=l.indexOf(a),h=a[3];512&a[2]&&(a[2]&=-513,Dn(h,-1)),l.splice(c,1)}function ww(s,a){if(s.length<=10)return;const l=10+a,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&xl(h,c),a>0&&(s[l-1][4]=c[4]);const m=Yi(s,10+a);!function I_(s,a){ag(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const w=m[19];null!==w&&w.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Xu(s,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&ag(s,a,l,3,null,null),function Al(s){let a=s[13];if(!a)return og(s[1],s);for(;a;){let l=null;if(pr(a))l=a[13];else{const c=a[10];c&&(l=c)}if(!l){for(;a&&!a[4]&&a!==s;)pr(a)&&og(a[1],a),a=a[3];null===a&&(a=s),pr(a)&&og(a[1],a),l=a&&a[4]}a=l}}(a)}}function og(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function dA(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=a[l[c]];if(!(h instanceof Xs)){const m=l[c+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const I=h[m[w]],b=m[w+1];try{b.call(I)}finally{}}else try{m.call(h)}finally{}}}}(s,a),function EC(s,a){const l=s.cleanup,c=a[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const w=l[m+1],I="function"==typeof w?w(a):xn(a[w]),b=c[h=l[m+2]],A=l[m+3];"boolean"==typeof A?I.removeEventListener(l[m],b,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),m+=2}else{const w=c[h=l[m+1]];l[m].call(w)}if(null!==c){for(let m=h+1;m<c.length;m++)(0,c[m])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&jr(a[3])){l!==a[3]&&xl(l,a);const c=a[19];null!==c&&c.detachView(s)}!function eA(s){gw.delete(s[20])}(a)}}function IC(s,a,l){return function C_(s,a,l){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===at.None||h===at.Emulated)return null}return Hr(c,l)}(s,a.parent,l)}function Pt(s,a,l,c,h){s.insertBefore(a,l,c,h)}function rf(s,a,l){s.appendChild(a,l)}function CC(s,a,l,c,h){null!==c?Pt(s,a,l,c,h):rf(s,a,l)}function b_(s,a){return s.parentNode(a)}let Cw=function Iw(s,a,l){return 40&s.type?Hr(s,l):null};function Bo(s,a,l,c){const h=IC(s,c,a),m=a[11],I=function Ew(s,a,l){return Cw(s,a,l)}(c.parent||a[6],c,a);if(null!=h)if(Array.isArray(l))for(let b=0;b<l.length;b++)CC(m,h,l[b],I,!1);else CC(m,h,l,I,!1)}function af(s,a){if(null!==a){const l=a.type;if(3&l)return Hr(a,s);if(4&l)return bw(-1,s[a.index]);if(8&l){const c=a.child;if(null!==c)return af(s,c);{const h=s[a.index];return jr(h)?bw(-1,h):xn(h)}}if(32&l)return ng(a,s)()||xn(s[a.index]);{const c=TC(s,a);return null!==c?Array.isArray(c)?c[0]:af(Sd(s[16]),c):af(s,a.next)}}return null}function TC(s,a){return null!==a?s[16][6].projection[a.projection]:null}function bw(s,a){const l=10+s+1;if(l<a.length){const c=a[l],h=c[1].firstChild;if(null!==h)return af(c,h)}return a[7]}function T_(s,a,l,c,h,m,w){for(;null!=l;){const I=c[l.index],b=l.type;if(w&&0===a&&(I&&Je(xn(I),c),l.flags|=4),64!=(64&l.flags))if(8&b)T_(s,a,l.child,c,h,m,!1),An(a,s,h,I,m);else if(32&b){const A=ng(l,c);let N;for(;N=A();)An(a,s,h,N,m);An(a,s,h,I,m)}else 16&b?SC(s,a,c,l,h,m):An(a,s,h,I,m);l=w?l.projectionNext:l.next}}function ag(s,a,l,c,h,m){T_(l,c,s.firstChild,a,h,m,!1)}function SC(s,a,l,c,h,m){const w=l[16],b=w[6].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)An(a,s,h,b[A],m);else T_(s,a,b,w[3],h,m,!0)}function lg(s,a,l){s.setAttribute(a,"style",l)}function Ml(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function Gt(s,a,l){let c=s.length;for(;;){const h=s.indexOf(a,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=a.length;if(h+m===c||s.charCodeAt(h+m)<=32)return h}l=h+1}}const MC="ng-template";function Rd(s,a,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==Gt(h.toLowerCase(),a,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===a)return!0;return!1}}return!1}function RC(s){return 4===s.type&&s.value!==MC}function NC(s,a,l){return a===(4!==s.type||l?s.value:MC)}function Dw(s,a,l){let c=4;const h=s.attrs||[],m=function A_(s){for(let a=0;a<s.length;a++)if(Mo(s[a]))return a;return s.length}(h);let w=!1;for(let I=0;I<a.length;I++){const b=a[I];if("number"!=typeof b){if(!w)if(4&c){if(c=2|1&c,""!==b&&!NC(s,b,l)||""===b&&1===a.length){if(jo(c))return!1;w=!0}}else{const A=8&c?b:a[++I];if(8&c&&null!==s.attrs){if(!Rd(s.attrs,A,l)){if(jo(c))return!1;w=!0}continue}const L=S_(8&c?"class":b,h,RC(s),l);if(-1===L){if(jo(c))return!1;w=!0;continue}if(""!==A){let K;K=L>m?"":h[L+1].toLowerCase();const re=8&c?K:null;if(re&&-1!==Gt(re,A,0)||2&c&&A!==K){if(jo(c))return!1;w=!0}}}}else{if(!w&&!jo(c)&&!jo(b))return!1;if(w&&jo(b))continue;w=!1,c=b|1&c}}return jo(c)||w}function jo(s){return 0==(1&s)}function S_(s,a,l,c){if(null===a)return-1;let h=0;if(c||!l){let m=!1;for(;h<a.length;){const w=a[h];if(w===s)return h;if(3===w||6===w)m=!0;else{if(1===w||2===w){let I=a[++h];for(;"string"==typeof I;)I=a[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=m?1:2}return-1}return function hA(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===a)return l;l++}return-1}(a,s)}function lf(s,a,l=!1){for(let c=0;c<a.length;c++)if(Dw(s,a[c],l))return!0;return!1}function ug(s,a){return s?":not("+a.trim()+")":a}function kC(s){let a=s[0],l=1,c=2,h="",m=!1;for(;l<s.length;){let w=s[l];if("string"==typeof w)if(2&c){const I=s[++l];h+="["+w+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?h+="."+w:4&c&&(h+=" "+w);else""!==h&&!jo(w)&&(a+=ug(m,h),h=""),c=w,m=m||!jo(c);l++}return""!==h&&(a+=ug(m,h)),a}const Vt={};function FC(s){cg($t(),Ae(),or()+s,!1)}function cg(s,a,l,c){if(!c)if(3==(3&a[2])){const m=s.preOrderCheckHooks;null!==m&&ca(a,m,l)}else{const m=s.preOrderHooks;null!==m&&da(a,m,0,l)}oi(l)}function R_(s,a=null,l=null,c){const h=yA(s,a,l,c);return h.resolveInjectorInitializers(),h}function yA(s,a=null,l=null,c,h=new Set){const m=[l||St,nw(s)];return c=c||("object"==typeof s?void 0:ge(s)),new Qp(m,a||Tl(),c||null,h)}let Nd=(()=>{class s{static create(l,c){if(Array.isArray(l))return R_({name:""},c,l,"");{const h=l.name??"";return R_({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=Ji,s.NULL=new Zh,s.\u0275prov=tn({token:s,providedIn:"any",factory:()=>Bn(qp)}),s.__NG_ELEMENT_ID__=-1,s})();function cf(s,a=Xe.Default){const l=Ae();return null===l?Bn(s,a):No(Mn(),l,X(s),a)}function $C(){throw new Error("invalid")}function O_(s,a){return s<<17|a<<2}function Ho(s){return s>>17&32767}function F_(s){return 2|s}function $o(s){return(131068&s)>>2}function fg(s,a){return-131069&s|a<<2}function nc(s){return 1|s}function $w(s,a){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],m=l[c+1];if(-1!==m){const w=s.data[m];rl(h),w.contentQueries(2,a[m],m)}}}function j_(s,a,l,c,h,m,w,I,b,A,N){const L=a.blueprint.slice();return L[0]=h,L[2]=76|c,(null!==N||s&&1024&s[2])&&(L[2]|=1024),du(L),L[3]=L[15]=s,L[8]=l,L[10]=w||s&&s[10],L[11]=I||s&&s[11],L[12]=b||s&&s[12]||null,L[9]=A||s&&s[9]||null,L[6]=m,L[20]=function fC(){return XS++}(),L[21]=N,L[16]=2==a.type?s[16]:L,L}function Wo(s,a,l,c,h){let m=s.data[a];if(null===m)m=function Ld(s,a,l,c,h){const m=_u(),w=Xa(),b=s.data[a]=function gf(s,a,l,c,h,m){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,l,a,c,h);return null===s.firstChild&&(s.firstChild=b),null!==m&&(w?null==m.child&&null!==b.parent&&(m.child=b):null===m.next&&(m.next=b)),b}(s,a,l,c,h),function zm(){return At.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=c,m.attrs=h;const w=function ua(){const s=At.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return yi(m,!0),m}function pf(s,a,l,c){if(0===l)return-1;const h=a.length;for(let m=0;m<l;m++)a.push(c),s.blueprint.push(c),s.data.push(null);return h}function H_(s,a,l){wu(a);try{const c=s.viewQuery;null!==c&&Z_(1,c,l);const h=s.template;null!==h&&eb(s,a,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&$w(s,a),s.staticViewQueries&&Z_(2,s.viewQuery,l);const m=s.components;null!==m&&function kA(s,a){for(let l=0;l<a.length;l++)GA(s,a[l])}(a,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{a[2]&=-5,Do()}}function Pl(s,a,l,c){const h=a[2];if(128!=(128&h)){wu(a);try{du(a),function qc(s){return At.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&eb(s,a,l,2,c);const w=3==(3&h);if(w){const A=s.preOrderCheckHooks;null!==A&&ca(a,A,null)}else{const A=s.preOrderHooks;null!==A&&da(a,A,0,null),Th(a,0)}if(function HA(s){for(let a=w_(s);null!==a;a=Sr(a)){if(!a[2])continue;const l=a[9];for(let c=0;c<l.length;c++){const h=l[c],m=h[3];0==(512&h[2])&&Dn(m,1),h[2]|=512}}}(a),function jA(s){for(let a=w_(s);null!==a;a=Sr(a))for(let l=10;l<a.length;l++){const c=a[l],h=c[1];Co(c)&&Pl(h,c,h.template,c[8])}}(a),null!==s.contentQueries&&$w(s,a),w){const A=s.contentCheckHooks;null!==A&&ca(a,A)}else{const A=s.contentHooks;null!==A&&da(a,A,1),Th(a,1)}!function PA(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)oi(~h);else{const m=h,w=l[++c],I=l[++c];qm(w,m),I(2,a[m])}}}finally{oi(-1)}}(s,a);const I=s.components;null!==I&&function B_(s,a){for(let l=0;l<a.length;l++)$A(s,a[l])}(a,I);const b=s.viewQuery;if(null!==b&&Z_(2,b,c),w){const A=s.viewCheckHooks;null!==A&&ca(a,A)}else{const A=s.viewHooks;null!==A&&da(a,A,2),Th(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Dn(a[3],-1))}finally{Do()}}}function mg(s,a,l,c){const h=a[10],w=Qa(a);try{!w&&h.begin&&h.begin(),w&&H_(s,a,c),Pl(s,a,l,c)}finally{!w&&h.end&&h.end()}}function eb(s,a,l,c,h){const m=or(),w=2&c;try{oi(-1),w&&a.length>22&&cg(s,a,22,!1),l(c,h)}finally{oi(m)}}function tb(s,a,l){if(su(a)){const h=a.directiveEnd;for(let m=a.directiveStart;m<h;m++){const w=s.data[m];w.contentQueries&&w.contentQueries(1,l[m],m)}}}function Gw(s,a,l){!Es()||(function Yw(s,a,l,c){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||Ro(l,a),Je(c,a);const w=l.initialInputs;for(let I=h;I<m;I++){const b=s.data[I],A=Or(b);A&&ub(a,l,b);const N=Cs(a,s,I,l);Je(N,a),null!==w&&W_(0,I-h,N,b,0,w),A&&(qt(l.index,a)[8]=N)}}(s,a,l,Hr(l,a)),128==(128&l.flags)&&function ob(s,a,l){const c=l.directiveStart,h=l.directiveEnd,m=l.index,w=function Kc(){return At.lFrame.currentDirectiveIndex}();try{oi(m);for(let I=c;I<h;I++){const b=s.data[I],A=a[I];yu(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&$_(b,A)}}finally{oi(-1),yu(w)}}(s,a,l))}function Ww(s,a,l=Hr){const c=a.localNames;if(null!==c){let h=a.index+1;for(let m=0;m<c.length;m+=2){const w=c[m+1],I=-1===w?l(a,s):s[w];s[h++]=I}}}function nb(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=zw(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function zw(s,a,l,c,h,m,w,I,b,A){const N=22+c,L=N+h,K=function xk(s,a){const l=[];for(let c=0;c<a;c++)l.push(c<s?null:Vt);return l}(N,L),re="function"==typeof A?A():A;return K[1]={type:s,blueprint:K,template:l,queries:null,viewQuery:I,declTNode:a,data:K.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:b,consts:re,incompleteFirstPass:!1}}function _g(s,a,l,c){const h=tE(a);null===l?h.push(c):(h.push(l),s.firstCreatePass&&nE(s).push(c,h.length-1))}function rb(s,a,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(a,h):l[c]=[a,h]}return l}function ib(s,a){const c=a.directiveEnd,h=s.data,m=a.attrs,w=[];let I=null,b=null;for(let A=a.directiveStart;A<c;A++){const N=h[A],L=N.inputs,K=null===m||RC(a)?null:cb(L,m);w.push(K),I=rb(L,A,I),b=rb(N.outputs,A,b)}null!==I&&(I.hasOwnProperty("class")&&(a.flags|=16),I.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=w,a.inputs=I,a.outputs=b}function Rs(s,a,l,c,h,m,w,I){const b=Hr(a,l);let N,A=a.inputs;!I&&null!=A&&(N=A[c])?(Y_(s,l,N,c,h),Za(a)&&sb(l,a.index)):3&a.type&&(c=function OA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=w?w(h,a.value||"",c):h,m.setProperty(b,c,h))}function sb(s,a){const l=qt(a,s);16&l[2]||(l[2]|=32)}function Kw(s,a,l,c){let h=!1;if(Es()){const m=function G_(s,a,l){const c=s.directiveRegistry;let h=null;if(c)for(let m=0;m<c.length;m++){const w=c[m];lf(l,w.selectors,!1)&&(h||(h=[]),eo(Ro(l,a),s,w.type),Or(w)?(ab(s,l),h.unshift(w)):h.push(w))}return h}(s,a,l),w=null===c?null:{"":-1};if(null!==m){h=!0,lb(l,s.data.length,m.length);for(let N=0;N<m.length;N++){const L=m[N];L.providersResolver&&L.providersResolver(L)}let I=!1,b=!1,A=pf(s,a,m.length,null);for(let N=0;N<m.length;N++){const L=m[N];l.mergedAttrs=il(l.mergedAttrs,L.hostAttrs),yg(s,l,a,A,L),BA(A,L,w),null!==L.contentQueries&&(l.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(l.flags|=128);const K=L.type.prototype;!I&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),I=!0),!b&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),b=!0),A++}ib(s,l)}w&&function UA(s,a,l){if(a){const c=s.localNames=[];for(let h=0;h<a.length;h+=2){const m=l[a[h+1]];if(null==m)throw new Ie(-301,!1);c.push(a[h],m)}}}(l,c,w)}return l.mergedAttrs=il(l.mergedAttrs,l.attrs),h}function Zw(s,a,l,c,h,m){const w=m.hostBindings;if(w){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const b=~a.index;(function VA(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(I)!=b&&I.push(b),I.push(c,h,w)}}function $_(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function ab(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function BA(s,a,l){if(l){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)l[a.exportAs[c]]=s;Or(a)&&(l[""]=s)}}function lb(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function yg(s,a,l,c,h){s.data[c]=h;const m=h.factory||(h.factory=zi(h.type)),w=new Xs(m,Or(h),cf);s.blueprint[c]=w,l[c]=w,Zw(s,a,0,c,pf(s,l,h.hostVars,Vt),h)}function ub(s,a,l){const c=Hr(a,s),h=nb(l),m=s[10],w=K_(s,j_(s,h,null,l.onPush?32:16,c,a,m,m.createRenderer(c,l),null,null,null));s[a.index]=w}function zo(s,a,l,c,h,m){const w=Hr(s,a);!function mf(s,a,l,c,h,m,w){if(null==m)s.removeAttribute(a,h,l);else{const I=null==w?ve(m):w(m,c||"",h);s.setAttribute(a,h,I,l)}}(a[11],w,m,s.value,l,c,h)}function W_(s,a,l,c,h,m){const w=m[a];if(null!==w){const I=c.setInput;for(let b=0;b<w.length;){const A=w[b++],N=w[b++],L=w[b++];null!==I?c.setInput(l,L,A,N):l[N]=L}}}function cb(s,a){let l=null,c=0;for(;c<a.length;){const h=a[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],a[c+1])),c+=2}else c+=2;else c+=4}return l}function Qw(s,a,l,c){return new Array(s,!0,!1,a,null,0,c,l,null,null)}function $A(s,a){const l=qt(a,s);if(Co(l)){const c=l[1];48&l[2]?Pl(c,l,c.template,l[8]):l[5]>0&&Jw(l)}}function Jw(s){for(let c=w_(s);null!==c;c=Sr(c))for(let h=10;h<c.length;h++){const m=c[h];if(Co(m))if(512&m[2]){const w=m[1];Pl(w,m,w.template,m[8])}else m[5]>0&&Jw(m)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=qt(l[c],s);Co(h)&&h[5]>0&&Jw(h)}}function GA(s,a){const l=qt(a,s),c=l[1];(function q_(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(c,l),H_(c,l,l[8])}function K_(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function Xw(s){for(;s;){s[2]|=32;const a=Sd(s);if(bp(s)&&!a)return s;s=a}return null}function Z_(s,a,l){rl(0),a(s,l)}function tE(s){return s[7]||(s[7]=[])}function nE(s){return s.cleanup||(s.cleanup=[])}function iE(s,a){const l=s[9],c=l?l.get(ef,null):null;c&&c.handleError(a)}function Y_(s,a,l,c,h){for(let m=0;m<l.length;){const w=l[m++],I=l[m++],b=a[w],A=s.data[w];null!==A.setInput?A.setInput(b,h,c,I):b[I]=h}}function Q_(s,a,l){let c=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==a)for(let w=0;w<a.length;w++){const I=a[w];"number"==typeof I?m=I:1==m?h=_e(h,I):2==m&&(c=_e(c,I+": "+a[++w]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}function J_(s,a,l,c,h=!1){for(;null!==l;){const m=a[l.index];if(null!==m&&c.push(xn(m)),jr(m))for(let I=10;I<m.length;I++){const b=m[I],A=b[1].firstChild;null!==A&&J_(b[1],b,A,c)}const w=l.type;if(8&w)J_(s,a,l.child,c);else if(32&w){const I=ng(l,a);let b;for(;b=I();)c.push(b)}else if(16&w){const I=TC(a,l);if(Array.isArray(I))c.push(...I);else{const b=Sd(a[16]);J_(b[1],b,I,c,!0)}}l=h?l.projectionNext:l.next}return c}class vg{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return J_(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(jr(a)){const l=a[8],c=l?l.indexOf(this):-1;c>-1&&(ww(a,c),Yi(l,c))}this._attachedToViewContainer=!1}Xu(this._lView[1],this._lView)}onDestroy(a){_g(this._lView[1],this._lView,null,a)}markForCheck(){Xw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function eE(s,a,l){const c=a[10];c.begin&&c.begin();try{Pl(s,a,s.template,l)}catch(h){throw iE(a,h),h}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cA(s,a){ag(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=a}}class zA extends vg{constructor(a){super(a),this._view=a}detectChanges(){!function db(s){!function WA(s){for(let a=0;a<s.components.length;a++){const l=s.components[a],c=Ms(l);if(null!==c){const h=c[1];mg(h,c,h.template,l)}}}(s[8])}(this._view)}checkNoChanges(){}get context(){return null}}class sE extends x{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=Ft(a);return new _f(l,this.ngModule)}}function oE(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class hb{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,c){const h=this.injector.get(a,Td,c);return h!==Td||l===Td?h:this.parentInjector.get(a,l,c)}}class _f extends Xh{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function OC(s){return s.map(kC).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return oE(this.componentDef.inputs)}get outputs(){return oE(this.componentDef.outputs)}create(a,l,c,h){let m=(h=h||this.ngModule)instanceof Qn?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const w=m?new hb(a,m):a,I=w.get(vt,null);if(null===I)throw new Ie(407,!1);const b=w.get(xs,null),A=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",L=c?function qw(s,a,l){return s.selectRootElement(a,l===at.ShadowDom)}(A,c,this.componentDef.encapsulation):li(I.createRenderer(null,this.componentDef),N,function aE(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),K=this.componentDef.onPush?288:272,re={components:[]},be=zw(0,null,null,1,0,null,null,null,null,null),ke=j_(null,be,re,K,null,null,I,A,b,w,null);let Ze,it;wu(ke);try{const bt=function KA(s,a,l,c,h,m){const w=l[1];l[22]=s;const b=Wo(w,22,2,"#host",null),A=b.mergedAttrs=a.hostAttrs;null!==A&&(Q_(b,A,!0),null!==s&&(fa(h,s,A),null!==b.classes&&Ml(h,s,b.classes),null!==b.styles&&lg(h,s,b.styles)));const N=c.createRenderer(s,a),L=j_(l,nb(a),null,a.onPush?32:16,l[22],b,c,N,m||null,null,null);return w.firstCreatePass&&(eo(Ro(b,l),w,a.type),ab(w,b),lb(b,l.length,1)),K_(l,L),l[22]=L}(L,this.componentDef,ke,I,A);if(L)if(c)fa(A,L,["ng-version",Yu.full]);else{const{attrs:Ce,classes:mt}=function fA(s){const a=[],l=[];let c=1,h=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===h?""!==m&&a.push(m,s[++c]):8===h&&l.push(m);else{if(!jo(h))break;h=m}c++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Ce&&fa(A,L,Ce),mt&&mt.length>0&&Ml(A,L,mt.join(" "))}if(it=la(be,22),void 0!==l){const Ce=it.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Wt=l[mt];Ce.push(null!=Wt?Array.from(Wt):null)}}Ze=function X_(s,a,l,c,h){const m=l[1],w=function LA(s,a,l){const c=Mn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),yg(s,c,a,pf(s,a,1,null),l),ib(s,c));const h=Cs(a,s,c.directiveStart,c);Je(h,a);const m=Hr(c,a);return m&&Je(m,a),h}(m,l,a);if(c.components.push(w),s[8]=w,null!==h)for(const b of h)b(w,a);if(a.contentQueries){const b=Mn();a.contentQueries(1,w,b.directiveStart)}const I=Mn();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(oi(I.index),Zw(l[1],I,0,I.directiveStart,I.directiveEnd,a),$_(a,w)),w}(bt,this.componentDef,ke,re,[lE]),H_(be,ke,null)}finally{Do()}return new qA(this.componentType,Ze,W(it,ke),ke,it)}}class qA extends class ow{}{constructor(a,l,c,h,m){super(),this.location=c,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new zA(h),this.componentType=a}setInput(a,l){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[a])){const m=this._rootLView;Y_(m[1],m,h,a,l),sb(m,this._tNode.index)}}get injector(){return new Po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function lE(){const s=Mn();nd(Ae()[1],s)}function uE(s){let a=function ey(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;a;){let h;if(Or(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ie(903,!1);h=a.\u0275dir}if(h){if(l){c.push(h);const w=s;w.inputs=yf(s.inputs),w.declaredInputs=yf(s.declaredInputs),w.outputs=yf(s.outputs);const I=h.hostBindings;I&&JA(s,I);const b=h.viewQuery,A=h.contentQueries;if(b&&YA(s,b),A&&QA(s,A),ce(s.inputs,h.inputs),ce(s.declaredInputs,h.declaredInputs),ce(s.outputs,h.outputs),Or(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let w=0;w<m.length;w++){const I=m[w];I&&I.ngInherit&&I(s),I===uE&&(l=!1)}}a=Object.getPrototypeOf(a)}!function ZA(s){let a=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=a+=h.hostVars,h.hostAttrs=il(h.hostAttrs,l=il(l,h.hostAttrs))}}(c)}function yf(s){return s===Ur?{}:s===St?[]:s}function YA(s,a){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{a(c,h),l(c,h)}:a}function QA(s,a){const l=s.contentQueries;s.contentQueries=l?(c,h,m)=>{a(c,h,m),l(c,h,m)}:a}function JA(s,a){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{a(c,h),l(c,h)}:a}let _r=null;function Vd(){if(!_r){const s=dn.Symbol;if(s&&s.iterator)_r=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const c=a[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(_r=c)}}}return _r}function Ol(s){return!!dE(s)&&(Array.isArray(s)||!(s instanceof Map)&&Vd()in s)}function dE(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ii(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function mb(s,a,l,c){const h=Ae();return Ii(h,To(),a)&&($t(),zo(wn(),h,s,a,l,c)),mb}function Ib(s,a,l,c,h,m,w,I){const b=Ae(),A=$t(),N=s+22,L=A.firstCreatePass?function sx(s,a,l,c,h,m,w,I,b){const A=a.consts,N=Wo(a,s,4,w||null,ki(A,I));Kw(a,l,N,ki(A,b)),nd(a,N);const L=N.tViews=zw(2,N,c,h,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,N),L.queries=a.queries.embeddedTView(N)),N}(N,A,b,a,l,c,h,m,w):A.data[N];yi(L,!1);const K=b[11].createComment("");Bo(A,b,K,L),Je(K,b),K_(b,b[N]=Qw(K,b,K,L)),Vc(L)&&Gw(A,b,L),null!=w&&Ww(b,L,I)}function pE(s,a,l){const c=Ae();return Ii(c,To(),a)&&Rs($t(),wn(),c,s,a,c[11],l,!1),pE}function ny(s,a,l,c,h){const w=h?"class":"style";Y_(s,l,a.inputs[w],w,c)}function gE(s,a,l,c){const h=Ae(),m=$t(),w=22+s,I=h[11],b=h[w]=li(I,a,function Iu(){return At.lFrame.currentNamespace}()),A=m.firstCreatePass?function lx(s,a,l,c,h,m,w){const I=a.consts,A=Wo(a,s,2,h,ki(I,m));return Kw(a,l,A,ki(I,w)),null!==A.attrs&&Q_(A,A.attrs,!1),null!==A.mergedAttrs&&Q_(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(w,m,h,0,a,l,c):m.data[w];yi(A,!0);const N=A.mergedAttrs;null!==N&&fa(I,b,N);const L=A.classes;null!==L&&Ml(I,b,L);const K=A.styles;return null!==K&&lg(I,b,K),64!=(64&A.flags)&&Bo(m,h,b,A),0===function fu(){return At.lFrame.elementDepthCount}()&&Je(b,h),function pu(){At.lFrame.elementDepthCount++}(),Vc(A)&&(Gw(m,h,A),tb(m,A,h)),null!==c&&Ww(h,A),gE}function Ef(){let s=Mn();Xa()?el():(s=s.parent,yi(s,!1));const a=s;!function $c(){At.lFrame.elementDepthCount--}();const l=$t();return l.firstCreatePass&&(nd(l,s),su(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Tu(s){return 0!=(16&s.flags)}(a)&&ny(l,a,Ae(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Sh(s){return 0!=(32&s.flags)}(a)&&ny(l,a,Ae(),a.stylesWithoutHost,!1),Ef}function on(s,a,l,c){return gE(s,a,l,c),Ef(),on}function Cg(s,a,l){const c=Ae(),h=$t(),m=s+22,w=h.firstCreatePass?function mE(s,a,l,c,h){const m=a.consts,w=ki(m,c),I=Wo(a,s,8,"ng-container",w);return null!==w&&Q_(I,w,!0),Kw(a,l,I,ki(m,h)),null!==a.queries&&a.queries.elementStart(a,I),I}(m,h,c,a,l):h.data[m];yi(w,!0);const I=c[m]=c[11].createComment("");return Bo(h,c,I,w),Je(I,c),Vc(w)&&(Gw(h,c,w),tb(h,w,c)),null!=l&&Ww(c,w),Cg}function ry(){let s=Mn();const a=$t();return Xa()?el():(s=s.parent,yi(s,!1)),a.firstCreatePass&&(nd(a,s),su(s)&&a.queries.elementEnd(s)),ry}function ux(){return Ae()}function bg(s){return!!s&&"function"==typeof s.then}function we(s){return!!s&&"function"==typeof s.subscribe}const Ci=we;function Ns(s,a,l,c){const h=Ae(),m=$t(),w=Mn();return function Cb(s,a,l,c,h,m,w,I){const b=Vc(c),N=s.firstCreatePass&&nE(s),L=a[8],K=tE(a);let re=!0;if(3&c.type||I){const Ze=Hr(c,a),it=I?I(Ze):Ze,bt=K.length,Ce=I?Wt=>I(xn(Wt[c.index])):c.index;let mt=null;if(!I&&b&&(mt=function k(s,a,l,c){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const w=h[m];if(w===l&&h[m+1]===c){const I=a[7],b=h[m+2];return I.length>b?I[b]:null}"string"==typeof w&&(m+=2)}return null}(s,a,h,c.index)),null!==mt)(mt.__ngLastListenerFn__||mt).__ngNextListenerFn__=m,mt.__ngLastListenerFn__=m,re=!1;else{m=rt(c,a,L,m,!1);const Wt=l.listen(it,h,m);K.push(m,Wt),N&&N.push(h,Ce,bt,bt+1)}}else m=rt(c,a,L,m,!1);const be=c.outputs;let ke;if(re&&null!==be&&(ke=be[h])){const Ze=ke.length;if(Ze)for(let it=0;it<Ze;it+=2){const Tn=a[ke[it]][ke[it+1]].subscribe(m),ls=K.length;K.push(m,Tn),N&&N.push(h,c.index,ls,-(ls+1))}}}(m,h,h[11],w,s,a,0,c),Ns}function ka(s,a,l,c){try{return!1!==l(c)}catch(h){return iE(s,h),!1}}function rt(s,a,l,c,h){return function m(w){if(w===Function)return c;Xw(2&s.flags?qt(s.index,a):a);let b=ka(a,0,c,w),A=m.__ngNextListenerFn__;for(;A;)b=ka(a,0,A,w)&&b,A=A.__ngNextListenerFn__;return h&&!1===b&&(w.preventDefault(),w.returnValue=!1),b}}function iy(s=1){return function So(s){return(At.lFrame.contextLView=function Eu(s,a){for(;s>0;)a=a[15],s--;return a}(s,At.lFrame.contextLView))[8]}(s)}function vE(s,a,l,c,h){const m=s[l+1],w=null===a;let I=c?Ho(m):$o(m),b=!1;for(;0!==I&&(!1===b||w);){const N=s[I+1];dx(s[I],a)&&(b=!0,s[I+1]=c?nc(N):F_(N)),I=c?Ho(N):$o(N)}b&&(s[l+1]=c?F_(m):nc(m))}function dx(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&wi(s,a)>=0}const xr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ay(s){return s.substring(xr.key,xr.keyEnd)}function bi(s,a){const l=xr.textEnd;return l===a?-1:(a=xr.keyEnd=function IE(s,a,l){for(;a<l&&s.charCodeAt(a)>32;)a++;return a}(s,xr.key=a,l),Hd(s,a,l))}function Hd(s,a,l){for(;a<l&&s.charCodeAt(a)<=32;)a++;return a}function bE(s,a,l){return ho(s,a,l,!1),bE}function sc(s,a){return ho(s,a,null,!0),sc}function DE(s){!function ss(s,a,l,c){const h=$t(),m=Is(2);h.firstUpdatePass&&dy(h,null,m,c);const w=Ae();if(l!==Vt&&Ii(w,m,l)){const I=h.data[or()];if(Ag(I,c)&&!cy(h,m)){let b=c?I.classesWithoutHost:I.stylesWithoutHost;null!==b&&(l=_e(b,l||"")),ny(h,I,w,l,c)}else!function Sg(s,a,l,c,h,m,w,I){h===Vt&&(h=St);let b=0,A=0,N=0<h.length?h[0]:null,L=0<m.length?m[0]:null;for(;null!==N||null!==L;){const K=b<h.length?h[b+1]:void 0,re=A<m.length?m[A+1]:void 0;let ke,be=null;N===L?(b+=2,A+=2,K!==re&&(be=L,ke=re)):null===L||null!==N&&N<L?(b+=2,be=N):(A+=2,be=L,ke=re),null!==be&&Rb(s,a,l,c,be,ke,w,I),N=b<h.length?h[b]:null,L=A<m.length?m[A]:null}}(h,I,w,w[11],w[m+1],w[m+1]=function px(s,a,l){if(null==l||""===l)return St;const c=[],h=As(l);if(Array.isArray(h))for(let m=0;m<h.length;m++)s(c,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&s(c,m,h[m]);else"string"==typeof h&&a(c,h);return c}(s,a,l),c,m)}}(vi,Oa,s,!0)}function Oa(s,a){for(let l=function Ab(s){return function EE(s){xr.key=0,xr.keyEnd=0,xr.value=0,xr.valueEnd=0,xr.textEnd=s.length}(s),bi(s,Hd(s,0,xr.textEnd))}(a);l>=0;l=bi(a,l))vi(s,ay(a),!0)}function ho(s,a,l,c){const h=Ae(),m=$t(),w=Is(2);m.firstUpdatePass&&dy(m,s,w,c),a!==Vt&&Ii(h,w,a)&&Rb(m,m.data[or()],h,h[11],s,h[w+1]=function gx(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ge(As(s)))),s}(a,l),c,w)}function cy(s,a){return a>=s.expandoStartIndex}function dy(s,a,l,c){const h=s.data;if(null===h[l+1]){const m=h[or()],w=cy(s,l);Ag(m,c)&&null===a&&!w&&(a=!1),a=function SE(s,a,l,c){const h=nl(s);let m=c?a.residualClasses:a.residualStyles;if(null===h)0===(c?a.classBindings:a.styleBindings)&&(l=Dg(l=hy(null,s,a,l,c),a.attrs,c),m=null);else{const w=a.directiveStylingLast;if(-1===w||s[w]!==h)if(l=hy(h,s,a,l,c),null===m){let b=function hx(s,a,l){const c=l?a.classBindings:a.styleBindings;if(0!==$o(c))return s[Ho(c)]}(s,a,c);void 0!==b&&Array.isArray(b)&&(b=hy(null,s,a,b[1],c),b=Dg(b,a.attrs,c),function fx(s,a,l,c){s[Ho(l?a.classBindings:a.styleBindings)]=c}(s,a,c,b))}else m=function AE(s,a,l){let c;const h=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<h;m++)c=Dg(c,s[m].hostAttrs,l);return Dg(c,a.attrs,l)}(s,a,c)}return void 0!==m&&(c?a.residualClasses=m:a.residualStyles=m),l}(h,m,a,c),function cx(s,a,l,c,h,m){let w=m?a.classBindings:a.styleBindings,I=Ho(w),b=$o(w);s[c]=l;let N,A=!1;if(Array.isArray(l)){const L=l;N=L[1],(null===N||wi(L,N)>0)&&(A=!0)}else N=l;if(h)if(0!==b){const K=Ho(s[I+1]);s[c+1]=O_(K,I),0!==K&&(s[K+1]=fg(s[K+1],c)),s[I+1]=function SA(s,a){return 131071&s|a<<17}(s[I+1],c)}else s[c+1]=O_(I,0),0!==I&&(s[I+1]=fg(s[I+1],c)),I=c;else s[c+1]=O_(b,0),0===I?I=c:s[b+1]=fg(s[b+1],c),b=c;A&&(s[c+1]=F_(s[c+1])),vE(s,N,c,!0),vE(s,N,c,!1),function Sb(s,a,l,c,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof a&&wi(m,a)>=0&&(l[c+1]=nc(l[c+1]))}(a,N,s,c,m),w=O_(I,b),m?a.classBindings=w:a.styleBindings=w}(h,m,a,l,w,c)}}function hy(s,a,l,c,h){let m=null;const w=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<w&&(m=a[I],c=Dg(c,m.hostAttrs,h),m!==s);)I++;return null!==s&&(l.directiveStylingLast=I),c}function Dg(s,a,l){const c=l?1:2;let h=-1;if(null!==a)for(let m=0;m<a.length;m++){const w=a[m];"number"==typeof w?h=w:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),vi(s,w,!!l||a[++m]))}return void 0===s?null:s}function Rb(s,a,l,c,h,m,w,I){if(!(3&a.type))return;const b=s.data,A=b[I+1];fy(function Pa(s){return 1==(1&s)}(A)?Cf(b,a,l,h,$o(A),w):void 0)||(fy(m)||function Pw(s){return 2==(2&s)}(A)&&(m=Cf(b,null,l,h,I,w)),function xC(s,a,l,c,h){if(a)h?s.addClass(l,c):s.removeClass(l,c);else{let m=-1===c.indexOf("-")?void 0:is.DashCase;null==h?s.removeStyle(l,c,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=is.Important),s.setStyle(l,c,h,m))}}(c,w,_i(or(),l),h,m))}function Cf(s,a,l,c,h,m){const w=null===a;let I;for(;h>0;){const b=s[h],A=Array.isArray(b),N=A?b[1]:b,L=null===N;let K=l[h+1];K===Vt&&(K=L?St:void 0);let re=L?Ia(K,c):N===c?K:void 0;if(A&&!fy(re)&&(re=Ia(b,c)),fy(re)&&(I=re,w))return I;const be=s[h+1];h=w?Ho(be):$o(be)}if(null!==a){let b=m?a.residualClasses:a.residualStyles;null!=b&&(I=Ia(b,c))}return I}function fy(s){return void 0!==s}function Ag(s,a){return 0!=(s.flags&(a?16:32))}function xg(s,a=""){const l=Ae(),c=$t(),h=s+22,m=c.firstCreatePass?Wo(c,h,1,a,null):c.data[h],w=l[h]=function xd(s,a){return s.createText(a)}(l[11],a);Bo(c,l,w,m),yi(m,!1)}function Mg(s){return bf("",s,""),Mg}function bf(s,a,l){const c=Ae(),h=function qo(s,a,l,c){return Ii(s,To(),l)?a+ve(l)+c:Vt}(c,s,a,l);return h!==Vt&&function kl(s,a,l){const c=_i(a,s);!function sg(s,a,l){s.setValue(a,l)}(s[11],c,l)}(c,or(),h),bf}function wy(s,a,l){const c=Ae();if(Ii(c,To(),a)){const m=$t(),w=wn();Rs(m,w,c,s,a,function rE(s,a,l){return(null===s||Or(s))&&(l=function lu(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[a.index])),l[11]}(nl(m.data),w,c),l,!0)}return wy}const Fa=void 0;var Cx=["en",[["a","p"],["AM","PM"],Fa],[["AM","PM"],Fa,Fa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fa,"{1} 'at' {0}",Fa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ix(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Zo={};function GE(s){const a=function Lb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Ng(a);if(l)return l;const c=a.split("-")[0];if(l=Ng(c),l)return l;if("en"===c)return Cx;throw new Ie(701,!1)}function WE(s){return GE(s)[yt.PluralCase]}function Ng(s){return s in Zo||(Zo[s]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[s]),Zo[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const La="en-US";let Af=La;function kf(s,a,l,c,h){if(s=X(s),Array.isArray(s))for(let m=0;m<s.length;m++)kf(s[m],a,l,c,h);else{const m=$t(),w=Ae();let I=Ku(s)?s:X(s.provide),b=Zu(s);const A=Mn(),N=1048575&A.providerIndexes,L=A.directiveStart,K=A.providerIndexes>>20;if(Ku(s)||!s.multi){const re=new Xs(b,h,cf),be=Py(I,a,h?N:N+K,L);-1===be?(eo(Ro(A,w),m,I),Ny(m,s,a.length),a.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(re),w.push(re)):(l[be]=re,w[be]=re)}else{const re=Py(I,a,N+K,L),be=Py(I,a,N,N+K),ke=re>=0&&l[re],Ze=be>=0&&l[be];if(h&&!Ze||!h&&!ke){eo(Ro(A,w),m,I);const it=function nT(s,a,l,c,h){const m=new Xs(s,l,cf);return m.multi=[],m.index=a,m.componentProviders=0,Va(m,h,c&&!l),m}(h?a0:jx,l.length,h,c,b);!h&&Ze&&(l[be].providerFactory=it),Ny(m,s,a.length,0),a.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(it),w.push(it)}else Ny(m,s,re>-1?re:be,Va(l[h?be:re],b,!h&&c));!h&&c&&Ze&&l[be].componentProviders++}}}function Ny(s,a,l,c){const h=Ku(a),m=function ao(s){return!!s.useClass}(a);if(h||m){const b=(m?X(a.useClass):a).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&a.multi){const N=A.indexOf(l);-1===N?A.push(l,[c,b]):A[N+1].push(c,b)}else A.push(l,b)}}}function Va(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function Py(s,a,l,c){for(let h=l;h<c;h++)if(a[h]===s)return h;return-1}function jx(s,a,l,c){return qd(this.multi,[])}function a0(s,a,l,c){const h=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,I=Cs(l,l[1],this.providerFactory.index,c);m=I.slice(0,w),qd(h,m);for(let b=w;b<I.length;b++)m.push(I[b])}else m=[],qd(h,m);return m}function qd(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function ky(s,a=[]){return l=>{l.providersResolver=(c,h)=>function tT(s,a,l){const c=$t();if(c.firstCreatePass){const h=Or(s);kf(l,c.data,c.blueprint,h,!0),kf(a,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,a)}}class Bl{}class l0{}function u0(s,a){return new rT(s,a??null)}class rT extends Bl{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sE(this);const c=Br(a);this._bootstrapComponents=Ra(c.bootstrap),this._r3Injector=yA(a,l,[{provide:Bl,useValue:this},{provide:x,useValue:this.componentFactoryResolver}],ge(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Oy extends l0{constructor(a){super(),this.moduleType=a}create(a){return new rT(this.moduleType,a)}}class Gg extends Bl{constructor(a,l,c){super(),this.componentFactoryResolver=new sE(this),this.instance=null;const h=new Qp([...a,{provide:Bl,useValue:this},{provide:x,useValue:this.componentFactoryResolver}],l||Tl(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Fy(s,a,l=null){return new Gg(s,a,l).injector}let iT=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=Wr(0,l.type),h=c.length>0?Fy([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=tn({token:s,providedIn:"environment",factory:()=>new s(Bn(Qn))}),s})();function Ly(s){s.getStandaloneInjector=a=>a.get(iT).getOrCreateStandaloneInjector(s)}function cT(s,a,l,c){return fT(Ae(),Rn(),s,a,l,c)}function fT(s,a,l,c,h,m){const w=a+l;return Ii(s,w,h)?function Fl(s,a,l){return s[a]=l}(s,w+1,m?c.call(m,h):c(h)):function Zd(s,a){const l=s[a];return l===Vt?void 0:l}(s,w+1)}function st(s,a){const l=$t();let c;const h=s+22;l.firstCreatePass?(c=function xt(s,a){if(a)for(let l=a.length-1;l>=0;l--){const c=a[l];if(s===c.name)return c}}(a,l.pipeRegistry),l.data[h]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,c.onDestroy)):c=l.data[h];const m=c.factory||(c.factory=zi(c.type)),w=Fn(cf);try{const I=al(!1),b=m();return al(I),function ox(s,a,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),a[l]=c}(l,Ae(),h,b),b}finally{Fn(w)}}function Qe(s,a,l){const c=s+22,h=Ae(),m=function ws(s,a){return s[a]}(h,c);return function Kg(s,a){return s[1].data[a].pure}(h,c)?fT(h,Rn(),a,m.transform,l,m):m.transform(l)}function _0(s){return a=>{setTimeout(s,void 0,a)}}const Ua=class zx extends f.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,c){let h=a,m=l||(()=>null),w=c;if(a&&"object"==typeof a){const b=a;h=b.next?.bind(b),m=b.error?.bind(b),w=b.complete?.bind(b)}this.__isAsync&&(m=_0(m),h&&(h=_0(h)),w&&(w=_0(w)));const I=super.subscribe({next:h,error:m,complete:w});return a instanceof ne.w0&&a.add(I),I}};function qx(){return this._results[Vd()]()}class By{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Vd(),c=By.prototype;c[l]||(c[l]=qx)}get changes(){return this._changes||(this._changes=new Ua)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const c=this;c.dirty=!1;const h=$r(a);(this._changesDetected=!function Fu(s,a,l){if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],m=a[c];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Zg=(()=>{class s{}return s.__NG_ELEMENT_ID__=gT,s})();const $k=Zg,Kx=class extends $k{constructor(a,l,c){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(a,l){const c=this._declarationTContainer.tViews,h=j_(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(h[19]=w.createEmbeddedView(c)),H_(c,h,a),new vg(h)}};function gT(){return Mt(Mn(),Ae())}function Mt(s,a){return 4&s.type?new Kx(a,s,W(s,a)):null}let jl=(()=>{class s{}return s.__NG_ELEMENT_ID__=mT,s})();function mT(){return _T(Mn(),Ae())}const jn=jl,Tt=class extends jn{constructor(a,l,c){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=c}get element(){return W(this._hostTNode,this._hostLView)}get injector(){return new Po(this._hostTNode,this._hostLView)}get parentInjector(){const a=xu(this._hostTNode,this._hostLView);if(xh(a)){const l=ol(a,this._hostLView),c=gr(a);return new Po(l[1].data[c+8],l)}return new Po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=Ff(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,c){let h,m;"number"==typeof c?h=c:null!=c&&(h=c.index,m=c.injector);const w=a.createEmbeddedView(l||{},m);return this.insert(w,h),w}createComponent(a,l,c,h,m){const w=a&&!function wa(s){return"function"==typeof s}(a);let I;if(w)I=l;else{const L=l||{};I=L.index,c=L.injector,h=L.projectableNodes,m=L.environmentInjector||L.ngModuleRef}const b=w?a:new _f(Ft(a)),A=c||this.parentInjector;if(!m&&null==b.ngModule){const K=(w?A:this.parentInjector).get(Qn,null);K&&(m=K)}const N=b.create(A,h,void 0,m);return this.insert(N.hostView,I),N}insert(a,l){const c=a._lView,h=c[1];if(function cu(s){return jr(s[3])}(c)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const L=c[3],K=new Tt(L,L[6],L[3]);K.detach(K.indexOf(a))}}const m=this._adjustIndex(l),w=this._lContainer;!function Md(s,a,l,c){const h=10+c,m=l.length;c>0&&(l[h-1][4]=a),c<m-10?(a[4]=l[h],od(l,10+c,a)):(l.push(a),a[4]=null),a[3]=l;const w=a[17];null!==w&&l!==w&&function Ei(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(w,a);const I=a[19];null!==I&&I.insertView(s),a[2]|=64}(h,c,w,m);const I=bw(m,w),b=c[11],A=b_(b,w[7]);return null!==A&&function wC(s,a,l,c,h,m){c[0]=h,c[6]=a,ag(s,c,l,1,h,m)}(h,w[6],b,c,A,I),a.attachToViewContainerRef(),od(Jt(w),m,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=Ff(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),c=ww(this._lContainer,l);c&&(Yi(Jt(this._lContainer),l),Xu(c[1],c))}detach(a){const l=this._adjustIndex(a,-1),c=ww(this._lContainer,l);return c&&null!=Yi(Jt(this._lContainer),l)?new vg(c):null}_adjustIndex(a,l=0){return a??this.length+l}};function Ff(s){return s[8]}function Jt(s){return s[8]||(s[8]=[])}function _T(s,a){let l;const c=a[s.index];if(jr(c))l=c;else{let h;if(8&s.type)h=xn(c);else{const m=a[11];h=m.createComment("");const w=Hr(s,a);Pt(m,b_(m,w),h,function Na(s,a){return s.nextSibling(a)}(m,w),!1)}a[s.index]=l=Qw(c,a,h,s),K_(a,l)}return new Tt(l,s,a)}class Yg{constructor(a){this.queryList=a,this.matches=null}clone(){return new Yg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hl{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const c=null!==a.contentQueries?a.contentQueries[0]:l.length,h=[];for(let m=0;m<c;m++){const w=l.getByIndex(m);h.push(this.queries[w.indexInDeclarationView].clone())}return new Hl(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==$l(a,l).matches&&this.queries[l].setDirty()}}class yT{constructor(a,l,c=null){this.predicate=a,this.flags=l,this.read=c}}class Lf{constructor(a=[]){this.queries=a}elementStart(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,m=this.getByIndex(c).embeddedTView(a,h);m&&(m.indexInDeclarationView=c,null!==l?l.push(m):l=[m])}return null!==l?new Lf(l):null}template(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class v0{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new v0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const m=c[h];this.matchTNodeWithReadOption(a,l,Qg(l,m)),this.matchTNodeWithReadOption(a,l,pa(l,a,m,!1,!1))}else c===Zg?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,pa(l,a,c,!1,!1))}matchTNodeWithReadOption(a,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===he||h===jl||h===Zg&&4&l.type)this.addMatch(l.index,-2);else{const m=pa(l,a,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,c)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function Qg(s,a){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===a)return l[c+1];return null}function wT(s,a,l,c){return-1===l?function vT(s,a){return 11&s.type?W(s,a):4&s.type?Mt(s,a):null}(a,s):-2===l?function Ps(s,a,l){return l===he?W(a,s):l===Zg?Mt(a,s):l===jl?_T(a,s):void 0}(s,a,c):Cs(s,s[1],l,a)}function jy(s,a,l,c){const h=a[19].queries[c];if(null===h.matches){const m=s.data,w=l.matches,I=[];for(let b=0;b<w.length;b+=2){const A=w[b];I.push(A<0?null:wT(a,m[A],w[b+1],l.metadata.read))}h.matches=I}return h.matches}function Hy(s,a,l,c){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const w=jy(s,a,h,l);for(let I=0;I<m.length;I+=2){const b=m[I];if(b>0)c.push(w[I/2]);else{const A=m[I+1],N=a[-b];for(let L=10;L<N.length;L++){const K=N[L];K[17]===K[3]&&Hy(K[1],K,A,c)}if(null!==N[9]){const L=N[9];for(let K=0;K<L.length;K++){const re=L[K];Hy(re[1],re,A,c)}}}}}return c}function w0(s){const a=Ae(),l=$t(),c=Zc();rl(c+1);const h=$l(l,c);if(s.dirty&&Qa(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?Hy(l,a,c,[]):jy(l,a,h,c);s.reset(m,Ve),s.notifyOnChanges()}return!0}return!1}function $y(s,a,l,c){const h=$t();if(h.firstCreatePass){const m=Mn();(function ET(s,a,l){null===s.queries&&(s.queries=new Lf),s.queries.track(new v0(a,l))})(h,new yT(a,l,c),m.index),function Jg(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function fo(s,a,l){const c=new By(4==(4&l));_g(s,a,c,c.destroy),null===a[19]&&(a[19]=new Hl),a[19].queries.push(new Yg(c))}(h,Ae(),l)}function le(){return function Gy(s,a){return s[19].queries[a].queryList}(Ae(),Zc())}function $l(s,a){return s.queries.getByIndex(a)}function Xd(...s){}const M0=new yn("Application Initializer");let Nr=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Xd,this.reject=Xd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(bg(m))l.push(m);else if(Ci(m)){const w=new Promise((I,b)=>{m.subscribe({complete:I,error:b})});l.push(w)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Bn(M0,8))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const AT=new yn("AppId",{providedIn:"root",factory:function xT(){return`${Ky()}${Ky()}${Ky()}`}});function Ky(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const MT=new yn("Platform Initializer"),rM=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),RT=new yn("appBootstrapListener"),mc=new yn("AnimationModuleType");let Kf=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const nm=new yn("LocaleId",{providedIn:"root",factory:()=>T(nm,Xe.Optional|Xe.SkipSelf)||function iM(){return typeof $localize<"u"&&$localize.locale||La}()}),NT=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class PT{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let R0=(()=>{class s{compileModuleSync(l){return new Oy(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),m=Ra(Br(l).declarations).reduce((w,I)=>{const b=Ft(I);return b&&w.push(new _f(b)),w},[]);return new PT(c,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const P0=(()=>Promise.resolve(0))();function sm(s){typeof Zone>"u"?P0.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Fs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ua(!1),this.onMicrotaskEmpty=new Ua(!1),this.onStable=new Ua(!1),this.onError=new Ua(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function OT(){let s=dn.requestAnimationFrame,a=dn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function LT(s){const a=()=>{!function FT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(dn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Yf(s),s.isCheckStableRunning=!0,Yy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Yf(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,m,w,I)=>{try{return VT(s),l.invokeTask(h,m,w,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&a(),UT(s)}},onInvoke:(l,c,h,m,w,I,b)=>{try{return VT(s),l.invoke(h,m,w,I,b)}finally{s.shouldCoalesceRunChangeDetection&&a(),UT(s)}},onHasTask:(l,c,h,m)=>{l.hasTask(h,m),c===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Yf(s),Yy(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,c,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fs.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Fs.isInAngularZone())throw new Ie(909,!1)}run(a,l,c){return this._inner.run(a,l,c)}runTask(a,l,c,h){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+h,a,oM,Xd,Xd);try{return m.runTask(w,l,c)}finally{m.cancelTask(w)}}runGuarded(a,l,c){return this._inner.runGuarded(a,l,c)}runOutsideAngular(a){return this._outer.run(a)}}const oM={};function Yy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Yf(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function VT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function UT(s){s._nesting--,Yy(s)}class BT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ua,this.onMicrotaskEmpty=new Ua,this.onStable=new Ua,this.onError=new Ua}run(a,l,c){return a.apply(l,c)}runGuarded(a,l,c){return a.apply(l,c)}runOutsideAngular(a){return a()}runTask(a,l,c,h){return a.apply(l,c)}}const eh=new yn(""),yc=new yn("");let wc,jT=(()=>{class s{constructor(l,c,h){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,wc||(function HT(s){wc=s}(h),h.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fs.assertNotInAngularZone(),sm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sm(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Bn(Fs),Bn(vc),Bn(yc))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})(),vc=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return wc?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Wl=null;const k0=new yn("AllowMultipleToken"),th=new yn("PlatformDestroyListeners");class Jy{constructor(a,l){this.name=a,this.token=l}}function O0(s,a,l=[]){const c=`Platform: ${a}`,h=new yn(c);return(m=[])=>{let w=Xy();if(!w||w.injector.get(k0,!1)){const I=[...l,...m,{provide:h,useValue:!0}];s?s(I):function $T(s){if(Wl&&!Wl.get(k0,!1))throw new Ie(400,!1);Wl=s;const a=s.get(F0);(function Qf(s){const a=s.get(MT,null);a&&a.forEach(l=>l())})(s)}(function ja(s=[],a){return Nd.create({name:a,providers:[{provide:Yp,useValue:"platform"},{provide:th,useValue:new Set([()=>Wl=null])},...s]})}(I,c))}return function Jf(s){const a=Xy();if(!a)throw new Ie(401,!1);return a}()}}function Xy(){return Wl?.get(F0)??null}let F0=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const h=function ev(s,a){let l;return l="noop"===s?new BT:("zone.js"===s?void 0:s)||new Fs(a),l}(c?.ngZone,function nh(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),m=[{provide:Fs,useValue:h}];return h.run(()=>{const w=Nd.create({providers:m,parent:this.injector,name:l.moduleType.name}),I=l.create(w),b=I.injector.get(ef,null);if(!b)throw new Ie(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:N=>{b.handleError(N)}});I.onDestroy(()=>{om(this._modules,I),A.unsubscribe()})}),function GT(s,a,l){try{const c=l();return bg(c)?c.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw a.runOutsideAngular(()=>s.handleError(c)),c}}(b,h,()=>{const A=I.injector.get(Nr);return A.runInitializers(),A.donePromise.then(()=>(function Iy(s){jt(s,"Expected localeId to be defined"),"string"==typeof s&&(Af=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(nm,La)||La),this._moduleDoBootstrap(I),I))})})}bootstrapModule(l,c=[]){const h=vr({},c);return function aM(s,a,l){const c=new Oy(l);return Promise.resolve(c)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const c=l.injector.get(Kt);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Ie(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(th,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Bn(Nd))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function vr(s,a){return Array.isArray(a)?a.reduce(vr,s):{...s,...a}}let Kt=(()=>{class s{constructor(l,c,h){this._zone=l,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new F.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new F.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Fs.assertNotInAngularZone(),sm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ue.T)(m,w.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const h=l instanceof Xh;if(!this._injector.get(Nr).done)throw!h&&Gi(l),new Ie(405,false);let w;w=h?l:this._injector.get(x).resolveComponentFactory(l),this.componentTypes.push(w.componentType);const I=function Qy(s){return s.isBoundToModule}(w)?void 0:this._injector.get(Bl),A=w.create(Nd.NULL,[],c||w.selector,I),N=A.location.nativeElement,L=A.injector.get(eh,null);return L?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),om(this.components,A),L?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;om(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(RT,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>om(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Ie(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(Bn(Fs),Bn(Qn),Bn(ef))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function om(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let WT=!0,ji=!1;function zT(){return ji=!0,WT}function am(){if(ji)throw new Error("Cannot enable prod mode after platform setup.");WT=!1}let lm=(()=>{class s{}return s.__NG_ELEMENT_ID__=dM,s})();function dM(s){return function hM(s,a,l){if(Za(s)&&!l){const c=qt(s.index,a);return new vg(c,c)}return 47&s.type?new vg(a[16],a):null}(Mn(),Ae(),16==(16&s))}class Jo{constructor(){}supports(a){return Ol(a)}create(a){return new QT(a)}}const $0=(s,a)=>a;class QT{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||$0}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,c=this._removalsHead,h=0,m=null;for(;l||c;){const w=!c||l&&l.currentIndex<W0(c,h,m)?l:c,I=W0(w,h,m),b=w.currentIndex;if(w===c)h--,c=c._nextRemoved;else if(l=l._next,null==w.previousIndex)h++;else{m||(m=[]);const A=I-h,N=b-h;if(A!=N){for(let K=0;K<A;K++){const re=K<m.length?m[K]:m[K]=0,be=re+K;N<=be&&be<A&&(m[K]=re+1)}m[w.previousIndex]=N-A}}I!==b&&a(w,I,b)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Ol(a))throw new Ie(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,m,w,l=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let I=0;I<this.length;I++)m=a[I],w=this._trackByFn(I,m),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,m,w,I)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,w,I),c=!0),l=l._next}else h=0,function nx(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[Vd()]();let c;for(;!(c=l.next()).done;)a(c.value)}}(a,I=>{w=this._trackByFn(h,I),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,I,w,h)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,w,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,c,h){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,m,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,m,h)):a=this._addAfter(new cm(l,c),m,h),a}_verifyReinsertion(a,l,c,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?a=this._reinsertAfter(m,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,m=a._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(a,l,c),this._addToMoves(a,c),a}_moveAfter(a,l,c){return this._unlink(a),this._insertAfter(a,l,c),this._addToMoves(a,c),a}_addAfter(a,l,c){return this._insertAfter(a,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,c){const h=null===l?this._itHead:l._next;return a._next=h,a._prev=l,null===h?this._itTail=a:h._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new G0),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,c=a._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new G0),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class cm{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class JT{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const l=a._prevDup,c=a._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class G0{constructor(){this.map=new Map}put(a){const l=a.trackById;let c=this.map.get(l);c||(c=new JT,this.map.set(l,c)),c.add(a)}get(a,l){const h=this.map.get(a);return h?h.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function W0(s,a,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+a+h}class XT{constructor(){}supports(a){return a instanceof Map||dE(a)}create(){return new gM}}class gM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||dE(a)))throw new Ie(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const c=a._prev;return l._next=a,l._prev=c,a._prev=l,c&&(c._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,l);const m=h._prev,w=h._next;return m&&(m._next=w),w&&(w._prev=m),h._next=null,h._prev=null,h}const c=new dm(a);return this._records.set(a,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(c=>l(a[c],c))}}class dm{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function av(){return new z0([new Jo])}let z0=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||av()),deps:[[s,new It,new $e]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Ie(901,!1)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:av}),s})();function q0(){return new lv([new XT])}let lv=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||q0()),deps:[[s,new It,new $e]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(c)return c;throw new Ie(901,!1)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:q0}),s})();const Xf=O0(null,"core",[]);let ep=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Bn(Kt))},s.\u0275mod=lt({type:s}),s.\u0275inj=Ot({}),s})();function yM(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ut,Se,V)=>{V.d(Se,{Z:()=>Ie});var f=V(2090),ne=V(4859),F=V(9681),ue=V(1877);class oe{constructor(ve,me){this._delegate=ve,this.firebase=me,(0,F._addComponent)(ve,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ve,me=F._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(ve);return!ot.isInitialized()&&"EXPLICIT"===(null===(tt=ot.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:me})}_removeServiceInstance(ve,me=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(me)}_addComponent(ve){(0,F._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,F._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function _e(){const nt=function ge(nt){const ve={},me={__esModule:!0,initializeApp:function Me(He,H={}){const ye=F.initializeApp(He,H);if((0,f.r3)(ve,ye.name))return ve[ye.name];const Q=new nt(ye,me);return ve[ye.name]=Q,Q},app:ot,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Te(He){const H=He.name,ye=H.replace("-compat","");if(F._registerComponent(He)&&"PUBLIC"===He.type){const Q=(te=ot())=>{if("function"!=typeof te[ye])throw ce.create("invalid-app-argument",{appName:H});return te[ye]()};void 0!==He.serviceProps&&(0,f.ZB)(Q,He.serviceProps),me[ye]=Q,nt.prototype[ye]=function(...te){return this._getService.bind(this,H).apply(this,He.multipleInstances?te:[])}}return"PUBLIC"===He.type?me[ye]:null},removeApp:function tt(He){delete ve[He]},useAsService:function Be(He,H){return"serverAuth"===H?null:H},modularAPIs:F}};function ot(He){if(!(0,f.r3)(ve,He=He||F._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:He});return ve[He]}return me.default=me,Object.defineProperty(me,"apps",{get:function Ee(){return Object.keys(ve).map(He=>ve[He])}}),ot.App=nt,me}(oe);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function ve(me){(0,f.ZB)(nt,me)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),nt}(),z=new ue.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=$;!function Re(nt){(0,F.registerVersion)("@firebase/app-compat","0.1.33",nt)}()},9681:(ut,Se,V)=>{V.r(Se),V.d(Se,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Gs,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>en,_addOrOverwriteComponent:()=>tn,_apps:()=>cn,_clearComponents:()=>ia,_components:()=>On,_getProvider:()=>Ot,_registerComponent:()=>Vr,_removeServiceInstance:()=>un,deleteApp:()=>sa,getApp:()=>ni,getApps:()=>fi,initializeApp:()=>$i,onLog:()=>ps,registerVersion:()=>ri,setLogLevel:()=>Fn});var f=V(5861),ne=V(4859),F=V(1877),ue=V(2090),oe=V(8766);class pe{constructor(q){this.container=q}getPlatformInfoString(){return this.container.getProviders().map(Z=>{if(function ce(j){return"VERSION"===j.getComponent()?.type}(Z)){const De=Z.getImmediate();return`${De.library}/${De.version}`}return null}).filter(Z=>Z).join(" ")}}const ge="@firebase/app",$=new F.Yd("@firebase/app"),jt="[DEFAULT]",Ye={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,On=new Map;function en(j,q){try{j.container.addComponent(q)}catch(Z){$.debug(`Component ${q.name} failed to register with FirebaseApp ${j.name}`,Z)}}function tn(j,q){j.container.addOrOverwriteComponent(q)}function Vr(j){const q=j.name;if(On.has(q))return $.debug(`There were multiple attempts to register component ${q}.`),!1;On.set(q,j);for(const Z of cn.values())en(Z,j);return!0}function Ot(j,q){const Z=j.container.getProvider("heartbeat").getImmediate({optional:!0});return Z&&Z.triggerHeartbeat(),j.container.getProvider(q)}function un(j,q,Z=jt){Ot(j,q).clearInstance(Z)}function ia(){On.clear()}const kr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ti{constructor(q,Z,De){this._isDeleted=!1,this._options=Object.assign({},q),this._config=Object.assign({},Z),this._name=Z.name,this._automaticDataCollectionEnabled=Z.automaticDataCollectionEnabled,this._container=De,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this.checkDestroyed(),this._automaticDataCollectionEnabled=q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(q){this._isDeleted=q}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}const Gs="9.9.4";function $i(j,q={}){"object"!=typeof q&&(q={name:q});const Z=Object.assign({name:jt,automaticDataCollectionEnabled:!1},q),De=Z.name;if("string"!=typeof De||!De)throw kr.create("bad-app-name",{appName:String(De)});const je=cn.get(De);if(je){if((0,ue.vZ)(j,je.options)&&(0,ue.vZ)(Z,je.config))return je;throw kr.create("duplicate-app",{appName:De})}const lt=new ne.H0(De);for(const sn of On.values())lt.addComponent(sn);const _n=new ti(j,Z,lt);return cn.set(De,_n),_n}function ni(j=jt){const q=cn.get(j);if(!q)throw kr.create("no-app",{appName:j});return q}function fi(){return Array.from(cn.values())}function sa(j){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,f.Z)(function*(j){const q=j.name;cn.has(q)&&(cn.delete(q),yield Promise.all(j.container.getProviders().map(Z=>Z.delete())),j.isDeleted=!0)})).apply(this,arguments)}function ri(j,q,Z){var De;let je=null!==(De=Ye[j])&&void 0!==De?De:j;Z&&(je+=`-${Z}`);const lt=je.match(/\s|\//),_n=q.match(/\s|\//);if(lt||_n){const sn=[`Unable to register library "${je}" with version "${q}":`];return lt&&sn.push(`library name "${je}" contains illegal characters (whitespace or "/")`),lt&&_n&&sn.push("and"),_n&&sn.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void $.warn(sn.join(" "))}Vr(new ne.wA(`${je}-version`,()=>({library:je,version:q}),"VERSION"))}function ps(j,q){if(null!==j&&"function"!=typeof j)throw kr.create("invalid-log-argument");(0,F.Am)(j,q)}function Fn(j){(0,F.Ub)(j)}const Ln="firebase-heartbeat-store";let Wn=null;function mn(){return Wn||(Wn=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(j,q)=>{0===q&&j.createObjectStore(Ln)}}).catch(j=>{throw kr.create("idb-open",{originalErrorMessage:j.message})})),Wn}function at(){return(at=(0,f.Z)(function*(j){var q;try{return(yield mn()).transaction(Ln).objectStore(Ln).get(fr(j))}catch(Z){if(Z instanceof ue.ZR)$.warn(Z.message);else{const De=kr.create("idb-get",{originalErrorMessage:null===(q=Z)||void 0===q?void 0:q.message});$.warn(De.message)}}})).apply(this,arguments)}function dn(j,q){return hr.apply(this,arguments)}function hr(){return(hr=(0,f.Z)(function*(j,q){var Z;try{const je=(yield mn()).transaction(Ln,"readwrite");return yield je.objectStore(Ln).put(q,fr(j)),je.done}catch(De){if(De instanceof ue.ZR)$.warn(De.message);else{const je=kr.create("idb-set",{originalErrorMessage:null===(Z=De)||void 0===Z?void 0:Z.message});$.warn(je.message)}}})).apply(this,arguments)}function fr(j){return`${j.name}!${j.options.appId}`}class gs{constructor(q){this.container=q,this._heartbeatsCache=null;const Z=this.container.getProvider("app").getImmediate();this._storage=new nn(Z),this._heartbeatsCachePromise=this._storage.read().then(De=>(this._heartbeatsCache=De,De))}triggerHeartbeat(){var q=this;return(0,f.Z)(function*(){const De=q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),je=rn();if(null===q._heartbeatsCache&&(q._heartbeatsCache=yield q._heartbeatsCachePromise),q._heartbeatsCache.lastSentHeartbeatDate!==je&&!q._heartbeatsCache.heartbeats.some(lt=>lt.date===je))return q._heartbeatsCache.heartbeats.push({date:je,agent:De}),q._heartbeatsCache.heartbeats=q._heartbeatsCache.heartbeats.filter(lt=>{const _n=new Date(lt.date).valueOf();return Date.now()-_n<=2592e6}),q._storage.overwrite(q._heartbeatsCache)})()}getHeartbeatsHeader(){var q=this;return(0,f.Z)(function*(){if(null===q._heartbeatsCache&&(yield q._heartbeatsCachePromise),null===q._heartbeatsCache||0===q._heartbeatsCache.heartbeats.length)return"";const Z=rn(),{heartbeatsToSend:De,unsentEntries:je}=function Ri(j,q=1024){const Z=[];let De=j.slice();for(const je of j){const lt=Z.find(_n=>_n.agent===je.agent);if(lt){if(lt.dates.push(je.date),Y(Z)>q){lt.dates.pop();break}}else if(Z.push({agent:je.agent,dates:[je.date]}),Y(Z)>q){Z.pop();break}De=De.slice(1)}return{heartbeatsToSend:Z,unsentEntries:De}}(q._heartbeatsCache.heartbeats),lt=(0,ue.L)(JSON.stringify({version:2,heartbeats:De}));return q._heartbeatsCache.lastSentHeartbeatDate=Z,je.length>0?(q._heartbeatsCache.heartbeats=je,yield q._storage.overwrite(q._heartbeatsCache)):(q._heartbeatsCache.heartbeats=[],q._storage.overwrite(q._heartbeatsCache)),lt})()}}function rn(){return(new Date).toISOString().substring(0,10)}class nn{constructor(q){this.app=q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var q=this;return(0,f.Z)(function*(){return(yield q._canUseIndexedDBPromise)&&(yield function ht(j){return at.apply(this,arguments)}(q.app))||{heartbeats:[]}})()}overwrite(q){var Z=this;return(0,f.Z)(function*(){var De;if(yield Z._canUseIndexedDBPromise){const lt=yield Z.read();return dn(Z.app,{lastSentHeartbeatDate:null!==(De=q.lastSentHeartbeatDate)&&void 0!==De?De:lt.lastSentHeartbeatDate,heartbeats:q.heartbeats})}})()}add(q){var Z=this;return(0,f.Z)(function*(){var De;if(yield Z._canUseIndexedDBPromise){const lt=yield Z.read();return dn(Z.app,{lastSentHeartbeatDate:null!==(De=q.lastSentHeartbeatDate)&&void 0!==De?De:lt.lastSentHeartbeatDate,heartbeats:[...lt.heartbeats,...q.heartbeats]})}})()}}function Y(j){return(0,ue.L)(JSON.stringify({version:2,heartbeats:j})).length}!function G(j){Vr(new ne.wA("platform-logger",q=>new pe(q),"PRIVATE")),Vr(new ne.wA("heartbeat",q=>new gs(q),"PRIVATE")),ri(ge,"0.7.32",j),ri(ge,"0.7.32","esm2017"),ri("fire-js","")}("")},4859:(ut,Se,V)=>{V.d(Se,{H0:()=>ge,wA:()=>F,zt:()=>oe});var f=V(5861),ne=V(2090);class F{constructor($,z,X){this.name=$,this.instanceFactory=z,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class oe{constructor($,z){this.name=$,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(z)){const X=new ne.BH;if(this.instancesDeferred.set(z,X),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:z});Ue&&X.resolve(Ue)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate($){var z;const X=this.normalizeInstanceIdentifier($?.identifier),Ue=null!==(z=$?.optional)&&void 0!==z&&z;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Re){if(Ue)return null;throw Re}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ce(_e){return"EAGER"===_e.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[z,X]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(z);try{const Re=this.getOrInitializeService({instanceIdentifier:Ue});X.resolve(Re)}catch{}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const z=Array.from($.instances.values());yield Promise.all([...z.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...z.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:z={}}=$,X=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:X,options:z});for(const[Re,Ie]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Re)&&Ie.resolve(Ue);return Ue}onInit($,z){var X;const Ue=this.normalizeInstanceIdentifier(z),Re=null!==(X=this.onInitCallbacks.get(Ue))&&void 0!==X?X:new Set;Re.add($),this.onInitCallbacks.set(Ue,Re);const Ie=this.instances.get(Ue);return Ie&&$(Ie,Ue),()=>{Re.delete($)}}invokeOnInitCallbacks($,z){const X=this.onInitCallbacks.get(z);if(X)for(const Ue of X)try{Ue($,z)}catch{}}getOrInitializeService({instanceIdentifier:$,options:z={}}){let X=this.instances.get($);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=$,_e===ue?void 0:_e),options:z}),this.instances.set($,X),this.instancesOptions.set($,z),this.invokeOnInitCallbacks(X,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,X)}catch{}var _e;return X||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor($){this.name=$,this.providers=new Map}addComponent($){const z=this.getProvider($.name);if(z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const z=new oe($,this);return this.providers.set($,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Se,V)=>{V.d(Se,{Am:()=>_e,Ub:()=>ge,Yd:()=>ce,in:()=>ne});const f=[];var ne=(()=>{return($=ne||(ne={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",ne;var $})();const F={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ue=ne.INFO,oe={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},pe=($,z,...X)=>{if(z<$.logLevel)return;const Ue=(new Date).toISOString(),Re=oe[z];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Re](`[${Ue}]  ${$.name}:`,...X)};class ce{constructor(z){this.name=z,this._logLevel=ue,this._logHandler=pe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in ne))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?F[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...z),this._logHandler(this,ne.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...z),this._logHandler(this,ne.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...z),this._logHandler(this,ne.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...z),this._logHandler(this,ne.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...z),this._logHandler(this,ne.ERROR,...z)}}function ge($){f.forEach(z=>{z.setLogLevel($)})}function _e($,z){for(const X of f){let Ue=null;z&&z.level&&(Ue=F[z.level]),X.userLogHandler=null===$?null:(Re,Ie,...nt)=>{const ve=nt.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Ie>=(Ue??Re.logLevel)&&$({level:ne[Ie].toLowerCase(),message:ve,args:nt,type:Re.name})}}}},8766:(ut,Se,V)=>{V.d(Se,{Lj:()=>Me,X3:()=>ot});var f=V(5861);let F,ue;const ce=new WeakMap,ge=new WeakMap,_e=new WeakMap,$=new WeakMap,z=new WeakMap;let Re={get(H,ye,Q){if(H instanceof IDBTransaction){if("done"===ye)return ge.get(H);if("objectStoreNames"===ye)return H.objectStoreNames||_e.get(H);if("store"===ye)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return me(H[ye])},set:(H,ye,Q)=>(H[ye]=Q,!0),has:(H,ye)=>H instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in H};function ve(H){return"function"==typeof H?function nt(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...ye){return H.apply(tt(this),ye),me(ce.get(this))}:function(...ye){return me(H.apply(tt(this),ye))}:function(ye,...Q){const te=H.call(tt(this),ye,...Q);return _e.set(te,ye.sort?ye.sort():[ye]),me(te)}}(H):(H instanceof IDBTransaction&&function Ue(H){if(ge.has(H))return;const ye=new Promise((Q,te)=>{const ae=()=>{H.removeEventListener("complete",ie),H.removeEventListener("error",Le),H.removeEventListener("abort",Le)},ie=()=>{Q(),ae()},Le=()=>{te(H.error||new DOMException("AbortError","AbortError")),ae()};H.addEventListener("complete",ie),H.addEventListener("error",Le),H.addEventListener("abort",Le)});ge.set(H,ye)}(H),((H,ye)=>ye.some(Q=>H instanceof Q))(H,function oe(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,Re):H)}function me(H){if(H instanceof IDBRequest)return function X(H){const ye=new Promise((Q,te)=>{const ae=()=>{H.removeEventListener("success",ie),H.removeEventListener("error",Le)},ie=()=>{Q(me(H.result)),ae()},Le=()=>{te(H.error),ae()};H.addEventListener("success",ie),H.addEventListener("error",Le)});return ye.then(Q=>{Q instanceof IDBCursor&&ce.set(Q,H)}).catch(()=>{}),z.set(ye,H),ye}(H);if($.has(H))return $.get(H);const ye=ve(H);return ye!==H&&($.set(H,ye),z.set(ye,H)),ye}const tt=H=>z.get(H);function ot(H,ye,{blocked:Q,upgrade:te,blocking:ae,terminated:ie}={}){const Le=indexedDB.open(H,ye),Oe=me(Le);return te&&Le.addEventListener("upgradeneeded",dt=>{te(me(Le.result),dt.oldVersion,dt.newVersion,me(Le.transaction))}),Q&&Le.addEventListener("blocked",()=>Q()),Oe.then(dt=>{ie&&dt.addEventListener("close",()=>ie()),ae&&dt.addEventListener("versionchange",()=>ae())}).catch(()=>{}),Oe}function Me(H,{blocked:ye}={}){const Q=indexedDB.deleteDatabase(H);return ye&&Q.addEventListener("blocked",()=>ye()),me(Q).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Be=new Map;function He(H,ye){if(!(H instanceof IDBDatabase)||ye in H||"string"!=typeof ye)return;if(Be.get(ye))return Be.get(ye);const Q=ye.replace(/FromIndex$/,""),te=ye!==Q,ae=Te.includes(Q);if(!(Q in(te?IDBIndex:IDBObjectStore).prototype)||!ae&&!Ee.includes(Q))return;const ie=function(){var Le=(0,f.Z)(function*(Oe,...dt){const zt=this.transaction(Oe,ae?"readwrite":"readonly");let jt=zt.store;return te&&(jt=jt.index(dt.shift())),(yield Promise.all([jt[Q](...dt),ae&&zt.done]))[0]});return function(dt){return Le.apply(this,arguments)}}();return Be.set(ye,ie),ie}!function Ie(H){Re=H(Re)}(H=>({...H,get:(ye,Q,te)=>He(ye,Q)||H.get(ye,Q,te),has:(ye,Q)=>!!He(ye,Q)||H.has(ye,Q)}))},5861:(ut,Se,V)=>{function f(F,ue,oe,pe,ce,ge,_e){try{var $=F[ge](_e),z=$.value}catch(X){return void oe(X)}$.done?ue(z):Promise.resolve(z).then(pe,ce)}function ne(F){return function(){var ue=this,oe=arguments;return new Promise(function(pe,ce){var ge=F.apply(ue,oe);function _e(z){f(ge,pe,ce,_e,$,"next",z)}function $(z){f(ge,pe,ce,_e,$,"throw",z)}_e(void 0)})}}V.d(Se,{Z:()=>ne})}},ut=>{ut(ut.s=5311)}]);